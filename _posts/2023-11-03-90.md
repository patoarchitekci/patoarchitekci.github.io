---
layout: post
title: '#90 Patoarchitekci Short #38'
date: 2023-11-03 08:00:00 +0200
description: 
episode: "90"
tags: ["ai","cloudflare","terraform","aws","mySQL","hcl","bicep","azure","kubernetes","gpu"]
spreaker: 57481943
apple: patoarchitekci-short-38/id1477067604?i=1000633563822
newsletter:  |
  Serwus!
  To ten dzie tygodnia, kiedy w Twoje suchawki trafia wie偶utki odcinek podcastu "Patoarchitekci". Czym zajmiemy si tym razem?
  ** Open Source od Microsoft? Tak, to Radius!**
  Zastanawiasz si, czy najnowszy projekt Microsoftu jest tylko kolejnym gad偶etem na p贸ce z open source'owymi zabawkami, czy mo偶e faktycznie zasuguje na uwag? ukasz dokadnie przewietla Radius i nie pozostawia wtpliwoci.
  ** Zaskakujce wydatki AWS na MS365:**
  Gdy mylisz, 偶e ju偶 nic Ci nie zaskoczy, AWS wyciga asa z rkawa, pokazujc swoj bilionow faktur za MS365. Co stoi za t decyzj i jak to wpynie na przyszo chmury? W kocu mieli rozbudowywa swoje opcje... a nagle zapragnli korzysta z Offica?
  **锔 Dylematy z Terraform**
  ukasz zmaga si z Terraformem i szuka odpowiedzi na swoje bolczki. Czy Szymon bdzie w stanie obroni to narzdzie w naszej gorcej debacie? O tym przekonasz si, wczajc najnowszy odcinek.
  
  To zaledwie przedsmak, wicej posuchasz na swojej ulubionej platformie lub na stronie: <https://patoarchitekci.io/90/>
  
  Dobrego tygodnia!
  

  ## Posuchaj odcinka na 猬锔

  ★ [WWW](https://patoarchitekci.io/90/)

  ★ [Spotify](https://open.spotify.com/episode/6X6dCpHnJ4WD03ES3n39sL)

  ★ [Apple Podcasts](https://podcasts.apple.com/pl/podcast/patoarchitekci-short-38/id1477067604?i=1000633563822)

  ★ [YouTube]()
---
W dzisiejszym odcinku rozbieramy na czci pierwsze nowy opensource'owy projekt od Microsoftu - Radius. ukasz bierze go na warsztat, wic bdzie si dziao. Nastpnie zerkamy z niedowierzaniem na zakupy AWS - tak, zapacili bilion za MS365. Czy偶by nowy feature w ich infrastrukturze, czy po prostu chmura pena ironii? Koczymy dyskusj o Terraform, gdzie ukasz rozprawia si z kltw, a Szymon broni, ale czy skutecznie? Zapnijcie pasy, startujemy!


Linki i ciekawe znaleziska:

- [Radius](https://radapp.io/)
- [The Microsoft Azure Incubations Team launches Radius, a new open application platform for the cloud  ](https://azure.microsoft.com/en-us/blog/the-microsoft-azure-incubations-team-launches-radius-a-new-open-application-platform-for-the-cloud/)
- [Microsoft Prepares to Bring on Amazon As a Huge Customer of Its 365 Cloud Tools](https://www.businessinsider.com/microsoft-prepares-amazon-customer-365-cloud-tools-2023-10?IR=T)
- [Support for workload profiles within azurerm_container_app Resources 路 Issue #22161 路 hashicorp/terraform-provider-azurerm 路 GitHub](https://github.com/hashicorp/terraform-provider-azurerm/issues/22161)
- [Support for workload profiles in Terraform 路 Issue #21747 路 hashicorp/terraform-provider-azurerm 路 GitHub](https://github.com/hashicorp/terraform-provider-azurerm/issues/21747)
- [AWS Lambda under the Hood: Mike Danilov at QCon San Francisco](https://www.infoq.com/news/2023/10/aws-lambda-under-the-hood)
- [High Performance Functions in Rust on RDS PostgreSQL](https://www.infoq.com/news/2023/09/rust-rds-postgresql)
- [Microsoft AI Researchers Accidentally Exposed 38TB of Sensitive Data](https://www.infoq.com/news/2023/09/microsoft-38tb-data-leak)
- [Cloudflare launches new AI tools to help customers deploy and run models  ](https://techcrunch.com/2023/09/27/cloudflare-launches-new-ai-tools-to-help-customers-deploy-and-run-models/)
- [The open source gift exchange](https://world.hey.com/dhh/the-open-source-gift-exchange-2171e0f0)

### Transkrypcja

**Szymon Warda**: Cze, suchajcie Patoarchitekt贸w. Prowadz **Szymon Warda**: **ukasz Kau偶ny**: i ukasz Kau偶ny. Wszystkie linki do tego odcinka znajdziecie na patoarchitekci.io lub klasycznie gdzie tu na dole

**Szymon Warda**: ...albo na g贸rze. Oczywicie stay element, czyli Pato to the moon, przeka偶cie cioci, babci, koledze, chyba koledze najlepiej, szefowi itd itd bo robimy zasigi czy jakkolwiek to nazwa. Dobrze ukaszu, to z czym lecimy dzisiaj?

**ukasz Kau偶ny**: Dobra, ja dzisiaj bd dar tylko acha. Jestem nadworn lo偶 szyderc贸w. No to lecimy. Microsoft wyda opensource o nazwie Radius. Po pierwsze, jak zwykle maj problemy z nazwami, bo Radius to nazwa takiego starego protokou, kt贸ry do dzisiaj jest u偶ywany w sieciach mao wikszoci znany, ale bdzie adnie kolidowa. Maj do tego szczcie. I co oni wymylili? 呕e Cloud Native Application to nie tylko Kubernetes. Jest to wicej. Tak opisali ten projekt. A cao, zao偶enie jest takie, 偶e mamy m贸c deployowa wszystko i wszdzie. Z punktu widzenia aplikacji

**Szymon Warda**: To ja jeszcze uzupeniam, bo Microsoft wyda Microsoft Azure Inkubations. Ci sami od Kedy i Dapra, czyli poczytny, powiedzmy..

**ukasz Kau偶ny**: ...Zestaw Team Microsoft... Raczej Keda nie jest std, de facto. A to jest team Marka Russinovitza.

**Szymon Warda**: Wic stoj za tym konkretne nazwiska powiedzmy sobie. I ja mam z tym problem de facto, bo ok, zgodz si.. To jest w og贸le kolejne podejcie Microsoftu do tego, 偶eby idea jest taka, 偶e na lokalnym developmencie sobie odpalamy np. Mongo, potem na devie mamy Cosmosa, w wersji np. ni偶szej, potem na przykad na produkcji mamy w premium wersji. Jest taka mo偶liwo.

**Szymon Warda**: Wic ideowo to nie jest gupie, ale faktycznie jak si popatrzy na zawarto to tak troch kuleje. Tam jest du偶o og贸lnik贸w, bardzo mao konkret贸w.

**ukasz Kau偶ny**: Ja ju偶 zaczem to troch rozborowywa. Po pierwsze czemu ja m贸wi, 偶e z tego szydz? Szymon syszae o czym takim jak Open Application Model?

**Szymon Warda**: Byo, pamitam.

**ukasz Kau偶ny**: Nie 偶yje, de facto. Je偶eli popatrzymy dalej, DAPR.

**Szymon Warda**: DAPR generalnie robi to samo tak naprawd.

**ukasz Kau偶ny**: Tylko zobacz, 偶e nie wyszed, tylko 偶e jest. On jest cile z aplikacj mia deployment aplikacji, ale DAPR ju偶 dalej nie p贸jdzie. Jest ju偶 po swoim piku 偶ycia.

**Szymon Warda**: Wydaje mi si, 偶e po piku jest, ale znalaz swoj nisz i tam jest wykorzystywany.

**ukasz Kau偶ny**: Ale praktycznie w sensie nie jest to szeroki. Jakby mia kogo teraz powiedzie, 偶e szukam kogo kto bdzie szuka ludzi z dowiadczeniem i skillami z DAPRa to bdzie pora偶ka.

**Szymon Warda**: Zgodz si, ale tak samo na przykad Orleans. To bd takie projekty, kt贸re bd cieszyy si wskim gronie zainteresowaniem. To miay sens i tyle.

**ukasz Kau偶ny**: Orleans jeszcze si sprawdzi w paru miejscach tak mocno.

**Szymon Warda**: Sprawdzi si, jak najbardziej, szczeg贸lnie w og贸le w krgach funkcyjnych. Tak naprawd to bardzo lubi

**ukasz Kau偶ny**: Tak, tak, w gamingu w Xboksie, 偶e tak powiem, wytarte w boju na bazie chyba hello, czy kt贸ry z tych dobra? I to bya jedna szydera, druga szydera. Tam sam podzia, pomys wysoko poziomowy ok, nawet jest dobry. Wykonanie fatalne. Jak zobaczyem pod spodem w czym pisze si opis to mylaem, 偶e padn.

**Szymon Warda**: A ja na to nie zwr贸ciem uwagi w czym pisze opis waciwie

**ukasz Kau偶ny**: Aktualnie w Bicepie

**Szymon Warda**: Wanie, bo chwalili si, 偶e wspiera Terraforma, wspiera Bicepa w og贸le integruje si z innymi.

**ukasz Kau偶ny**: Patrzc de facto jak sobie popatrzymy cay autoring gdzie to jest z wykorzystaniem aktualnie opis Bicepa.

**Szymon Warda**: Ale lubisz Bicepa? To co?

**ukasz Kau偶ny**: To 偶e jest to Bicep? Mi pal licho, mi to nie przeszkadza. Tylko 偶e je偶eli popatrzymy szeroko to to powinien by niestety HCL albo YAML.

**Szymon Warda**: A ja tu bd polemizowa mimo 偶e... Bo YAML jest fajny. Zrobisz z spacj i si wszystko rypie

**ukasz Kau偶ny**: Albo HCL

**Szymon Warda**: HCL to jeszcze ok. Tu bym si zgodzi. Akurat skadni HCL-a lubi faktycznie,

**ukasz Kau偶ny**: Wic wiesz. To jest tam czy p贸jdziesz HCL-a czy.. Bicepowa skadnia te偶 nie jest za jak por贸wnuj j do HCL-owej.

**Szymon Warda**: S podobne do siebie. HCL czy skadnia Terraforma.

**ukasz Kau偶ny**: Tak, dokadnie. HCL Teraform, Bicepowa na Azure Deploymentu. Tylko ludziom ju偶 ten Multi Cloud od razu to bdzie. Jak zobacz Bicep to bdzie Microsoft Cloud.

**Szymon Warda**: To si te偶 zgadza. Czyli rozwizanie problemu tego, 偶e faktycznie lokalny development do chmury przenosimy na troch innych rzeczach to to ma sens jak najbardziej. Cae podejcie jak to z Microsoftu niekt贸re wypalaj, niekt贸re nie wypalaj. Trzeba dokadnie monitorowa co tam si waciwie dzieje i w kt贸rym to kierunku bdzie szo tak naprawd.

**ukasz Kau偶ny**: No wiesz, dobrze zrobiony kawaek Docker Compose, ewentualnie dobrze zrobione bazy danych z wykorzystaniem test containers czy innych takich rzeczy mo偶e si lepiej sprawdzi w lokalnym developmencie.

**Szymon Warda**: Tak czyli problem jest taki, 偶e nie adresuje to w peni wanie jak u偶ywa takich narzdzi, kt贸re s tylko pasowe, kt贸re nie maj emulator贸w lokalnych bo to jest problematyczne przy lokalnym developmencie.

**ukasz Kau偶ny**: Tak, jest to mega problematyczne. Tylko radius tego. Nie nie do koca to tego tak nie i nie adresuje. W szczeg贸lnoci, 偶e jak dla AWS-a to masz local stack zawsze zapominam tej nazwy ale AWS mia na przykad local... Tam jest taki produkcyjny czciowo komercyjny produkt lokal stack kt贸ry pozwala wic zupenie co innego.

**Szymon Warda**: Dobra, to ja mam dwa niusy bazodanowe. Pierwsze to jest fork MySQLa a z dodaniem Vector Searcha, czyli ju偶 wszyscy bd mieli wektory. Tak, to zaciekawio mnie, 偶e kto w og贸le si dotyka MySQLs tak bardzo mocno tak naprawd.

**ukasz Kau偶ny**: Wiesz co, patrzc si, nadal jeszcze 偶yje, szeroko.

**Szymon Warda**: Tak, 偶yje, ale wzgldem postgresql, to na pewno. Bo 偶eby nie byo Oracle doda Vector Searcha. Ale to jeszcze nie jest Community Edition, wic generalnie tak to dziaa. Drugi temat to jest to, 偶e znowu postgresql, bo odcinek bez postgresql to wiadomo nie odcinek. Dodanie funkcji rastowych do postgresql po to te偶 bya mo偶liwo w C bya mo偶liwo na tym jzyku postgresowym, a teraz bd funkcje w peni rastowe, de facto.

**ukasz Kau偶ny**: Ciekawe. 

**Szymon Warda**: I to nie jest nowinka, chocia偶 SQL Server mia funkcje w dotnecie od 10 lat, ma jako wicej, mo偶e nawet wbudowane, ale to ma sens wanie.

**ukasz Kau偶ny**: Oracle byy Javowe, wic ka偶dy tam mia swoje,

**Szymon Warda**: Ka偶dy swoje, no tak. No ale o co chodzi? Bo te偶 do poprzedniego odcinka by link o tym wanie, 偶e wyszo wsparcie dla sterownik贸w na Windowsie pisanych w rascie. Wida wic, 偶e rast si powoli, powoli, ale mimo wszystko si rozpycha i cakiem nie藕le mu idzie w tej caej ukadance. A Ty co masz?

**ukasz Kau偶ny**: Wiesz co, jedna rzecz. Co do Twoich wektor贸w to ja to zostawi do short and sweet贸w w newsletterze, do tego odcinka

**Szymon Warda**: Dobrze.

**ukasz Kau偶ny**: Jak zrobi wektory w SQL Database SQL Serverze bez supportu wektor贸w?

**Szymon Warda**: Mo偶na to wiadomo, 偶e to mo偶na zrobi. Pytanie jak to bdzie wydajne?

**ukasz Kau偶ny**: Wiesz co i to jest ciekawostka, bo jak na normalnych prockach tak jak w Azure SQLu to SIMD i AVX512 bierze udzia w szukaniu i przetwarzaniu.

**Szymon Warda**: OK, to mo偶e fajnie dziaa.

**ukasz Kau偶ny**: Wic wanie tak, plus tam jest ten column store czyli odwr贸cone. Pamitaj, 偶e s odwr贸cone format odwr贸cony odwr贸cony format przechowywania danych, wic to jest ciekawe pod tym wzgldem do szukania. Dobra, wic to sobie p贸jdzie do short and sweet.

**ukasz Kau偶ny**: A druga rzecz, kt贸ra to jest dla mnie lol AWS si chwali, 偶e ma dla workplace'u, ma swoje maile i inne takie rzeczy i do tworzenia dokument贸w gdzie tam w ramach swojej chmury usugi. No i wyszy papiery, 偶e zakupuje za ichniejszy bilion licencj od Microsoftu na M365.

**Szymon Warda**: No ale prawda jest taka, 偶e ka偶da korporacja potrzebuje zestawu M365, Wordy i Officy itd potrzebne s.

**ukasz Kau偶ny**: Ja wiem, ale no doc-pudding nie wyszed.

**Szymon Warda**: Ale czy jest sens, 偶eby Amazon rozwija swojego Worda? Nie ma sensu. Maj wyb贸r albo p贸jd w Googlowe rzeczy - chyba jeszcze gorzej, albo albo bd mieli 365

**ukasz Kau偶ny**: Oj, od razu gorzej. Wolisz docsy.

**Szymon Warda**: Ja tak, ale to jest korporacja. Bd woleli Worda de facto. Tak wic jako alternatyw wiesz, 偶e maj swoje narzdzia, ale poszli w tamto, wic to jest mocno ciekawe.

**Szymon Warda**: To ja dwa niusy AI-owe, dwa zupenie inne. Jeden to jest to. MSowi si przez przypadek udostpnio 38 terabajt贸w danych swoich pracownik贸w, midzy innymi wanie do uczenia modeli AI-owych w kontekcie GitHuba. Czyli may upsik. Jak si to wydarzyo? Tak jak zwykle to bywa z modelami AI-owymi, czyli mianowicie w publicznym repo by link z opisem modelu. Ten link by linkiem do blob storage, kt贸ry by publiczny bo by cay czas pokazywany. Tak, dokadnie tak, by peen dostp.

**Szymon Warda**: Wic no upsik m贸wi si, ale drugi link jest du偶o ciekawszy. CloudFlare wchodzi w AI. Co dorzucili? Dorzucili swoj baz wektorow, no wiadomo, musi by. Ale tak powa偶nie m贸wic generalnie faktycznie przydaa si. Dorzucili Workery z dostpem do GPU caego AI Gateway'a. Ale teraz co jest interesujce, wszystko jest w modelu pa-as-you-go.

**ukasz Kau偶ny**: GPU w pay-as-you-go.

**Szymon Warda**: To workery z GPU w pay-as-you.go. To jest naprawd ciekawe. Co wicej, chwal si, 偶e znaczenie tego jest nie tylko bo... Moja pierwsza myl bya taka OK, no to w takim razie bd workery z GPU do zwracania odpowiedzi de facto ze wszystkiego, a oni bardziej w kontekcie pokazuj to w kontekcie tego, 偶e workery bd mogy robi embeddingi wektorowe dla danych tak naprawd, czyli takie naprawd realne, realne wykorzystanie.

**Szymon Warda**: Wic jestem ciekawy jak to p贸jdzie. Zdziwiem si, 偶e poszli w tym w kierunku, ale to jak to zrobili, 偶e worker wanie z GPU to to ma rce i nogi.

**ukasz Kau偶ny**: Ma rce. W szczeg贸lnoci, 偶e problemy z dostpnoci ceny tych 偶eby odpali model s naprawd du偶e, wic to jest ciekawe.

**Szymon Warda**: Tak, to bdzie fajny model do tego jak ju偶 zrobimy model i bdzie on serwowa dane tak naprawd do uczenia jako takiego, to obstawiam, 偶e to nie ta bajka.

**ukasz Kau偶ny**: Ale do serwowania tak. Dobra, to teraz musisz mi kiedy wytumaczy czemu jak ja dotykam Terraforma. W ka偶dym projekcie kiedy musz co zrobi w tym Terraformie, to trafiam na co co przeszkadza. Ale wiesz, to tylko chodzi o to, 偶e zawsze trafi co, co trzeba hakowa. Mam takiego pecha z tym i co tutaj bym chcia wrzuci, bo wrzucae, 偶e byy update'y do Container Apps贸w jakie kilka odcink贸w temu, 偶e byo sporo fajnych update贸w. Workload profiles, czyli te dedykowane profile jak i te dedykowane rodowiska s po dzi dzie nie support w samym Teraformie, ani joby ani eventy, nic nie jest supportowane czy workflow profile na poziomie rodowiska czy aplikacji.

**Szymon Warda**: Albo min tylko miesic albo dwa, wic nie spodziewaj si zbyt szybko.

**ukasz Kau偶ny**: Suchaj, jest lepiej. Nawet flaga Label Preview nie znikn.

**Szymon Warda**: To jest problem z Terraformem. To op贸藕nienie i to de facto wspaniay plik stanu. No co ja Ci powiem. Generalnie..

**Szymon Warda**: Inaczej. Ju偶 akceptuj fakt, 偶e czasem trzeba tam wej i posprzta, je偶eli chciao si zrobi co szybko. Tak, to 偶e si psuje, to inna bajka. Dla mnie cay governance wok贸 pliku po prostu upierdliwy bardzo mocno. To jest takie... no to po prostu upierdliwe i zbyt kosztowne jak na t warto. To co m贸wiem zawsze: ja du偶o bardziej preferuj skadni HCL-ow od skadni bicepowej.

**ukasz Kau偶ny**: Mi to zwisa i z tym i z tym mam problemy. Wic dla os贸b, kt贸re m贸wi i mnie zaczepiaj co tak hejtuje Terraforma to wynika z praktyki hehehe.

**Szymon Warda**: Ja bym si z tym zgodzi, 偶e...

**ukasz Kau偶ny**: Im dalej wchodzisz tym bardziej s rozwizania.

**Szymon Warda**: 呕eby nie byo hejtowanie Terraforma jak byy tylko arm templaty byo w peni zasadne. Ich czytelno bya na poziomie ujemnym. Ju偶 jest lepiej.

**ukasz Kau偶ny**: Bicep jest spoko, Deployment stacki coraz lepiej dziaaj, wic bdzie mo偶na zacz hejtowa. Terraforma za plik stanu

**Szymon Warda**: Bdzie wszystko dziaao generalnie

**ukasz Kau偶ny**: Lepiej m贸wi, 偶e lepiej dziaaj. To nie jest jeszcze Ultimate Solution, kt贸re rozwizuje ten problem. Dobra.

**Szymon Warda**: Ja mam jeszcze jedno w takim razie ciekawy link, bardziej do poczytania sobie o tym. AWS si chwali jak to pozmienia i co pozmienia AWS Lambdzie, a dokadniej jak to siedzi pod spodem. Co chcieli optymalizowa? Optymalizowa  chcieli cold starty. To i tak byo cakiem nieze i odporno na padnicie caej zony. Niezy artyku opisujcy co byo i jak to bdzie wygldao, co si zmienio i od kiedy itd itd. Cakiem ciekawe, ale co mnie tam zaciekawio to jest to wanie jak wykorzystuj Firecrackera do mikro wirtualizacji i jak wykorzystuj pauzowanie i snapshoty. Nie wiem jak do tego 偶eby duplikat owa maszyny i oszczdza na kosztach. Raczej snapshot mikro, wiem jak s. Ciekaw rzecz artyku jest to nie do koca jest na opowiedzenie bo to zbyt du偶o konkret贸w, ale do przeczytania jak najbardziej, wic w linkach do odcinka zerknijcie.

**Szymon Warda**: Tak naprawd Dobra, no to co? Zamykamy dzisiejszy odcinek i do usyszenia kolejnym razem. Trzymajcie si! Na razie, na razie.

