---
title: '#60 O GitOps na luÅºno
'
date: 2023-02-03T08:00:00+02:00
episode: "60"
tags: ["gitops", "kubernetes", "docker", "argo", "cubeml"]
description: ""

# Jekyll compatibility fields (zachowane dla innych systemÃ³w)  
spreaker: 52614422
apple: "o-gitops-na-lu%C5%BAno/id1477067604?i=1000597824895"
spotify: "https://open.spotify.com/episode/6OznfEaCTyX8FsYmovdfKi"
youtube: "https://www.youtube.com/watch?v=A6KrQ94n4FQ"

# Hugo fields  
youtube_id: "A6KrQ94n4FQ"
youtube_url: "https://www.youtube.com/embed/A6KrQ94n4FQ?enablejsapi=1"

# Social media images (poprawione nazwy)
og_landscape: "/img/60-landscape.webp"
og_square: "/img/60-square.webp"

# Intro for episode
intro: |
  Czym jest GitOps? DziÅ› o Argo, Flux, IaaS - a takÅ¼e: Argo/Flux vs Pipeline. Hit czy kit?
  

# Links for the episode
links:
  - title: "Argo CD - Declarative GitOps CD for Kubernetes"
    url: "https://argo-cd.readthedocs.io/en/stable/"
  - title: "GitHub - mozilla/sops: Simple and flexible tool for managing secrets"
    url: "https://github.com/mozilla/sops"
  - title: "Flux Graduates from the Cloud Native Computing Foundation Incubator  "
    url: "https://www.cncf.io/announcements/2022/11/30/flux-graduates-from-cncf-incubator/"
  - title: "What is GitOps?  "
    url: "https://about.gitlab.com/topics/gitops/#how-do-teams-put-git-ops-into-practice"
  - title: "The Cloud Native Computing Foundation Announces Argo has Graduated  "
    url: "https://www.cncf.io/announcements/2022/12/06/the-cloud-native-computing-foundation-announces-argo-has-graduated/"

# Newsletter content (zachowane dla kompatybilnoÅ›ci)
newsletter: |
  CzeÅ›Ä‡! ğŸ‘‹ âœ¨
  
  Czym jest GitOps? DziÅ› o Argo, Flux, IaaS - a takÅ¼e: Argo/Flux vs Pipeline. Hit czy kit?
  
  
  
  
  ## Odcinek na stronie i materiaÅ‚y do niego â¬‡ï¸
  
  â¡ï¸ [OdsÅ‚uchaj na stronie](https://patoarchitekci.io/60)
  â¡ï¸ [Spotify](https://open.spotify.com/episode/6OznfEaCTyX8FsYmovdfKi)
  â¡ï¸ [Apple Podcasts](o-gitops-na-lu%C5%BAno/id1477067604?i=1000597824895)
  â¡ï¸ [YouTube](https://www.youtube.com/watch?v=A6KrQ94n4FQ)
  
  ## Short & Sweet
  

  ### ğŸ¤ DoÅ‚Ä…cz do Discord ğŸ‘‰ [https://discord.gg/78zPcEaP22](https://discord.gg/78zPcEaP22)
  
  ### ğŸ¢ Patron odcinka
  SÅ‚uchasz PatoarchitektÃ³w dziÄ™ki PROTOPII â€“ firmie, w ktÃ³rej Åukasz i Szymon dziaÅ‚ajÄ… na co dzieÅ„, wspierajÄ…c zespoÅ‚y IT na kaÅ¼dym etapie: od projektowania, przez wdroÅ¼enia i migracje, aÅ¼ po optymalizacjÄ™ i zabezpieczenia. Oferujemy teÅ¼ mentoring i szkolenia dostosowane do potrzeb kaÅ¼dej firmy, niezaleÅ¼nie od wielkoÅ›ci. SprawdÅº nas: [protopia.tech](https://protopia.tech/)
  
  PS. Masz pytania? Pisz Å›miaÅ‚o po drugiej stronie to nie bot na bazie GPT czy Claude ğŸ˜
---

**Åukasz KaÅ‚uÅ¼ny**: CzeÅ›Ä‡, sÅ‚uchacie PatoarchitektÃ³w, prowadzÄ… Åukasz KaÅ‚uÅ¼ny.

**Szymon Warda**: I Szymon Warda. Wszystkie linki oczywiÅ›cie patoarchitekci.io/60. Lecimy z tematem tego odcinka. A co bÄ™dziemy dzisiaj omawiali, obgadywali?

**Åukasz KaÅ‚uÅ¼ny**: Dzisiaj - Å›winkÄ™ morskÄ… albo jej odÅ‚am czyli GitOps, czyli siÄ…dziemy sobie do definicji czym jest GitOps, nasze wraÅ¼enia i czy to hit czy kit, jak to w ogÃ³le wyglÄ…da.

**Szymon Warda**: I teÅ¼ co jest na rynku de facto z GitOpsa.

**Åukasz KaÅ‚uÅ¼ny**: To co, jak Ty rozumiesz, Szymon, GitOpsa?

**Szymon Warda**: ZarzÄ…dzamy aplikacjÄ… i procedurÄ… z kodu, czyli wszystko co mamy zdeployowane, de facto w pewien sposÃ³b znajduje siÄ™ w kodzie. I to jest nasze gÅ‚Ã³wne ÅºrÃ³dÅ‚o definicji - z prawdy, wÅ‚aÅ›ciwie co ma siÄ™ dziaÄ‡.

**Åukasz KaÅ‚uÅ¼ny**: I wiesz co? Jak tutaj byÅ›my to sobie rozwinÄ™li? Bo w tym miejscu siÄ™ niestety zgadzamy, wiÄ™c jeszcze siÄ™ nie kÅ‚Ã³cimy. Tak, dla mnie tak samo. GitOps, mimo tego co jest na rynku, to co stoi za tym hasÅ‚em... To zostaje przy pierwotnej definicji, czyli tak naprawdÄ™ jest to ta czÄ™Å›Ä‡ prowadzenia praktyk developerskich do zarzÄ…dzania i deploymentu, czyli wÅ‚aÅ›nie dodanie pull requestÃ³w, repozytoriÃ³w, samego tytuÅ‚owego Gita i zarzÄ…dzanie tam konfiguracjÄ… i wypychanie tego przez Infrastructure as a Code i CI/CD i toole orkiestracyjne.

**Szymon Warda**: Tak, Przy czym mam wraÅ¼enie, Å¼e branding wokÃ³Å‚ caÅ‚ego tematu jest trochÄ™ inny, bo czÄ™sto branding jest taki de facto jednak tego tool'a CI/CD jest bardzo mocno ukryte. Tak, dorzucÄ™ swoje 3 grosze. Tutaj moÅ¼emy siÄ™ za chwilÄ™ rozbiÄ‡. Ale zgadza siÄ™, to jest... Po raz kolejny nadaliÅ›my nazwÄ™ dobrym praktykom i tyle. Nic tu siÄ™ nie zmieniÅ‚o. Za bardzo.

**Åukasz KaÅ‚uÅ¼ny**: Dobra. I to jest taka pierwsza tradycyjna definicja, o ktÃ³rej mÃ³wiliÅ›my, czyli mamy de facto DevOpsÃ³w, SysOpsÃ³w wrzucono na stack CI/CD i wklejono ich narzÄ™dzia tam, bo teÅ¼ nie ma co siÄ™ oszukiwaÄ‡, te narzÄ™dzia juÅ¼ wczeÅ›niej istniaÅ‚y w wiÄ™kszoÅ›ci przypadkÃ³w, ktÃ³re wykorzystujemy i patrzÄ…c siÄ™ rynkowo, dajÄ…c przykÅ‚ady takich narzÄ™dzi, mamy np. Ansible'a, ktÃ³rego odpalaÅ‚o siÄ™ rÄ™cznie z palca, a tak naprawdÄ™ moÅ¼na byÅ‚o przenieÅ›Ä‡ jego caÅ‚Ä… konfiguracjÄ™, caÅ‚Ä… zawartoÅ›Ä‡ i trzymaÅ‚o siÄ™ w Gicie i przenosiÅ‚o siÄ™ wykonanie np. tych playbookÃ³w, czyli flowÃ³w, ktÃ³re ma wykonaÄ‡ - byÅ‚y wywoÅ‚ywane z CD. W CI'u moÅ¼emy np. sprawdziÄ‡ je jakimÅ› linterem czy kod jest ok, odpaliÄ‡ jakieÅ› wstÄ™pne testy, ktÃ³re daje Ansible, Å¼eby sprawdziÄ‡ czy ten playbook jest dziaÅ‚ajÄ…cy. WiÄ™c dostawaliÅ›my caÅ‚y zestaw narzÄ™dzi juÅ¼ wczeÅ›niej.

**Szymon Warda**: NadaÄ‡ jeszcze standardy, to jest bardzo waÅ¼ne, bo jeÅ¼eli mamy wszystko w kodzie to moÅ¼emy politykÄ™ nazewnictwa wymusiÄ‡, moÅ¼emy kodowanie, moÅ¼emy wymusiÄ‡ sprawdzenia i wszystko inne. To jest caÅ‚a potÄ™ga tego, Å¼e trzymamy tylko w repo mamy jakiegoÅ› toola, ktÃ³ry weryfikuje jakoÅ›Ä‡ tego tekstu. To jest super waÅ¼ne i to nam daje dobry GitOps.

**Åukasz KaÅ‚uÅ¼ny**: Tak. Ja bym na sekundkÄ™ przeszedÅ‚ na drugÄ… rzecz, ktÃ³ra siÄ™ troszeczkÄ™ pojawiÅ‚a z boku razem z kontenerami i Kubernetesem. Bo z jednej strony teraz powiedzieliÅ›my sobie, Å¼e mamy... Po prostu zarzÄ…dzamy narzÄ™dziami, orkiestracjÄ… z poziomu kodu, ktÃ³ry trzymamy gdzieÅ› w repozytorium, zazwyczaj w gicie. StÄ…d ta nazwa Git Operations. Ale pojawiÅ‚a siÄ™ teÅ¼ rzecz, z ktÃ³rÄ… Ty, Szymon miaÅ‚eÅ› teÅ¼ sporo wspÃ³lnego, czyli wykorzystanie rzeczy wokÃ³Å‚ Kubernetesa, gdzie Kubernetes trzyma wstÄ™pny docelowy, ja to nazwÄ™ wstÄ™pny docelowy stan - naszej konfiguracji. I te praktyki GitOpsowe zostaÅ‚y zaimplementowane w dwÃ³ch narzÄ™dziach jest to flux i Argo CD.

**Szymon Warda**: O tak, tak, tak, tak. No bo jeÅ¼eli chodzi o infrastrukturÄ™, powiedzmy zaÅ‚Ã³Å¼my, Å¼e azure'owÄ…, czy jakÄ…Å› chmurowÄ…, czy jakÄ…kolwiek, to tutaj za bardzo nie ma dyskusji, rynek siÄ™ ustandaryzowaÅ‚. Natomiast jeÅ›li chodzi o Kubernetesa, to wÅ‚aÅ›nie jest doÅ›Ä‡ duÅ¼o dyskusji. Mamy dwa narzÄ™dzia i one majÄ… diametralnie inne podejÅ›cie. Jedno jest pullowe, drugie jest typowo pushowe. Mamy fluxa, ktÃ³ry jest pullowy, czyli flux pracuje sobie Å‚adnie na klasterku i on zaciÄ…ga danego repo, stan i aplikuje ten stan. Czyli raz na jakiÅ› czas robi sobie pulla, weryfikuje i stara siÄ™ stan zaaplikowaÄ‡. Tyle - w sensie flux nie ma za bardzo klienta na ktÃ³rymÅ› serwerze zewnÄ™trznym Argo dziaÅ‚a w drugÄ… stronÄ™, po prostu to bardziej model starszy, moÅ¼e bardziej dojrzalszy, gdzie on pushuje de facto konfiguracjÄ™ na klaster.

**Åukasz KaÅ‚uÅ¼ny**: Przy czym waÅ¼ne: nadal w sync'u jest TwÃ³j stan z repozytorium ÅºrÃ³dÅ‚owego.

**Szymon Warda**: OczywiÅ›cie to jest pytanie po prostu... Ale syncuje serwer naszego CD i gdzie on siÄ™ znajduje tak naprawdÄ™... W kontekÅ›cie flux znajduje siÄ™ w klastrze i nie ma UI'a nazwijmy to, w ktÃ³rym Å‚adnie zobaczymy co siÄ™ zadziaÅ‚o. Tak i jest to relacja tak... MiÅ‚oÅ›ci/nienawiÅ›ci.

**Åukasz KaÅ‚uÅ¼ny**: Tak, a w przypadku Argo tak jak Szymon wspomniaÅ‚ filozofia narzÄ™dzia nawet pewne czÄ™Å›ci pod spodem komponentÃ³w ze sobÄ… Å¼ebyÅ›cie mieli Å›wiadomoÅ›Ä‡ wspÃ³Å‚pracujÄ… na zasadzie wÅ‚aÅ›nie samego codebase'u. ByÅ‚y pewne unifikacje w silniku do syncowania, na przykÅ‚ad z Gita. I zaÅ‚oÅ¼enie jest takie, Å¼e Argo jest zainstalowane na Kubernetesie, pobiera sobie te definicje z repozytoriÃ³w, ale tak jak Szymon powiedziaÅ‚, on pushuje. Tak naprawdÄ™ pushuje na klaster, na ktÃ³rym jest zainstalowany, bÄ…dÅº na inne klastry kubernetesowe.

**Szymon Warda**: To ja mam pytanie - a czy nazwaÅ‚byÅ› dalej GitOpsem sytuacjÄ™ gdzie pushujemy z pipeline'Ã³w np. NiewaÅ¼ne czy githubowych, azure'owych...

**Åukasz KaÅ‚uÅ¼ny**: Dla mnie to jest... Inaczej - w moim rozumieniu - tak, to jest tradycyjny GitOps.

**Szymon Warda**: Okej, to siÄ™ zgadzamy jak najbardziej. Ja bym powiedziaÅ‚ tak: najmniej problemowy GitOps.

**Åukasz KaÅ‚uÅ¼ny**: No dobrze - i teraz, jeÅ¼eli sobie pÃ³jdziemy teraz na caÅ‚oÅ›Ä‡, pÃ³jdÅºmy sobie do praktyki. Na poczÄ…tku tego odcinka zastanawiaÅ‚em siÄ™ czy to nagrywaÄ‡ w ogÃ³le czy nie, bo GitOps, jeÅ¼eli popatrzymy... Pewnie u Was w firmach rÃ³wnieÅ¼ - jest szeroko wykorzystywany Infrastrucure as a Code, czyli terraformy, ARMy, bicepy, inne wszystkie DSLe do obsÅ‚ugi np. chmur czy tool'e, ktÃ³re odpalamy z Continuous Deployment'u do Kubernetesa istniejÄ… szeroko i sÄ… szeroko wykorzystywane.

**Szymon Warda**: Ja bym siÄ™ zgodziÅ‚ z tym, Å¼e istniejÄ…. Nie zgodziÅ‚bym siÄ™ z tym, Å¼e sÄ… wykorzystane szeroko albo sÄ… w podzbiorach pewnych czÄ™Å›ci organizacji, Å¼e pewien zespÃ³Å‚ korzysta. Ale dalej moje zastrzeÅ¼enie jest takie, Å¼e spora czÄ™Å›Ä‡ organizacji wyklikuje z portalu. Dlatego bym siÄ™ tutaj pokÅ‚Ã³ciÅ‚ z "szeroko". Niestety, ku mojej rozpaczy, ale tak siÄ™ po prostu dzieje.

**Åukasz KaÅ‚uÅ¼ny**: W State of DevOps byÅ‚o podobnie to ujÄ™te, Å¼e continuous deployment nie jest aÅ¼ tak szerokÄ… praktykÄ…, IaaS nie jest aÅ¼ tak szerokÄ… praktykÄ…. Ale wiÄ™kszoÅ›Ä‡ nowych projektÃ³w tak startuje teraz.

**Szymon Warda**: Tak - i sporo organizacji dojrzewa do tego, Å¼eby zaczÄ…Ä‡. Problem bardzo duÅ¼y pojawia siÄ™... MoÅ¼e to bÄ™dzie na inny odcinek, ale problem pojawia siÄ™: jak istniejÄ…ce Å›rodowisko, ktÃ³re nie byÅ‚o wyklikane, jak je teraz przemigrowaÄ‡ do IaaS'a.

**Åukasz KaÅ‚uÅ¼ny**: TÄ… czÄ™Å›Ä‡ IaaS'a zostawmy. Dobra, ale tak, czyli praktyki pipeline'owe na rynku istniejÄ…. I tak naprawdÄ™ podsumowujÄ…c, Å¼ebyÅ›cie mieli Å›wiadomoÅ›Ä‡ jak powinien wyglÄ…daÄ‡ dobry pipeline GitOpsowy, w tej tradycyjnej formie, tak naprawdÄ™ powinniÅ›my podchodziÄ‡ do tego jak do kodu, bo praktyki deweloperskie, z dbania o jakoÅ›Ä‡ powinny mieÄ‡ przeÅ‚oÅ¼enie teÅ¼ na takie flow wÅ‚aÅ›nie DevOpsowe, GitOpsowe, czyli po pierwsze repozytorium i sposÃ³b zarzÄ…dzania. PastwiliÅ›my siÄ™ nad tym, czy teÅ¼ przy mikroserwisach tak naprawdÄ™ czy jest to gitflow, czy bÄ™dzie to zamiast gitflow'a, korzystanie po prostu z monorepo i szybkich krÃ³tkich pull requestÃ³w. Decyzja naleÅ¼y do Was. Ja idÄ™ w tym zawsze w kierunku Monorepo akurat przy intrze.

**Szymon Warda**: Jeszcze masz oczywiÅ›cie trunk based development, ktÃ³ry teÅ¼ bardzo teraz nabraÅ‚ wiatru w Å¼agle.

**Åukasz KaÅ‚uÅ¼ny**: Tak, rumieÅ„cÃ³w. WiÄ™c to jest jedna czÄ™Å›Ä‡. JeÅ¼eli potem chodzi o runnery, moÅ¼ecie mieÄ‡ git laby, bitbucketowe, Bamboo, Azure, DevOps, GitHub Actions, whatever - co wybierzecie. Wszystkie z tym sÄ… tak naprawdÄ™ zgodne i rynek wykorzystuje wszystko. I to wszystko ze wszystkim siÄ™ Å‚Ä…czy, ale trzeba siÄ™ skupiÄ‡ na tym, Å¼e w CI'u - i to jest praktyka akurat cholernie pomijana - Å¼e Continuous Integration w GitOpsie i w ogÃ³le w IaaS, teÅ¼ powinien mieÄ‡ miejsce, czyli sprawdzanie, robienie linterÃ³w, byÄ‡ moÅ¼e czÄ™Å›ciowo skanowanie pod wzglÄ™dem bezpieczeÅ„stwa takiego kodu, ktÃ³ry produkujemy. JeÅ¼eli robicie terraforma. WiÄ™c takie rzeczy warto sobie w ramach Continuous Integration sprawdziÄ‡. JeÅ¼eli robicie w terraformie, najbardziej przyjemne do zaimplementowania.

**Szymon Warda**: Tak, to muszÄ™ powiedzieÄ‡, Å¼e faktycznie Terraform, jeÅ¼eli chodzi o zbiÃ³r tooli dookoÅ‚a automatyzacji, duÅ¼o ma i faktyczne, te tool'e sÄ… niezÅ‚e. A to mam pytanie w takim razie generalnie. Jakie sÄ… podejÅ›cia? MÃ³wimy o linterach. ZaÅ‚Ã³Å¼my, Å¼e niech bÄ™dzie pull request niepoprawnego lintowania. Lintujesz i poprawiasz na serwerze, czy odrzucasz PR'a? MÃ³wisz, Å¼e jest zÅ‚y? Bo sÄ… czÄ™sto dyskusje o to.

**Åukasz KaÅ‚uÅ¼ny**: Inaczej, w przypadku Infrastructure as a Code: niestety duÅ¼o z tych narzÄ™dzi i ich konfiguracji jest sterowana wciÄ™ciami, wiÄ™c odrzucam.

**Szymon Warda**: Zgadzam siÄ™: dokÅ‚adnie ta sama polityka mimo wszystko.

**Åukasz KaÅ‚uÅ¼ny**: Jest problem to, Å¼e moÅ¼emy rozjechaÄ‡... Poza tym fixowanie... Nie widziaÅ‚em jeszcze automatu, ktÃ³ry by potrafiÅ‚ zafixowaÄ‡ YAML'a.

**Szymon Warda**: YAML'a nie, ale np. takiego terraforma, generalnie gdzie wciÄ™cia nie sÄ… tak krytyczne.

**Åukasz KaÅ‚uÅ¼ny**: To inaczej: tam gdzie nie jest to krytyczne bym sobie pozwoliÅ‚ wÅ‚aÅ›nie wrzuciÄ‡ forma terra w CI'a i zrobiÄ‡ commit do tego pull request'u automatem. To jest spoko sprawa, odmÃ³Å¼dÅ¼a. Ewentualnie zostawiÅ‚bym Å›lad, Å¼e znowu zapomniaÅ‚eÅ› zrobiÄ‡ FMT przed wrzuceniem kodu.

**Szymon Warda**: Ja bym dalej nie robiÅ‚ mimo wszystko. To jest bardzo upierdliwe i za kaÅ¼dym razem wiadomo co robiÄ™ pod nosem, ale mimo wszystko generalnie robienie commita przez taki automat po drodze, gdzie jeszcze inne commity, to siÄ™ prosi aÅ¼ o jakiÅ› konflikt.

**Åukasz KaÅ‚uÅ¼ny**: No, bÄ™dziesz miaÅ‚, to jest standard... Jak zapomnisz zrobiÄ‡ fetch'a przed tym.

**Szymon Warda**: Ale taki z Å¼ycia wziÄ™ty problem, ktÃ³ry faktycznie wystÄ™puje i to sÄ… dyskusje, ktÃ³re zawsze siÄ™ pojawiajÄ… de facto jak tylko jakiegokolwiek lintera wÅ‚Ä…czymy.

**Åukasz KaÅ‚uÅ¼ny**: Dobra, czyli tak mamy CI. Co do CD to tak naprawdÄ™ jedyna praktyka, ktÃ³ra jest, bo to jest tak naprawdÄ™ puszczenie tego co chcemy wdroÅ¼yÄ‡... Jedyna praktyka, ktÃ³rÄ… widzÄ™ jest troszeczkÄ™ omijana, czyli tak jak zresztÄ… przy infrze. To teÅ¼ jest jedna rzecz przy pull requestach, ktÃ³rej nie wspomniaÅ‚em, a brakuje tego, Å¼e brakuje zazwyczaj akceptacji. Ludzie rzadko robiÄ… w przypadku infry, robiÄ… pull requesty, ktÃ³re ktoÅ›... Druga osoba sprawdzi i zaakceptuje. To jest pierwsza taka rzecz, a na continuous deploymencie rzadko ktoÅ› klika akcepta. Tylko jedna osoba rÄ™cznie wywoÅ‚uje sobie te pipeline'y, Å¼eby zdeployowaÄ‡ na wÅ‚aÅ›ciwe Å›rodowisko.

**Szymon Warda**: Powiem Ci, Å¼e mam trochÄ™ inne doÅ›wiadczenia, z reguÅ‚y jest tak, Å¼e jak widzÄ™ to jak jakaÅ› organizacja ma nazwijmy to GitOpsa w tej wersji teoretycznej myÅ›lÄ™ generalnie, Å¼e jest to po prostu kod i deployment, to z reguÅ‚y juÅ¼ te PR'y jakoÅ› Å›migajÄ…. Nie ma bardzo szerokiej adopcji, ale z reguÅ‚y jest grupa zapaleÅ„cÃ³w, ktÃ³rzy pewnie to wdroÅ¼yli. KtÃ³rzy faktycznie z tego korzystajÄ….

**Åukasz KaÅ‚uÅ¼ny**: Wiesz co, to moÅ¼e moje spaczenie? Poza finansÃ³wkÄ… tego nie widzÄ™.

**Szymon Warda**: Tylko, Å¼e ja ogÃ³lnie w finansÃ³wce siedzÄ™.

**Åukasz KaÅ‚uÅ¼ny**: Bo zazwyczaj jest potem, Å¼e w projekcie zazwyczaj na tych 10 deweloperÃ³w siedzi ten jeden DevOps i nie ma komu chÄ™tnemu zreview'owaÄ‡. To jest teÅ¼ taki problem organizacyjny, Å¼e mimo Å¼e DevOps miaÅ‚by polegaÄ‡ na holistycznoÅ›ci zespoÅ‚u i running your own shit, to takiej rzeczy nie ma rynkowo. Nie stosujemy takiego podziaÅ‚u, wiÄ™c ten DevOps robi sztuka dla sztuki pull request'y, Å¼eby co najwyÅ¼ej coÅ› przypilnowaÄ‡ i zobaczyÄ‡.

**Szymon Warda**: Czyli ten podziaÅ‚ bÄ™dzie coraz wiÄ™kszy. ÅÄ…cznej wiedzy jedna osoba nie pojmie odnoÅ›nie Kubernetesa, infrastruktury, kodu i jeszcze paru innych rzeczy. Nie ma szans.

**Åukasz KaÅ‚uÅ¼ny**: Czyli w CD to jest po prostu deployment. Dobrze sobie zrobiÄ‡ flagi po prostu do akceptacji. Jest jedna rzecz, z ktÃ³rÄ… zawsze bÄ™dÄ™ siÄ™ kÅ‚Ã³ciÅ‚, ale to jest zawsze dojrzaÅ‚oÅ›Ä‡ zespoÅ‚u, projektu, rozwiÄ…zania. Czy mamy jakieÅ› chociaÅ¼by smoke testy po wgraniu? JeÅ¼eli podchodzimy do GitOps'a to jest taki element, ktÃ³rego nie zobaczycie w tych configach i raczej nie zobaczycie w opisie tego. Ale tak naprawdÄ™ jeÅ¼eli robimy continuous deployment. Albo jak to sobie do tego podchodzimy, to trzeba pamiÄ™taÄ‡, Å¼e dobrÄ… praktykÄ… byÅ‚oby na koniec pipeline'u zrobienie tak naprawdÄ™ chociaÅ¼by smoke testa. Czy to, co postawiliÅ›my, w jakikolwiek sposÃ³b dziaÅ‚a, w szczegÃ³lnoÅ›ci jeÅ¼eli koÅ„czy siÄ™ deploymentem aplikacji.

**Szymon Warda**: Ja siÄ™ tu zaczÄ…Å‚em uÅ›miechaÄ‡ bardzo mocno, bo tu wchodzi moja miÅ‚oÅ›Ä‡ i nienawiÅ›Ä‡ do fluxa. Niestety we flux'ie zrobienie takich smoke testÃ³w jest wrÄ™cz absurdalnie trudne, a moÅ¼e jeszcze bardzo upierdliwe.

**Åukasz KaÅ‚uÅ¼ny**: Wiesz co? Za sekundkÄ™ przejdziemy sobie do fluxa, skoÅ„czmy tylko temat klasycznego GitOpsa.

**Szymon Warda**: Przez klasyczny rozumiesz pipeline'y? Dobrze.

**Åukasz KaÅ‚uÅ¼ny**: Rozdzielmy: klasyczny to jest ten pierwotny; flux, Argo, to jest nowoczesnoÅ›Ä‡ w domu i zagrodzie z CN/CF'u.

**Åukasz KaÅ‚uÅ¼ny**: I na powaÅ¼nie na koniec testy i dlatego mÃ³wiÄ™ nie caÅ‚e testy akceptacyjne i inne bo to sÄ…... wÅ‚Ã³Å¼my to sobie to miÄ™dzy bajki. MaÅ‚o ktÃ³ry projekt ma na to budÅ¼et i utrzymuje to w dobrym stanie. Ale smoke test - wywoÅ‚aj 10, 15 restÃ³w, sprawdÅº status aplikacji, endpointÃ³w, czy ona w ogÃ³le przeÅ¼yÅ‚a to, co zrobiÅ‚eÅ›.

**Szymon Warda**: I ja to rozszerzÄ™ de facto. Jak juÅ¼ mÃ³wimy o aplikacji, bo smoke testy sÄ… po. A jeÅ¼eli jeszcze mamy migracjÄ™ baz danych, ktÃ³re sÄ… przed deploymentem najczÄ™Å›ciej i to jest kolejny kawaÅ‚ek, ktÃ³ry teÅ¼ powinien byÄ‡ i ktÃ³ry teÅ¼ jest fazÄ… de facto przygotowawczÄ… w tym wszystkim. I to teÅ¼ musi byÄ‡, Å¼eby nie byÅ‚o tej opcji generalnie, Å¼e wszystko wdraÅ¼amy, ale na przykÅ‚ad jak widaÄ‡, Å¼e jak mamy bazÄ™ danych, robimy jakoÅ› semi rÄ™cznie albo wgrywamy boczkiem... To teÅ¼ jest element naszego schematu i teÅ¼ ten element musi byÄ‡ zdeployowany. Tak, tylko upewniajÄ…c siÄ™.

**Åukasz KaÅ‚uÅ¼ny**: Dobra, przejdÅºmy sobie do CNCF'owej czÄ™Å›ci Å›wiata, czyli Argo i flux. Wprowadzenie: Te dwa projekty w zeszÅ‚ym roku zostaÅ‚y... SÄ… w statusie juÅ¼ graduate, czyli uznane sÄ… za stabilne, dowiezione; oba jednoczeÅ›nie. W ramach tego, wiÄ™c sÄ… gotowe do pracy. Jak to moÅ¼na powiedzieÄ‡, duÅ¼o elementÃ³w rynkowych z nich korzysta. GdzieÅ› pod spodem Argo CD znajdziemy na przykÅ‚ad w CubeML'u, flux znajdziemy w komercyjnych produktach, biorÄ…c z naszej dziaÅ‚ki cloudowo-azure'owej. LeÅ¼y on sobie w Azure Arcu i w Azure AKS'ie, Å¼eby syncowaÄ‡ stan, jeÅ¼eli gdzieÅ› tam dogrywamy. WiÄ™c takie rzeczy sÄ… szeroko uÅ¼ywane. O tak powiem.

**Szymon Warda**: WiÄ™c z czego korzystasz?

**Åukasz KaÅ‚uÅ¼ny**: Z mojej praktyki, bo tak jak powiedzieliÅ›my, flux syncuje sobie stan do klastra jak idiota, to tak nazwijmy w sposÃ³b mniej lub bardziej...

**Szymon Warda**: To jest aplikacyjka, dokÅ‚adnie.

**Åukasz KaÅ‚uÅ¼ny**: Tak. A Argo CD syncuje sobie stan i go wpycha. Tak stara siÄ™ go wepchnÄ…Ä‡, ma UI'a. Wiesz co, tak od siebie: Argo... Nie wiem, nie mogÄ™ siÄ™ z nim pokochaÄ‡ i staram siÄ™ unikaÄ‡ jak ognia. To jest moja osobista preferencja. Przy czym nie podoba mi siÄ™ poziom skomplikowania logiki, ktÃ³ry tam wystÄ™puje. ZrobiÅ‚o siÄ™ za duÅ¼o warstw abstrakcji. Moim zdaniem duÅ¼y plus, ktÃ³ry tam jest pod spodem to jest ten UI, ktÃ³ry jest wbrew pozorom bardzo przyjemny. UI w Argo jest jedynÄ… rzeczÄ…, ktÃ³ra mnie zachÄ™ca do tego, Å¼eby go nie odrzucaÄ‡ tak naprawdÄ™.

**Szymon Warda**: To ja bym wtrÄ…ciÅ‚ siÄ™ na UI'u. Nie jest przyjemny - jest konieczny de facto. I to jest spory bÃ³l np. fluxa, Å¼e tego UI'a nie ma. Finalnie jak nawet tworzymy platformÄ™, bo to z reguÅ‚y sÄ… narzÄ™dzia, ktÃ³re sÄ… platformowe, przyjdzie jakiÅ› developer i chce wiedzieÄ‡, co jest na klastrze - we fluxie bÄ™dzie mu ciÄ™Å¼ko to sprawdziÄ‡.

**Åukasz KaÅ‚uÅ¼ny**: I teraz co do fluxa: tak, kocham. I teraz jest jedna waÅ¼na uwaga, poza maÅ‚ymi projektami na zasadzie jakaÅ› popierdÃ³Å‚ka, aplikacja czy coÅ›, nie wykorzystujÄ™ go do aplikacji, czyli ja fluxa np. ze wzglÄ™du na jego sposÃ³b dziaÅ‚ania... Odrzucam go de facto dla wiÄ™kszych aplikacji. JeÅ¼eli mam 10, 15 moduÅ‚Ã³w, to nie bÄ™dÄ™ siÄ™ kochaÅ‚ z fluxem i go nie uÅ¼ywam w tym miejscu; wolÄ™ klasyczne podejÅ›cie. To gdzie flux moim zdaniem bije na gÅ‚owÄ™ wszystko... To jest ta czÄ™Å›Ä‡ infrastrukturalna, w szczegÃ³lnoÅ›ci kiedy zrobimy z Kubernetesa usÅ‚ugÄ™ i zespÃ³Å‚ wÅ‚aÅ›nie taki platformowy, administratorski, moÅ¼e szeroko wpychaÄ‡ tak naprawdÄ™ rÃ³Å¼ne definicje, czyli przykÅ‚adowo np. syncowaÄ‡ do Kubernetesa jakieÅ› polityki automatycznie ze wspÃ³lnego repo. I takie rzeczy moÅ¼na sobie piÄ™knie wykorzystywaÄ‡ w chmurze. Czy doÅ›Ä‡ fajnie mÃ³wi o tym Mariusz z mBanku na sesji, ktÃ³rÄ… Wam podlinkujÄ™, gdzie zrobiliÅ›my tak, Å¼e kaÅ¼dy klaster, ktÃ³ry jest... i majÄ… 150 klastrÃ³w... I kaÅ¼dy z klastrÃ³w zaciÄ…ga sobie dedykowanÄ… konfiguracjÄ™, ktÃ³rÄ… oni zarzÄ…dzajÄ…, Å¼eby wymusiÄ‡ zgodnoÅ›Ä‡ i jednorodnoÅ›Ä‡.

**Szymon Warda**: UÅ¼yÅ‚eÅ› magicznego okreÅ›lenia, Å¼e nie do aplikacji. I jeÅ¼eli do samej infrastruktury: pytanie jest teraz takie: Kto w tej konfiguracji kontrybuuje tÄ™ infrastrukturÄ™? Czy zespoÅ‚y deweloperskie kontrybuujÄ…?

**Åukasz KaÅ‚uÅ¼ny**: MogÄ… kontrybuowaÄ‡, o - zrÃ³bmy sobie to w gwiazdkÄ™. MogÄ… zrobiÄ‡ pull request.

**Szymon Warda**: OK. A kto merguje?

**Åukasz KaÅ‚uÅ¼ny**: ZespÃ³Å‚ platformowy.

**Szymon Warda**: To w tej wersji bym siÄ™ jeszcze moÅ¼e zgodziÅ‚. Dla mnie to nie jest kwestia, czy to jest aplikacja, czy zespÃ³Å‚ platformowy. Ale generalnie: czy osoba, ktÃ³ra robiÅ‚a pull requesta, czy ona go merguje? Bo jeÅ¼eli osoba, ktÃ³ra robiÅ‚a pull requesta, i ona go merguje i umie sprawdziÄ‡ czy deployment poszedÅ‚, poprawnie, to flux siÄ™ jeszcze nada. MoÅ¼e, ale musimy mieÄ‡ caÅ‚y flow i caÅ‚y dashboard, ktÃ³ry bÄ™dzie mÃ³wiÅ‚, co siÄ™ wÅ‚aÅ›ciwie tam dzieje. Bo magicznoÅ›Ä‡ fluxa i to, Å¼e np. czasami moÅ¼e wejÅ›Ä‡ jakiÅ› release, ktÃ³ry siÄ™ wywali albo bÄ™dzie jakiÅ› lock, albo bÄ™dziecie cokolwiek siÄ™ dziaÅ‚o. ProblemÃ³w tu jest de facto od groma, albo bÄ™dziemy korzystali z jakiegoÅ› customize'a, ktÃ³ry coÅ› nie zaaplikuje, albo bÄ™dzie gdziekolwiek bÅ‚Ä…d. TrochÄ™ listujÄ™ tych problemÃ³w, bo ich doÅ›Ä‡ duÅ¼o napotkaliÅ›my juÅ¼. Sorry, to w tym momencie staje siÄ™ to obce, Å¼e wszyscy muszÄ… mieÄ‡ dostÄ™p de facto do KubeCTL'a i muszÄ… umieÄ‡ debugowaÄ‡, i pamiÄ™taÄ‡, jak debugowaÄ‡. I tutaj flux pada totalnie na twarz. I dlatego o ile z fluxa doÅ›Ä‡ duÅ¼o korzystam. Ja bym siÄ™ skÅ‚aniaÅ‚ zdecydowanie w ogÃ³le do tego standardowego procesu. Jak nazwaÄ‡ klasycznym? Jest duÅ¼o bardziej przejrzysty, ma inny problem. Å»e GitOps spotyka takiego GitOpsa w formie fluxa albo Argo - jest taka, Å¼e Å‚atwiej jest ludziom zrobiÄ‡ commita na repo.

**Szymon Warda**: Mniej siÄ™ tego bojÄ…. RobiÄ‡ commita na repo i robiÄ‡ merga danego pull requesta i to siÄ™ automatycznie zdeployuje, ale juÅ¼ zrobienie tego samego de facto, czyli klikniÄ™cia. Albo generalnie w jakimÅ› narzÄ™dziu do CD deploymentu to juÅ¼ jest duÅ¼o wiÄ™ksza obawa, Å¼e o Jezu, Jezu, coÅ› siÄ™ stanie, bo mogÄ™ coÅ› wywaliÄ‡. JeÅ¼eli zaczniemy tÄ… automatyzacjÄ™. PoprawnÄ…, Å¼e pipeline siÄ™ odpala sam i po prostu Å›miga. Nie widzÄ™ wartoÅ›ci czy widzÄ™ maÅ‚Ä… bardzo wartoÅ›Ä‡. Nawet na infrastrukturze. Usuwamy magiÄ™, ale wiemy co siÄ™ w jakiej kolejnoÅ›ci dzieje.

**Åukasz KaÅ‚uÅ¼ny**: Wiesz, to zaleÅ¼y od skali. To ja np. fluxa w takiej duÅ¼ej skali platformowej... Dla mnie jest ok, jeÅ¼eli dostarczysz platformÄ™ gdzie masz duÅ¼o rÃ³Å¼nych komponentÃ³w. To jest tak naprawdÄ™ jedyna moÅ¼liwoÅ›Ä‡ autoscale deployowania tego i patrzenia w stan dogrywania komponentÃ³w, zmiany konfiguracji szeroko. BiorÄ…c na przykÅ‚ad prostÄ… rzecz jakÄ… sÄ… rego policy, ktÃ³re mÃ³wiÄ… Ci jakie rzeczy moÅ¼esz na klastrze deployowaÄ‡ i karmienie tymi definicjami gatekeepera np.

**Szymon Warda**: Tu problem majÄ… taki de facto. Å»eby dowiedzieÄ‡ siÄ™  - bo w teorii: tak, jak najbardziej. To w ogÃ³le pomysÅ‚ brzmi idealnie. Problem jest taki jak siÄ™ na fluxie zacznÄ… jakieÅ› problemy, albo - w sensie na deploymencie fluxa - jak siÄ™ zacznÄ… problemy to potem zakÅ‚adamy, Å¼e na danym klastrze jest ta polityka, ona siÄ™ juÅ¼ zadziaÅ‚a generalnie, jest skonfigurowana. Okazuje siÄ™, Å¼e siÄ™ coÅ› wywaliÅ‚a przy deploymencie i nagle wchodzi, Å¼e ona na klastrze jednak nie zadziaÅ‚aÅ‚a, a nie wiemy tego do koÅ„ca.

**Åukasz KaÅ‚uÅ¼ny**: Od tego sÄ… stagingi, wchodzenie po kolei na Å›rodowiska i inne rzeczy. To nie jest tak, Å¼e commit do repo na twarz i lecimy na caÅ‚Ä… infrÄ™. WiÄ™c trzeba pamiÄ™taÄ‡, Å¼e reszta praktyk nadal obowiÄ…zuje.

**Szymon Warda**: Zgadzam siÄ™, ale mieliÅ›my sytuacjÄ™, np. Å¼e kubernetes siÄ™ blokowaÅ‚ na jakimÅ› zasobie, nie mogÄ… usunÄ…Ä‡ i przez to nagle caÅ‚y helm release stawaÅ‚ i tak dalej. Takie maÅ‚e problemy gdzie nie oszukujmy siÄ™, te klastry czÄ™sto juÅ¼ majÄ… tyle zaleÅ¼noÅ›ci i tyle konfiguracji, tyle zasobÃ³w, Å¼e tego po prostu jest duÅ¼o. I tak, jeÅ¼eli chodzi o jakoÅ›Ä‡ tego kodu, jeÅ¼eli chodzi o to, Å¼eby stagingowaÄ‡ same zmiany, czy bÅ‚Ä…d wynika z samego naszego kodu. ZgodzÄ™ siÄ™ jak najbardziej, moÅ¼na zmniejszyÄ‡ skalÄ™. I sÅ‚uszna uwaga, staging obowiÄ…zuje. Problem jest taki na tych zasobach.

**Åukasz KaÅ‚uÅ¼ny**: Druga rzecz, ktÃ³rÄ… powiedziaÅ‚eÅ›, tutaj siÄ™ z TobÄ… mocno nie zgodzÄ™. JeÅ¼eli robisz platformÄ™ to te zaleÅ¼noÅ›ci - np. z takim fluxem - to wpychasz tak naprawdÄ™ caÅ‚y config infrastrukturalny to jest jedna czÄ™Å›Ä‡. Druga rzecz lecisz z szablonu. Tak naprawdÄ™ kod infrastrukturalny nie powinien siÄ™ spotykaÄ‡ w mojej opinii z tÄ… czÄ™Å›ciÄ…, ktÃ³ra jest aplikacyjna. Czyli one powinny byÄ‡ od siebie na zasadzie czÄ™Å›Ä‡ aplikacyjna nie moÅ¼e trafiÄ‡ do namespace'Ã³w, gdzie sÄ… rzeczy systemowe. JeÅ¼eli coÅ› Ci siÄ™ rozjedzie w takim codebasie, to zazwyczaj daÅ‚eÅ› dupy na wczeÅ›niejszych Å›rodowiskach.

**Szymon Warda**: Tu siÄ™ zgodzÄ™. Nawet na samym kodzie platformowym duÅ¼o rzadziej to jest bez dwÃ³ch zdaÅ„; zdarzajÄ… siÄ™ jakieÅ› rozjazdy, zdarzajÄ… siÄ™... Na przykÅ‚ad mieliÅ›my swego czasu case, Å¼e z jakiegoÅ› powodu robiliÅ›my rename namespace'Ã³w nie przenoszenie miÄ™dzy namespace'ami, maÅ‚y refaktoring - z jakiegoÅ› powodu zablokowaÅ‚ siÄ™, Å¼e tego namespace'a nie moÅ¼e usunÄ…Ä‡ i on sobie wisiaÅ‚ 3 dni. Generalnie powiedziaÅ‚, Å¼e juÅ¼ go za 3 dni usunie. No i flux deployment siÄ™ udaÅ‚. Wszystko szÅ‚o Å‚adnie, kolorowo, dopiero stan udaÅ‚o siÄ™ odpaliÄ‡ na samym klastrze, gdzie to, Å¼e nie masz tej pÄ™tli zwrotnej, Å¼e potwierdzenia. Tak, udaÅ‚ siÄ™ - to sobie sprawdÅº. No nie, ok. Tylko, Å¼e de facto flux jako taki nie daje tego narzÄ™dzia de facto. On zaciÄ…ga konfiguracjÄ™ - ciÄ™Å¼ko jest zrobiÄ‡ coÅ›, o czym powiedziaÅ‚eÅ›, te smoke testy na koniec; Å¼e nie wiemy kiedy flux skoÅ„czyÅ‚ to deployowaÄ‡, kiedy to siÄ™ udaÅ‚o, Å¼e moÅ¼emy odpaliÄ‡ jakieÅ› smoke testy. ObejÅ›cia jakie wokÃ³Å‚ tego sÄ… to jest deployment jakiegoÅ› poda, ktÃ³ry zacznie to wykonywaÄ‡ de facto i on nam wrÃ³ci. Ale de facto w tym momencie zaczynamy budowaÄ‡ wÅ‚asnego UI'a.

**Szymon Warda**: To ogarnia strukturÄ™ tego klastra. Tu nie widzÄ™ zwrotu z tej inwestycji po prostu.

**Åukasz KaÅ‚uÅ¼ny**: Ewentualnie drugÄ… rzeczÄ… jest wysyÅ‚anie sobie - tylko to jest juÅ¼ kombinacja - wysyÅ‚anie wiebhookÃ³w i caÅ‚a ich obsÅ‚uga. I widzÄ™ TwojÄ…... Å»aÅ‚ujcie, Å¼e nie moÅ¼ecie zobaczyÄ‡ miny Szymona. MÃ³wi ona, Å¼e prÃ³bowaÅ‚ i siÄ™ nie zabiÅ‚.

**Szymon Warda**: MoÅ¼na robiÄ‡. Tylko ja siÄ™ zapytam po co, skoro de facto to samo uzyskamy pipeline'ym, zwykÅ‚ym githubowym, devOpsowym itd. BÄ™dziemy mieli dokÅ‚adnie ten sam flow. Czyli majÄ…c fajne narzÄ™dzie pod tytuÅ‚em flux - wÅ‚aÅ›nie na fluxa wylewam czarÄ™ goryczy, bo on jest najbardziej taki skrajny pod tym wzglÄ™dem. Redeployujemy i reodtwarzamy normalnego pipeline'a w CD tylko po to, Å¼eby mÃ³c powiedzieÄ‡, Å¼e uÅ¼ywamy fluxa. Nie ma to wiÄ™kszego sensu, a co wiÄ™cej bÄ™dziemy teÅ¼ mieli takie sytuacje, Å¼e nagle... PoniewaÅ¼ mamy fluxa, to nagle musimy caÅ‚y software maturity lifecycle, czyli ten cykl dojrzaÅ‚oÅ›ci o ktÃ³rej powiedziaÅ‚eÅ›, Å¼e powinna byÄ‡, bo powinna jak najbardziej byÄ‡. OdtworzyÄ‡ jak najbardziej na repo bitowym, zamiast odtworzyÄ‡ na pipeline'ach, Å¼e jeden siÄ™ odpala, akceptacja; potem moÅ¼esz odpaliÄ‡ kolejny i kolejny, kolejny. I nagle w Gicie jak ktoÅ›, kto siÄ™ decyduje na trunk based development. Musimy kombinowaÄ‡ jak mieÄ‡... Odzwierciedlenie nie tylko Å›rodowisk, ale teÅ¼ dojrzaÅ‚oÅ›ci tego Å›rodowiska. Jak je zrobiÄ‡? I tu mamy taki... tworzy nam siÄ™ macierz katalogÃ³w, branÅ¼y, tagÃ³w i kombinujemy jak to w ogÃ³le zaimplementowaÄ‡.

**Szymon Warda**: I nam Å›mieci to strasznie w gicie. Nie ma tu wartoÅ›ci dla mnie, po prostu, uÅ¼ywamy narzÄ™dzia, Å¼eby tylko go uÅ¼ywaÄ‡, bo jest fajne i bÅ‚yszczy.

**Åukasz KaÅ‚uÅ¼ny**: Dobra, to przejdÅºmy sobie do zrobienia, wÅ‚aÅ›nie czy hit czy kit, bo czÄ™Å›ciowo to wydaÅ‚eÅ›. Dobra, ja pÃ³jdÄ™ taki klasyczny gitops w rozumieniu pipeline'Ã³w. W rozumieniu mamy: repo, mamy CI/CD. Korzystamy z IaaS'a czy innych tool'i. Super sprawa raczej czy hit - nie, to powinna byÄ‡ normalnoÅ›Ä‡.

**Szymon Warda**: To teÅ¼ chciaÅ‚em powiedzieÄ‡. Generalnie to jest standard, bez tego siÄ™ nie da funkcjonowaÄ‡.

**Åukasz KaÅ‚uÅ¼ny**: Dobra co do rzeczywistoÅ›ci by CNCF. OgÃ³lnie moje pierwsze wraÅ¼enie jest jak jest z service meshami, czyli to jest kit. To jest tak, czyli na papierze wszystko fajnie. PrzechodzÄ…c do praktyki, byÄ‡ moÅ¼e tego nie potrzebujesz i podejÅ›cie takie, jeÅ¼eli z mojej perspektywy: jeÅ¼eli ktoÅ› Ci tego Argo utrzymuje na zasadzie dajÄ™ Ci z setupem, Å¼e musisz tylko setup do niego wepchnÄ…Ä‡, nie musisz go utrzymywaÄ‡. Jest nawet spoko.

**Szymon Warda**: Czyli jeÅ¼eli nie jesteÅ› tym zespoÅ‚em, ktÃ³ry to utrzymuje, z Åukaszowego na ludzkie.

**Åukasz KaÅ‚uÅ¼ny**: DokÅ‚adnie tak, popatrzmy, bo moÅ¼e ktoÅ› juÅ¼ Ci da z dobrodziejstwem inwentarza gotowe Argo. Tak jak chociaÅ¼by w CubeML'u. Å»e juÅ¼ przychodzi zsetupowane, upgrade'uje siÄ™ siÄ™ w ramach upgrade'Ã³w i innych zabawek. JeÅ¼eli chodzi o fluxa. JeÅ¼eli masz popierdÃ³Å‚kÄ™. To nie jest to zÅ‚e, jeÅ¼eli masz popierdÃ³Å‚kÄ™.

**Szymon Warda**: Ale to w tym momencie powiedziaÅ‚eÅ›, Å¼e jeÅ¼eli masz maÅ‚y system to uÅ¼yj fajnego narzÄ™dzia, ktÃ³re Ci to skomplikuje. PowiedziaÅ‚eÅ›, Å¼e masz popierdÃ³Å‚kÄ™... Jaki bÄ™dzie czas teraz czas do skonfigurowania pipeline'a, ktÃ³ry bÄ™dzie to robiÅ‚? VS skonfigurowanie fluxa, ktÃ³ry bÄ™dzie to robiÅ‚. Pipeline bÄ™dzie szybszy po prostu.

**Åukasz KaÅ‚uÅ¼ny**: Wiesz co... inaczej. JeÅ¼eli umiesz, to czy to, to jest czas taki sam.

**Szymon Warda**: BÄ™dziesz miaÅ‚ trochÄ™ zabawy z konfiguracjÄ… flux'a.

**Åukasz KaÅ‚uÅ¼ny**: Dobra jest jedna rzecz... SÅ‚uchajcie, to w ogÃ³le na oddzielny odcinek - o ktÃ³rej zapomnieliÅ›my - I to jest kit akurat GitOpsa, obydwu podejÅ›Ä‡, co z secretami. Dlatego ja Å›wiadomie nie wyciÄ…gaÅ‚em tego, bo jest trochÄ™ w tym wszystkim zabawy. Luk security, ktÃ³re sÄ… i czy klasyczne podejÅ›cie, o ktÃ³rym mÃ³wiliÅ›my na poczÄ…tku, czy te CNCF'owe, Kubernetesowe. KaÅ¼de ma ciekawe dziury po drodze. JeÅ¼eli chodzi o poÅ›wiadczenia.

**Szymon Warda**: Tu siÄ™ nie zgodzimy moÅ¼e nawet. Chodzi Ci o to, Å¼e trzymanie sekretÃ³w w repo jest problematyczne.

**Åukasz KaÅ‚uÅ¼ny**: Inaczej, sposÃ³b w jaki je dostarczamy, gdzie je trzymamy, jak je potem przekazujemy.

**Szymon Warda**: To o ile... juÅ¼ chyba nawet nad tym wylewaliÅ›my czarÄ™ goryczy swego czasu... secrety, absolutnie nigdy w Å¼yciu z tego nigdy nie korzystaÄ‡. To jest jedna wielka poraÅ¼ka. To mogÄ™ powiedzieÄ‡, Å¼e po ponad roku z Å¼ycia z Mozilla SOPS'em. Nie zauwaÅ¼am ich praktycznie w ogÃ³le. NaprawdÄ™. W tej wersji moÅ¼emy to otrzymaÄ‡ i to jest w porzÄ…dku. Problem zaczyna siÄ™ generalnie, gdybyÅ›my musieli te secrety trzymaÄ‡ caÅ‚kowicie w jakimÅ› Key Vaulcie, wtedy synchronizacja tych deploymentÃ³w robi siÄ™ upierdliwa. Dalej... DajÄ™ radÄ™ z tym Å¼yÄ‡ jak najbardziej.

**Åukasz KaÅ‚uÅ¼ny**: Dobra, to zrobimy sobie oddzielny odcinek. Jak zarzÄ…dzaÄ‡ secretami? Czyli tak. Czyli podsumowujÄ…c - klasyczny GitOps. OK, stosujcie. A do fluxa i ArgoCD podejdÅºcie na poczÄ…tek jak do kitu, majÄ…c Å›wiadomoÅ›Ä‡.

**Szymon Warda**: Jedna bardzo waÅ¼na uwaga Å¼ebyÅ›my dorzucili, bo my caÅ‚y czas mÃ³wiliÅ›my o czÄ™Å›ci platformowej, a w podsumowaniu tego nie mÃ³wimy, to jest w platformowej. Natomiast w czÄ™Å›ci aplikacyjnej absolutnie zwykÅ‚y Pipeline, nic wiÄ™cej tam musi byÄ‡... Czemu? Bo mamy migracjÄ™ baz danych, mamy healthchecki, mamy interesy testÃ³w i mamy masÄ™ rzeczy, ktÃ³re siÄ™ dzieje po. Mamy np. WybÃ³r baz danych, jak to wyglÄ…da przed, ktÃ³re bÄ™dÄ… deployowane itd. Z czego bÄ™dziemy odtwarzali. WiÄ™c w tym flow aplikacyjnym? Nie. Å»aden flux, Å¼adne Argo, sorry Gregory, to po prostu siÄ™ nie sprawdza. U Ciebie, jakie zdanie?

**Åukasz KaÅ‚uÅ¼ny**: Klasyczne. Tutaj tak: wolÄ™ zrobiÄ‡ klasycznego. Z fluxem moÅ¼na rzeÅºbiÄ‡, ale robisz... Czy ArgoCD, nagle robisz logikÄ™ np. w helmie, gdzie ja nienawidzÄ™ robiÄ‡ tak naprawdÄ™ czegokolwiek pod tym wzglÄ™dem i uÅ¼ywaÄ‡ helma do rzeczy in-house jeÅ¼eli nie sÄ… produktem i naprawdÄ™ powtarzalne.

**Szymon Warda**: To jednak mimo wszystko zgoda na sam koniec. Dobrze.

**Åukasz KaÅ‚uÅ¼ny**: To trzymajcie siÄ™!

**Szymon Warda**: Na razie, Hej.

**Åukasz KaÅ‚uÅ¼ny**: Hej!

