---
title: '#22 Observability - Distributed tracing
'
date: 2020-02-14T08:00:00+02:00
episode: "22"
tags: []
description: ""

# Jekyll compatibility fields (zachowane dla innych systemÃ³w)  
spreaker: 22745792
apple: "Nie ma Apple ID w tym odcinku"
spotify: "https://open.spotify.com/episode/Nie ma Spotify ID w tym odcinku"
youtube: ""

# Hugo fields  
youtube_id: "Nie ma YouTube ID w tym odcinku"
youtube_url: "https://www.youtube.com/embed/Nie ma YouTube ID w tym odcinku?enablejsapi=1"

# Social media images (poprawione nazwy)
og_landscape: "/img/22-landscape.webp"
og_square: "/img/22-square.webp"

# Intro for episode
intro: |
  Distributed tracing, czyli ostatni filar observability. NiektÃ³rzy uwaÅ¼ajÄ… to za crÃ¨me de la crÃ¨me caÅ‚ego **observability**.
  

# Links for the episode
links:
  - title: "Dapper, a Large-Scale Distributed Systems Tracing Infrastructure"
    url: "https://research.google/pubs/pub36356/"
  - title: "OpenTelemetry"
    url: "https://opentelemetry.io/"
  - title: "OpenCensus"
    url: "https://opencensus.io/"
  - title: "Zipkin"
    url: "https://zipkin.io/"
  - title: "Understanding Observability"
    url: "https://sdarchitect.blog/2020/01/08/understanding-observability/"
  - title: "#kubecon EU schedule and the program chairs selected very few Istio and Knative related talks"
    url: "https://twitter.com/mattklein123/status/1222740823843856384"
  - title: "AWS X-Ray"
    url: "https://aws.amazon.com/xray/"
  - title: "Google Cloud Stackdriver Trace"
    url: "https://cloud.google.com/trace"
  - title: "OpenTracing"
    url: "https://opentracing.io/"
  - title: "Application Insights"
    url: "https://docs.microsoft.com/en-us/azure/azure-monitor/app/distributed-tracing"
  - title: "Jaeger"
    url: "https://www.jaegertracing.io/"
  - title: "The Architecture of a Large-Scale Web Search Engine, circa 2019"
    url: "https://www.0x65.dev/blog/2019-12-14/the-architecture-of-a-large-scale-web-search-engine-circa-2019.html"
  - title: "UserVoice"
    url: "https://github.com/patoarchitekci/uservoice/issues"

# Newsletter content (zachowane dla kompatybilnoÅ›ci)
newsletter: |
  CzeÅ›Ä‡! ğŸ‘‹ âœ¨
  
  Distributed tracing, czyli ostatni filar observability. NiektÃ³rzy uwaÅ¼ajÄ… to za crÃ¨me de la crÃ¨me caÅ‚ego **observability**.
  
  
  
  
  ## Odcinek na stronie i materiaÅ‚y do niego â¬‡ï¸
  
  â¡ï¸ [OdsÅ‚uchaj na stronie](https://patoarchitekci.io/22)
  â¡ï¸ [Spotify](https://open.spotify.com/episode/Nie ma Spotify ID w tym odcinku)
  â¡ï¸ [Apple Podcasts](Nie ma Apple ID w tym odcinku)
  â¡ï¸ [YouTube](#)
  
  ## Short & Sweet
  

  ### ğŸ¤ DoÅ‚Ä…cz do Discord ğŸ‘‰ [https://discord.gg/78zPcEaP22](https://discord.gg/78zPcEaP22)
  
  ### ğŸ¢ Patron odcinka
  SÅ‚uchasz PatoarchitektÃ³w dziÄ™ki PROTOPII â€“ firmie, w ktÃ³rej Åukasz i Szymon dziaÅ‚ajÄ… na co dzieÅ„, wspierajÄ…c zespoÅ‚y IT na kaÅ¼dym etapie: od projektowania, przez wdroÅ¼enia i migracje, aÅ¼ po optymalizacjÄ™ i zabezpieczenia. Oferujemy teÅ¼ mentoring i szkolenia dostosowane do potrzeb kaÅ¼dej firmy, niezaleÅ¼nie od wielkoÅ›ci. SprawdÅº nas: [protopia.tech](https://protopia.tech/)
  
  PS. Masz pytania? Pisz Å›miaÅ‚o po drugiej stronie to nie bot na bazie GPT czy Claude ğŸ˜
---

**Szymon:** CzeÅ›Ä‡! SÅ‚uchacie Pato ArchitektÃ³w. ProwadzÄ… Szymon Wardaâ€¦

**Åukasz:**â€¦i Åukasz KaÅ‚uÅ¼ny. Wszystkie linki do tego odcinka znajdziecie na patoarchitekci.io/22 Dobra
Szymonie, to co z linkÃ³w?

**S:**To ja mam dÅ‚ugi wpis, taki konkretny. Jest to ciekawa historia w ogÃ³le rozwoju usÅ‚ugi â€“ Cliqz â€“ tak
siÄ™ chyba to wymawia. I wpis jest naprawdÄ™ ciekawy. Czemu? Po pierwsze zaczyna siÄ™ od rysu
historycznego, czyli jaki mieli problem biznesowy, od ktÃ³rego momentu zaczynali, itd. A potem
przechodzÄ… praktycznie w caÅ‚oÅ›ciowy opis ich stack word architektonicznego Å‚Ä…cznie z wyborami
czemu i nawet z takimi rzeczami jak caÅ‚y stack do ML, wyszukiwania, itd. Co jest dla mnie ciekawe to
praktycznie jest takie przejÅ›cie od problemu do rozwiÄ…zania, wiÄ™c widzimy ewolucjÄ™ caÅ‚ego
rozwiÄ…zania, widzimy decyzje ktÃ³re zapadÅ‚y i do czego doprowadziÅ‚y. Fajne podsumowanie, duÅ¼o
linkÃ³w dalej prowadzÄ…cych. Dla mnie osobiÅ›cie fajnie napisany artykuÅ‚, jakby ktoÅ› chciaÅ‚ faktycznie
udokumentowaÄ‡ swojÄ… architekturÄ™. Do przeczytania teÅ¼ faktycznie ciekawe.

**Å:** Dla mnie jak patrzÄ™ tam na jeden zlog tego co uÅ¼ywajÄ… to jakbym widziaÅ‚ grafikÄ™ z **CNCF**, tyle majÄ…
tego stosu.

**S:** Tak. Stos jest naprawdÄ™ duÅ¼y i opisujÄ… tego teÅ¼ sporo.

**Å:** Jakby popatrzeÄ‡ to tak rzucajÄ…c patrzÄ™ Consul, Kafka, Cassandra, etcd, widzÄ™ Flager'a tutaj, jeÅ¼eli
dobrze patrzÄ™ na logo, Argo, Prometheus, Core DNS. Tak naprawdÄ™ taki czysty Cloud Native Style stos
jeÅ¼eli popatrzylibyÅ›my z definicji aktualnie latajÄ…cych.

**S:** Tak. I co wiÄ™cej to jest opis tak naprawdÄ™ peÅ‚nego Stacku. To nie jest maÅ‚y wycinek, wiÄ™c tam kaÅ¼dy
znajdzie kawaÅ‚ek dla siebie. Wpis jest dÅ‚ugi, chyba zgodzisz siÄ™.

**Å:** Tak. Jest duÅ¼y. SÄ… przykÅ‚ady nawet, kawaÅ‚ki rbackÃ³w, skryptÃ³w pythonowych ktÃ³rych uÅ¼ywajÄ… w
niektÃ³rych miejscach, wiÄ™c jest doÅ›Ä‡ wyczerpujÄ…co o ich, jak sami to okreÅ›lili, drodze do
mikroserwisÃ³w Kubernetesa oraz tego co powyÅ¼ej.

**S:** Tak. A u Ciebie znowu skrajnoÅ›Ä‡ inna.

**Å:** Tak. Szymon, wybraÅ‚eÅ› dÅ‚uÅ¼szy. Ja mam Tweeta na temat Kubecon europejskiego, ktÃ³ry nadchodzi
i bÄ™dzie niedÅ‚ugo pod koniec kwietnia bodajÅ¼e. Albo marca? NiewaÅ¼ne. NajwaÅ¼niejsze, Å¼e pokazaÅ‚a siÄ™
agenda i wyglÄ…da na bardzo ciekawÄ… rzecz, poniewaÅ¼ nie bÄ™dzie istio, nie bÄ™dzie talkÃ³w o Istio ani o
Knative.

**S:**: Uuuâ€¦

**Å:** WÅ‚aÅ›nie. Jest to bardzo podsumowujÄ…cy tweet, Å¼e: â€ Nie doÅ‚Ä…czasz do fundacji? Koniec darmowych
przejaÅ¼dÅ¼ek". CNC przestaje promowaÄ‡ technologie, ktÃ³re nie doÅ‚Ä…czajÄ….

**S:** W takim razie moÅ¼e zobaczymy wiÄ™kszÄ… adopcjÄ™ Linkerd.

**Å:** Tak. Po sesjach widaÄ‡ tam , wiÄ™c pewnie bÄ™dzie o Linkerd 2, a moÅ¼e o Consulu, bo on gdzieÅ› tam
jest obok. Trzeba wiedzieÄ‡, Å¼e jeÅ¼eli chodzi o Istio i Knative, to w sumie w Google'u, bo oni siÄ™
wypowiedzieli, nie oszukujmy siÄ™, majÄ… wiÄ™kszoÅ›Ä‡ w radach tych projektÃ³w, Å¼e nie oddajÄ… tego, nie
planujÄ… aktualnie oddawaÄ‡ tego do **CNCF**.

**S:** Ja siÄ™ z tego cieszÄ™, bo wÅ‚aÅ›ciwie obecnie stan powiedzmy hype'u jest taki, Å¼e o Istio sÅ‚yszy siÄ™ duÅ¼o
wiÄ™cej niÅ¼ o alternatywnych meshach. WiÄ™c taka dobra konkurencja tu siÄ™ jak najbardziej przyda. 

**Å:** Raczej tak, tylko teraz patrzÄ…c z mentalnoÅ›ci, coraz czÄ™Å›ciej patrzymy Å¼eby mieÄ‡ ten caÅ‚y ekosystem
**CNCF**, i ludzie mogÄ… patrzeÄ‡ na to, Å¼e te Istio no jednak nie weÅºmiemy, bo tam Linkerd jest. TeÅ¼ w
pewnym momencie moÅ¼e byÄ‡ taka zagwozdka.

**S:** DokÅ‚adnie. Linkerd teÅ¼ powinien byÄ‡ jak najbardziej rozwaÅ¼any, bo jest bardzo przyjemnym
meshem, duÅ¼o Å‚atwiejszym niÅ¼ Istio.

**Å:** Dobra, to teraz przejdÅºmy do tematu dzisiejszego odcinka. PowtarzajÄ…c, kontynuujemy
**Observability**.

**S:** Tak. Trzeci filar.

**Å:** Trzeci filar. Jakie sÄ… dwa jeszcze wczeÅ›niejsze o ktÃ³rych nagrywaliÅ›my Szymonie?

**S:** OczywiÅ›cie logi i **metryki**.

**Å:** Tak. I o nich moÅ¼na posÅ‚uchaÄ‡ wczeÅ›niej. A dziÅ› zajmiemy siÄ™ tracingiem , a dokÅ‚adniej distributed
tracingiem, bo o to chodzi w **observability**. I jakbyÅ› mÃ³gÅ‚ Szymonie w dwÃ³ch zdaniach powiedzieÄ‡,
czym jest tracing.

**S:** To teraz ze strony open tracing jest metodÄ… wykorzystywanÄ… do profilowania i monitorowania
aplikacji, szczegÃ³lnie w architekturach mikroserwisowych.

**Å:** Dobra. To nawet nie brzmi jak definicja w Å¼aden sposÃ³b.

**S:** To nie brzmi jak definicja i widaÄ‡, Å¼e trochÄ™ brakuje definicji. Brakuje pomysÅ‚u jak nazwaÄ‡ i
powiedzieÄ‡, czym jest tracing. Dla mnie to jest moÅ¼liwoÅ›Ä‡ wglÄ…du w to jak przebiegajÄ… procesy w
aplikacji. Tyle tak naprawdÄ™.

**Å:** Tak. NiektÃ³rzy kojarzÄ… tracing tak naprawdÄ™ z najwyÅ¼szego trybu logowania w swoim kodzie.

**S:** Tak. TeÅ¼ moÅ¼e byÄ‡. Nieeâ€¦.Ustalmy!

**Å:** To nie o to chodzi. Dobra. To moÅ¼e zacznijmy od historii, bo to bÄ™dzie juÅ¼ dziesiÄ™Ä‡ lat praktycznie,
sama definicja skÄ…d takiego pierwszego publicznego hype'u to zaczyna mieÄ‡ dziesiÄ™Ä‡ lat, sama idea.

**S:** Tak.

**Å:** To jakbyÅ› powiedziaÅ‚, od czego to siÄ™ zaczÄ™Å‚o. Od jakiej publikacji.

**S:** ZaczÄ™Å‚o siÄ™ od Dapper, a Large-Scale Distributed Systems Tracing Infrastructure. Od Google'a. Jak
to czÄ™sto bywa z papierami od Google'a , takie ogÃ³lne pojÄ™cia, to potem one znajdujÄ… jakÄ…Å›
implementacjÄ™. ImplementacjÄ… pierwszÄ…, ktÃ³rÄ… siÄ™ uznaje, ktÃ³rÄ… oficjalnie wiemy jest Zipkin. 2012 rok
wydane przez Twitter'a. Obecnie on jest zgodny z caÅ‚Ä… zasadÄ… **OpenTracing**. Potem 2016 rok â€“ cztery
lata przerwy, pojawia siÄ™ **Jaeger** od Ubera. Obecnie jest to projekt **CNCF**, teÅ¼ zgodny ze standardem
**OpenTracing**. Sam **OpenTracing** jako taki jest zdefiniowany w 2016 roku, doÅ‚Ä…cza do **CNCF**. Potem
pojawia siÄ™ **OpenCensus** w 2018 roku od Google'a, oczywiÅ›cie alternatywa.

**Å:** Ale i teÅ¼ Microsoftu. To jest wÅ‚aÅ›nie bardzo ciekawe.

**S:** Tak.

**Å:** to byÅ‚a opozycja do **OpenTracing** wydawana przez Google'a i Microsoft. To jest bardzo ciekawe w
tym miejscu.

**S:** Tak. Ciekawe poÅ‚Ä…czenie, dzieje siÄ™. To siÄ™ potem zamieniÅ‚o w **OpenTelemetry** w 2019 roku.
PoÅ‚Ä…czyÅ‚o siÄ™ to razem z **OpenCensus**. Obecnie **OpenTelemetry** jest chyba w Becie, tak?

**Å:** Dochodzi do Bety.

**S:** Tak.

**Å:** Specyfikacja dochodzi do Bety, przy czym tam stos jÄ™zykowy jest naprawdÄ™ masywny, bo
wspierane sÄ… od strony specyfikacji bibliotek implementacyjnych do tego. Tak naprawdÄ™ mamy
wspierany caÅ‚y stos, Å¼e tak powiem, korporacyjnych jÄ™zykÃ³w, ich hype-driven, jak niektÃ³rzy okreÅ›lajÄ….

**S:** Tak, bo w sumie Tracing nabraÅ‚ wiatru w 2018 roku. Od tego momentu sÅ‚ychaÄ‡ o nim doÅ›Ä‡ duÅ¼o.
Jest na konferencjach obecnie widoczny.

**Å:**Tak. To moÅ¼esz patrzeÄ‡ z drugiej strony â€“ projekty SaaS na przykÅ‚ad, o ktÃ³rych bÄ™dziemy potem
wspominali, implementujÄ… to juÅ¼ dÅ‚uÅ¼ej. SamÄ… ideÄ™ Distributed Tracingu juÅ¼ o dawien dawna.

**S:** Chodzi mi bardziej o **OpenTracing** jako o standard. ZaczÄ™to o tym sÅ‚yszeÄ‡ i tak juÅ¼ siÄ™ cementuje,
mimo, Å¼e to stara idea.

**Å:** Tak. W 2018 to byÅ‚o na rynku, gdzie moÅ¼na to byÅ‚o zobaczyÄ‡ jakoÅ› bardziej.

**S:** DokÅ‚adnie. Co jest waÅ¼ne tutaj, to **OpenTelemetry** nie jest standardem w rozumieniu sÅ‚owa, jak
mamy standard akceptowany, jest bardziej takim implementowalnym zestawem interfejsÃ³w i
kontraktÃ³w.

**Å:** Tak, tylko Å¼e patrzÄ…c do czego to dÄ…Å¼y, to stanie siÄ™ standardem.

**S:** Tak. To bÄ™dzie taka niechÄ™Ä‡ **CNCF** do nazywania go standardem.

**Å:** Oni to bardzo Å‚adnie nazywajÄ… â€specyfikacjÄ…".

**S:** DokÅ‚adnie tak.

**Å:** To jest ich nazwa. Dobra. To moÅ¼e teraz przejdÅºmy przez pojÄ™cia, bo przy tracingu jest trochÄ™ z
mojej perspektywy mind fuckÃ³w, ktÃ³re siÄ™ znajdujÄ….

**S:** Jest.

**Å:** To zacznijmy od takiego podstawowego pojÄ™cia w Å›rodku, czyli **trace**.

**S:** To **trace** jest acyklicznym grafem **spanÃ³w**.

**Å:** Dobra! Teraz przegiÄ…Å‚eÅ› zdecydowanie Dobra. WeÅºmy sobie to wytÅ‚umaczmy, bo **trace** jest tak
naprawdÄ™ zbiorem informacji.

**S:** Tak, dokÅ‚adnie.

**Å:** jeÅ¼eli to uproÅ›cimy jest na temat pojedynczej, kompleksowej transakcji w naszym systemie.

**S:** Pojedynczych informacji â€“ tak bym to nazywaÅ‚. I te pojedyncze informacje nazywane sÄ… spamem.
L: Dobra, to czym jest ten **span**, bo teraz zaczyna siÄ™ miÄ™cho.

**S:** Tak. Tutaj znowu brakuje nam trochÄ™ nazewnictwa. WidaÄ‡, Å¼e nie ubiÅ‚o siÄ™ tak dokÅ‚adnie. Jest to
pojedynczy log â€“ raport aplikacji o jednym kroku wykonania. I co jest waÅ¼ne, bo niejako ten **span** jest
definiowany przez to co on zawiera, bo zawiera takie kluczowe elementy. Pierwszym jest **trace ID**. I 
czym on jest? Jest to globalny i unikalny identyfikator caÅ‚ego procesu, nie tylko pojedynczej relacji,
tylko caÅ‚ego procesu. Od startu on zostaje taki sam.

**Å:** Czyli powiedzmy sobie wprost, w zaleÅ¼noÅ›ci gdzie zaczynamy robiÄ‡ nasz distributed tracing, on
moÅ¼e byÄ‡ juÅ¼ wygenerowany na front-endzie, albo gdzieÅ› na pierwszym API gateway'u na pierwszym
mikroserwisie, serwisie do ktÃ³rego uderzamy.

**S:** DokÅ‚adnie tak. Potem lecimy **span ID**, i to jest unikalny identyfikator naszej operacji. Pojedynczej.
Potem mamy nazwÄ™, Å¼eby to moÅ¼na byÅ‚o odczytaÄ‡ po ludzku. Potem mamy czas startu i czas koÅ„ca,
bo **span** jest mocno umiejscowiony w czasie. Potem mamy jeszcze okreÅ›lenie relacji do innych
**spanÃ³w**.

**Å:** W szczegÃ³lnoÅ›ci, Å¼e patrzÄ…c siÄ™ na wywoÅ‚ania, te **spany** mogÄ… byÄ‡â€¦ z jednej na przykÅ‚ad procedury
w kodzie moÅ¼emy zapisaÄ‡ kilka takich **trace'Ã³w** **spanÃ³w**.

**S:** Jak najbardziej tak. To jest generalnie caÅ‚a sztuka jak schodziÄ‡ nisko i co de facto â€logowaÄ‡", to
chyba bÄ™dzie odpowiednie sÅ‚owo w tym momencie. Bo jak juÅ¼ mÃ³wimy o **spanach**, to **spany** mogÄ…
mieÄ‡ dwa typy relacji miÄ™dzy sobÄ…. Jedna to jest **ChildOf** i kolejna to jest **FollowsFrom**.

**Å:** **FollowsFrom**. Zacznijmy od **ChildOf**, bo on jest prostszy.

**S:** Jest zdecydowanie duÅ¼o Å‚atwiejszy i Å‚atwiej go zrozumieÄ‡. I teraz na przykÅ‚adzie mamy
synchroniczne wywoÅ‚anie po http. WiÄ™c w kodzie woÅ‚ajÄ…cym robimy **spana**, gdzie zaczynamy request
i skoÅ„czymy jak ten request otrzymamy. To jest pierwszy **span**. Teraz drugi **span** jest w serwisie
odbierajÄ…cym to wywoÅ‚anie. Tam na odebraniu tego wywoÅ‚ania zaczynamy **spana**, jak wyÅ›lemy
odpowiedÅº, koÅ„czymy **spana**. I te dwa **spany** bÄ™dÄ… bardzo bliskie siebie. RÃ³Å¼nica miÄ™dzy nimi to jest
tylko ta latencja sieci po drodze.

**Å:** To opÃ³Åºnienie sieci i wywoÅ‚anie, bo **span** bÄ™dzie od tego momentu, kiedy zalogujemy to wywoÅ‚anie
u siebie, po swojej stronie.

**S:** Tak, dokÅ‚adnie. Ale teraz jaka jest miÄ™dzy nimi relacja? Ten **span** pierwszy zawiera **span** drugi tak
naprawdÄ™. Czyli **span** woÅ‚ajÄ…cego musi byÄ‡, to znaczy powinien byÄ‡ wiÄ™kszy niÅ¼ **span** woÅ‚any.

**Å:** MoÅ¼emy na to popatrzeÄ‡ jak na takiego drill down'a, Å¼e wklikujemy siÄ™, patrzymy co tam siÄ™ dziaÅ‚o
pod spodem, czasy. TrochÄ™ tak jak robimy zwykÅ‚y tracing w kodzie i patrzymy na to, jak siÄ™ po kolei
wywoÅ‚ujÄ… metody. To jest dokÅ‚adnie ten sam graficzny zapis.

**S:** Tak, mamy zwykÅ‚ego profilera, wchodzimy coraz niÅ¼ej i tak wÅ‚aÅ›nie te **trace'y** wyglÄ…dajÄ…. To samo
moÅ¼e byÄ‡ z SQL-kami, wywoÅ‚anie ORM-a, jak to siÄ™ przekÅ‚ada na pojedyncze SQL-ki. Tu jest ciekawiej,
bo jak mamy na ORM save'a wywoÅ‚ujemy, to potem mamy pojedynczego **spana** na kaÅ¼de execute
SQL. WiÄ™c dokÅ‚adnie wiemy co, ile byÅ‚o wywoÅ‚anych, wiÄ™c kaÅ¼dy **span** moÅ¼e mieÄ‡ dowolnÄ… iloÅ›Ä‡
dzieci, tak naprawdÄ™. Tu nie ma ograniczeÅ„. I moÅ¼emy dowolnie w dÃ³Å‚ schodziÄ‡. WiÄ™c jak tu widzimy
**ChildOf** jest do sygnalizacji zaleÅ¼noÅ›ci miÄ™dzy **spanami** synchronicznej.

**Å:** Ja bym jeszcze dorzuciÅ‚ jeszcze jednÄ… rzecz, z ktÃ³rej sobie tam ludzie nie zdajÄ…, Å¼e taki **span** jak
mamy logowany async/await'a, to widzimy caÅ‚oÅ›Ä‡, mamy caÅ‚y wielki **span**, mimo, Å¼e tworzyliÅ›my
sobie coÅ› Å‚adnie wyrzuciliÅ›my, czekamy.

**S:** Async jest Å‚adnym ulepszeniem na nieczekanie, a mimo wszystko ten request tam dalej, jakiÅ› wÄ…tek
bÄ™dzie na niego czekaÅ‚.

**Å:** To teraz coÅ› ciÄ™Å¼kiego â€“ **FollowsFrom**.

**S:** Tu definicja jest taka, Å¼e dziecko nie zaleÅ¼y od rodzica. PrzykÅ‚ad najprostszy: wysyÅ‚amy wiadomoÅ›Ä‡,
czyli na samym wysÅ‚aniu wiadomoÅ›ci mamy jednego **spana**, drugiego wysyÅ‚amy jak odbieramy
wiadomoÅ›Ä‡, ale te dwa **spany** bÄ™dÄ… miaÅ‚y miÄ™dzy sobÄ… dziurÄ™ czasowÄ….

**Å:** I to sporÄ…. MogÄ… mieÄ‡ czasami sporÄ… dziurÄ™ czasowÄ…, jeÅ¼eli bÄ™dÄ… jakieÅ› problemy.

**S:** Tak.

**Å:** Bo trzeba powiedzieÄ‡, Å¼e to jest do komunikacji takiej prawdziwej, synchronicznej po
wiadomoÅ›ciach, kolejkach, jakiÅ› integracjach.

**S:** DokÅ‚adnie. MÃ³wimy, Å¼e one, jak sama nazwa wskazuje, jedno nastÄ™puje po drugim, ale w czasie
niezaleÅ¼nym. To nie jest drill down, tak jak porÃ³wnaÅ‚eÅ› poprzednio.

**Å:** Dobra. To jeszcze wrÃ³Ä‡my sobie, bo powiedzieliÅ›my o relacjach **spana**, ale ten **span** oprÃ³cz tych
metadanych, o ktÃ³rych powiedziaÅ‚eÅ›, on ma jeszcze swoje bebechy, moÅ¼e mieÄ‡ bardziej szczegÃ³Å‚owe
bebechy, takie chyba bÄ™dÄ… tagi, logi i batch item. Dobrze mÃ³wiÄ™? Nie. Baggage item.

**S:** Tak.

**Å:** To moÅ¼e zacznijmy od tagÃ³w w **spanie**.

**S:** Dobrze. To jest w ogÃ³le fajne rozrÃ³Å¼nienie, bo takie rozrÃ³Å¼nienie jest w Kubernetesie. Od czego sÄ…
tagi? Zdefiniowane przez uÅ¼ytkownika adnotacje do **spanÃ³w**, ktÃ³rych celem, i to jest najwaÅ¼niejsze,
jest wyszukiwanie konkretnych **traceÃ³w**. PrzykÅ‚ad: chcemy **spany** o zapytania do SQLa, z konkretnego
systemu, dla na przykÅ‚ad konkretnego procesu biznesowego, itd. To sÄ… takie proste tagi, po ktÃ³rych
wyszukujemy, i co jest teÅ¼ bardzo waÅ¼ne, jest spisana caÅ‚a semantic conventions na stronie
**OpenTracing** w Repo GitHubowym, ona jest doÅ›Ä‡ zÅ‚oÅ¼ona, dotyczy bÅ‚Ä™dÃ³w logowanych, dotyczy jakie
sÄ… standardy przy wiadomoÅ›ciach, przy wywoÅ‚aniach http, odwoÅ‚aniach do rÃ³Å¼nych baz danych. Jest
tego sporo i warto przeczytaÄ‡, bo jest naprawdÄ™ dobrze napisane.

**Å:** Znaczy ten **semantic conventions** tak naprawdÄ™ powoduje, Å¼e nie musimy myÅ›leÄ‡ i nazywaÄ‡ czegoÅ›,
tylko jest na to zestaw takiego standardowego podejÅ›cia.

**S:** Tak. Co jest waÅ¼ne: wiÄ™kszoÅ›Ä‡ bibliotek ma od razu constrainy wbudowane na te nazwy, wiÄ™c nie
trzeba siÄ™ tym martwiÄ‡, wiÄ™c Å¼eby tam magicznych stringÃ³w nie wklepywaÄ‡.

**Å:** Tak. MoÅ¼na polecieÄ‡ enumem i tyle.

**S:** Tak. Kolejne elementy to sÄ… logi. O co chodzi z logami? Z logami chodzi o to, Å¼e w tym momencie
do konkretnego trace'u umieszczamy konkretne wpisy, takie typowo logowe, z tÄ… rÃ³Å¼nicÄ… Å¼e ten wpis
jest umiejscowiony na konkretny moment w czasie, bo **span** jest przedziaÅ‚em tak naprawdÄ™, a log
bÄ™dzie, Å¼e w tym **spanie**, w tym momencie, wystÄ…piÅ‚ ten log. WiÄ™c daje nam konfirmacjÄ™, Å¼e nie
musimy korelowaÄ‡ jak szaleni, tylko mamy to w jednym miejscu, Å‚adnie umiejscowione.

**Å:** Przy czym teÅ¼ trzeba popatrzeÄ‡ na te logi, Å¼e to nie bÄ™dzie full text search, to nie bÄ™dÄ… logi z takiej
definicji, o ktÃ³rej mÃ³wiliÅ›my we wczeÅ›niejszych odcinkach.

**S:** Absolutnie nie. To sÄ… takie bardziej informacje, Å¼e coÅ› siÄ™ wydarzyÅ‚o, to powinno byÄ‡ proste. Nie
rzucajmy do systemÃ³w tracing zbyt duÅ¼o informacji.

**Å:** Ja ze swojego przykÅ‚adu staram siÄ™ w ogÃ³le omijaÄ‡ te logi, jeÅ¼eli ich nie potrzeba. NiektÃ³re
rozwiÄ…zania takie jak service meshup prÃ³bujÄ… nawet tam caÅ‚e body wrzuciÄ‡. Ja nie wiem, osobiÅ›cie
nie kupujÄ™ tej informacji. On rzadko jest aÅ¼ tak bardzo wartoÅ›ciowy.

**S:** Ja teÅ¼ nie wrzucaÅ‚bym tam zbyt duÅ¼o informacji. Tym bardziej, Å¼e bÄ™dziemy mÃ³wili o tym w
podsumowaniu, to z iloÅ›ciÄ… informacji trzeba uwaÅ¼aÄ‡, bo ona roÅ›nie naprawdÄ™ szybko przy tracingu.

**Å:** Dobra, teraz ostatni element.

**S:** Baggage items. I o co z nimi chodzi? To jest zestaw klucz-wartoÅ›Ä‡, jak w sumie prawie kaÅ¼de
poprzednie. One Å¼yjÄ… w **spanie** i to jest kontekst informacji ktÃ³ry jest przekazywany miÄ™dzy kaÅ¼dym
kolejnym **spanem**. Czyli ogÃ³lne informacje biznesowe, Å¼e uÅ¼ytkownik tam zaczÄ…Å‚ proces, co siÄ™ dziaÅ‚o,
itd. Czyli takie informacje kopiowane do **spana**, do **spana**, do **spana**.
**Å:** I zazwyczaj generowane przy pierwszym starcie rozpoczÄ™cia tracingu.

**S:** CzÄ™Å›Ä‡ tak. Na przykÅ‚ad takie rzeczy typu na przykÅ‚ad **SpanId**, **TraceId**. Jak uÅ¼ytkownika zalogujemy,
to mamy jego nazwÄ™ i w tym momencie moÅ¼emy to rozszerzaÄ‡ na przykÅ‚ad. PrzyjÄ™Å‚o siÄ™ faktycznie, Å¼e
ta baggage items przekopiowujemy miÄ™dzy kolejnymi. Nie jest to wymuszone, jest to mocno zalecane
przez standard.

**Å:** Dobra. To mamy teoriÄ™. To moÅ¼e jÄ… podsumujmy. CaÅ‚oÅ›Ä‡ takiego procesu nazywamy **tracem**.

**S:** Tak.

**Å:** JeÅ¼eli popatrzymy, to do niego sÄ… zapiÄ™te **spany**. Czyli **trace** to jest tak naprawdÄ™ zbiÃ³r **spanÃ³w**.

**S:** Acykliczny zbiÃ³r **spanÃ³w**, dokÅ‚adnie.

**Å:** GrafÃ³w, jak to powiedziaÅ‚eÅ›. Czyli tak naprawdÄ™ poÅ‚Ä…czony ze sobÄ… zestaw **spanÃ³w**. I dla kaÅ¼dego
**spanu** moÅ¼na zrobiÄ‡ doszczegÃ³Å‚owienie kolejnymi **spanami**, czyli tak jak w profilingu powiedzieliÅ›my,
schodzimy w gÅ‚Ä…b do pewnego momentu. NastÄ™pnie, jeÅ¼eli popatrzymy, to kaÅ¼dy **span** bÄ™dzie miaÅ‚
swoje podstawowe informacje.

**S:** Tak.

**Å:** To bÄ™dzie **trace**, same czasy start â€“ stop, relacje do rodzica, oprÃ³cz tego przypadku, kiedy mamy
asynchronicznÄ… komunikacjÄ™. I na koniec logi i tagi nie sÄ… obowiÄ…zkowe, przy czymâ€¦

**S:** Tagi wskazane sÄ… bardzo mocno.

**Å:** Tak. SÄ… nieobowiÄ…zkowe, jeÅ¼eli popatrzymy na implementacje tracingowe.

**S:** Tak.

**Å:** Z mojej perspektywy tagi sÄ… obowiÄ…zkowe do uÅ¼ywania bardzo czÄ™sto.

**S:** Znaczy, poruszanie siÄ™ po **traceach** bez tagÃ³w jest nierealne. Z mojego doÅ›wiadczenia to musi byÄ‡. I
ich bÄ™dzie przybywaÅ‚o razem z czasem.

**Å:** NajproÅ›ciej siÄ™ po nich wyszukuje. To co powiedzieliÅ›my, Å¼e nie robimy fulltech searchÃ³w na jakimÅ›
logu, to nie jest rozwiÄ…zanie.

**S:** Nie zrobimy tam fulltech searcha.

**Å:** Dobra. MieliÅ›my teoriÄ™, teraz przejdÅºmy do praktyki. Jak to technicznie dziaÅ‚a?

**S:** Bardzo prosto. W http przyjÄ™Å‚o siÄ™, nawet service meshe teÅ¼ tak robiÄ…, Å¼e po prostu sÄ…
odpowiednie http header'y. Proste. Wystarczy na przykÅ‚ad w Isio je przekopiowywaÄ‡ i wszystko
dziaÅ‚a. W messageingu to samo: mamy albo metadane albo mamy headery, dodawne jest i
przekopiowywane. WiÄ™kszoÅ›Ä‡ bibliotek ktÃ³re sÄ… do na przykÅ‚ad mass transitaâ€¦ SÄ… odpowiednie 
biblioteki ktÃ³re przekopiowujÄ…, odpowiednio wstawiajÄ… kontekst wywoÅ‚ania i to po prostu dziaÅ‚a
bardzo Å‚adnie.

**Å:** Tak. I teraz najciekawsze pytanie z mojej perspektywy. W ktÃ³rym miejscu zbieramy to jak
budujemy taki tracing?

**S:** W kodzie aplikacji. Tutaj magii nie ma, trzeba jednak zmieniÄ‡ trochÄ™ aplikacjÄ™, zainicjalizowaÄ‡,
potrzebujemy tych tagÃ³w, potrzebujemy kontekstu. MoÅ¼emy robiÄ‡ takÄ… magiÄ™ jakÄ… robi **Application Insights**, o czym bÄ™dziemy mÃ³wili. To ,Å¼e na przykÅ‚ad wpinamy siÄ™ w wysyÅ‚anie SQL commandÃ³w, itd.
Ale mimo wszystko to siÄ™ skoÅ„czy na tym, Å¼e bÄ™dzie modyfikacja aplikacji. **Application Insights** wpina
siÄ™ jako proces debugujÄ…cy niejako i dziÄ™ki temu to ma. Ale jak chcemy coÅ› wiÄ™cej, bÄ™dzie to kod
aplikacji.

**Å:** Druga rzecz, nazwijmy jÄ… infrastrukturÄ… naszej aplikacji. Czyli sÄ… to jakieÅ› reverse proxy, ktÃ³re mamy
na wejÅ›ciach przed aplikacjami, niektÃ³rzy to wykorzystujÄ… bÄ…dÅº service meshe, ktÃ³re obiecujÄ… ten
distributed tracing z pudeÅ‚ka, bez naszej duÅ¼ej ingerencji.

**S:** DokÅ‚adnie. MoÅ¼e nieduÅ¼ej, ale pamiÄ™tajmy, Å¼e service meshe operujÄ… na http, wywoÅ‚aÅ„ do SQLa
nam juÅ¼ nie zmonitorujÄ…, wiÄ™c przydaÅ‚oby siÄ™. Jednak musimy te headery i z wiadomoÅ›ci
przekopiowaÄ‡.

**Å:** Dlatego uÅ¼ywam tego sÅ‚owa â€obiecujÄ…".

**S:** SÅ‚usznie.

**Å:** ZwiÄ™kszam naszÄ… Å›wiadomoÅ›Ä‡. Dobra. Zobaczmy co mamy teraz, bo tego aÅ¼ tak duÅ¼o nie ma jak
sobie popatrzymy na popularne rzeczy. Co mamy dostÄ™pne?

**S:** ZaczÄ™Å‚o siÄ™ od **Zipkina**. I ja bym powiedziaÅ‚, Å¼e wyszedÅ‚ dwa lata temu i faktycznie dyskusja czy
Zipikin czy **Jaeger** byÅ‚a aktualna, jak siÄ™ przygotowywaliÅ›my do tego odcinka, no to Å¼aden z nas nie
widziaÅ‚ systemu, ktÃ³ry by faktycznie uÅ¼ywaÅ‚ **Zipkin'a**. Wszyscy uÅ¼ywajÄ… Jagera.

**Å:** Tak. Albo przeszli na **Jaegera**.

**S:** Tak, dokÅ‚adnie. Tak wiÄ™c **Jaeger** napisany w go od Ubera. Co jest w nim ciekawego? Ciekawe jest w
nim to, Å¼e ma rÃ³Å¼ne storages. MoÅ¼e byÄ‡ **Cassandra**, **Elastic**, **Kafka** i **InMemory**. Ja osobiÅ›cie
korzystaÅ‚em z **Elastica** i daje rade, jest spoko.

**Å:** Chyba tak, bo jeÅ›li ktoÅ› pÃ³jdzie potem kompleksowo jak mÃ³wiliÅ›my, to tak naprawdÄ™ Elasticiem
moÅ¼e obgoniÄ‡ dwa problemy. JednÄ… kompetencjÄ… moÅ¼e obgoniÄ‡ dwa problemy.

**S:** Tak i co jest fajne jeszcze to Grafana umoÅ¼liwia odpytywanie siÄ™ Elastica i wyciÄ…ganie z tego
metryk. A w sumie nasze **trace'y** majÄ… **metryki**, wiÄ™c moÅ¼emy mieÄ‡ detaliczny widok pojedynczych
requestÃ³w w formie **trace'a**, ale zagregowany widok dla metryk i statystyk.

**Å:** Tak, ale przejedziemy siÄ™ w szczegÃ³lnoÅ›ci jak nasz system roÅ›nie, nie wolno siÄ™ przyzwyczajaÄ‡ do
tego, Å¼e tam sÄ… **metryki**.

**S:** Tak, to siÄ™ teÅ¼ zgadza.

**Å:** Dobra. W sumie to jest to i SaaS'y, ktÃ³re sÄ… najwygodniejsze, bo jeÅ¼eli sobie popatrzymy na to
mamy open-source'owo **Jaegera**, gdzieÅ› tam sobie byÅ‚ Zipkin, ale wiÄ™kszoÅ›Ä‡ jest w formie SaaSowej.

**S:** I nie ma siÄ™ co dziwiÄ‡, bo SaaS'y odwalajÄ… kawaÅ‚ dobrej roboty. W **Application Insights** â€“ super
usÅ‚uga!

**Å:** To jest od Microsoftu w ramach Azure'a , wiÄ™c to warto dodaÄ‡.

**S:** Tak. W ramach Azure'a, gÅ‚Ã³wnie dla **dotnetu**, ale jest teÅ¼ dla **Node'a**, jest teÅ¼ dla **Javy**.

**Å:** Jest teÅ¼ dla Golanga. Teraz Microsoft dorobiÅ‚ do tego Forwarder po prostu, Å¼e moÅ¼na z
**OpenCesus'a** z Golanga wysÅ‚aÄ‡ na Forwarder w tym formacie i on to sobie juÅ¼ przekaÅ¼e i zrozumie.
Microsoft bierze udziaÅ‚ w budowie tych specyfikacji, wiÄ™c natywnie bÄ™dzie to teÅ¼ obsÅ‚ugiwaÅ‚.

**S:** Tak, i co jest fajne, to tam jest minimalny prÃ³g instalacji, wiÄ™c to siÄ™ wÅ‚Ä…cza bÅ‚yskawicznie.

**Å:** Przepraszam, Szymon. W Dotnecie jest minimalny prÃ³g instalacji.

**S:** W **Node** teÅ¼ jest bardzo Å‚atwo.

**Å:** Ale tam trzeba popatrzeÄ‡ potem na biblioteki i takie inne rzeczy. Nie zawsze wszystko dobrze
dziaÅ‚a.

**S:** Tak. KolejnoÅ›Ä‡, itd. Takie triki.

**Å:** Tak. KolejnoÅ›Ä‡ w szczegÃ³lnoÅ›ci, Server Side jest jednak w **Node**. Trzeba mieÄ‡ tam Å›wiadomoÅ›Ä‡ z tyÅ‚u
gÅ‚owy, w ktÃ³rym momencie zainicjalizowaÄ‡ ten Application.

**S:** Zgadza siÄ™, jak najbardziej. WalczyÅ‚em z tym.

**Å:** No wÅ‚aÅ›nie. WiÄ™c aÅ¼ tak bajecznie nie jest.

**S:** Tak.

**Å:** Ale jest juÅ¼ udokumentowane.

**S:** Tak. Jest **Dynatrace**.

**Å:** I oni teÅ¼ siÄ™ udzielajÄ… przy specyfikacji, tej najnowszej. To chyba warto dodaÄ‡. I to jest niezaleÅ¼na
platforma, czyli to jest niezaleÅ¼ny SaaS.

**S:** DokÅ‚adnie. Od Google'a jestâ€¦

**Å:**â€¦\***Stack Driver Trace,** zerknÄ™ w notatkÄ™. Tak. Czyli tak samo jest odpowiednik **Application Insights**
nastawiony przez Google'a.

**S:** I na koÅ„cu AWS.

**Å:** AWS ma swojego **X-ray'a**. Z nim miaÅ‚em akurat najmniej do czynienia, jeÅ¼eli chodzi o **X-ray'a**.

**S:** TeÅ¼ nie miaÅ‚em, parÄ™ razy o nim czytaÅ‚em, ale tu siÄ™ teÅ¼ faktycznie nie wypowiem. Dobrze. Dobre
praktyki â€“ przydaÅ‚oby siÄ™ jakieÅ› podsumowanie.

**Å:** Chyba najwaÅ¼niejszÄ… jest, o czym wspominaÅ‚em przy Twoich metrykach, Å¼e nie zrzucamy
wszystkiego potem.

**S:** Sampling jest krytyczny.

**Å:** Tak.

**S:** Å»eby daÄ‡ skalÄ™. DuÅ¼e organizacje zbierajÄ… tysiÄ™czne czÄ™Å›ci procenta i to im siÄ™ przekÅ‚ada na
dziesiÄ…tki gigabajtÃ³w dziennie. Sampling jest krytyczny. Co jest bardzo fajne â€“ wiÄ™kszoÅ›Ä‡ z narzÄ™dzi
ma doÅ›Ä‡ sporo samplerÃ³w: statystycznych, probabilistycznych, o rÃ³Å¼nym rozkÅ‚adzie, itd. WiÄ™c
dodanie tego samplingu jest bardzo, bardzo proste.

**Å:** Ewentualnie tak jak niektÃ³rzy â€“ bardzo krÃ³tka referencja.

**S:** Tak teÅ¼ moÅ¼na. Zgadza siÄ™.

**Å:** NiektÃ³rzy trzymajÄ… **trace'y** tylko jeden dzieÅ„.

**S:** PowiedziaÅ‚bym, Å¼e dla mnie trochÄ™ za krÃ³tko.

**Å:** Tak, ale sÄ… niektÃ³rzy, co traktujÄ… je jako bieÅ¼Ä…ce sprawdzanie do szybkiej diagnostyki.

**S:** MoÅ¼e byÄ‡.

**Å:** Gdzie siÄ™ zaczÄ™Å‚o nam coÅ› sypaÄ‡, Å¼eby znaleÅºÄ‡ szczegÃ³Å‚y. WiÄ™c albo sampling albo bardzo krÃ³tkie
retencje.

**S:** Tak. To co juÅ¼ wspominaÅ‚em, to Å¼e na bazie naszych **trace'Ã³w** moÅ¼emy zbudowaÄ‡ **metryki**.

**Å:** JuÅ¼ bardzo szczegÃ³Å‚owe **metryki**.

**S:** SzczegÃ³Å‚owe â€“ tak, schodzÄ…ce na poziom detalu ale widzÄ…c zagregowany widok naszego systemu,
zagregowane czasy. To jest bardzo uÅ¼yteczne, bo nie dublujemy kodu.

**Å:** Tak. Potem przejdziemy, to jest bardzo istotne. MoÅ¼emy **trace'a** poÅ‚Ä…czyÄ‡ z procesem biznesowym.

**S:** Nawet wskazane, bym powiedziaÅ‚.

**Å:** Tak. Jest to wskazane. Teraz bardzo istotna rzecz: powinniÅ›my to zrobiÄ‡ w tagach jako adnotacjÄ™ i
id procesu, tylko te kluczowe informacje, ktÃ³re pomogÄ… nam Å¼yÄ‡, nie wszystko.

**S:** Tak, bo naprawdÄ™ one bÄ™dÄ… puchnÄ…Ä‡ i to sÄ… typy wyszukiwania, gdzie warto Å¼eby wpisy byÅ‚y doÅ›Ä‡
niewielkie.

**Å:** Kolejny punkt bÄ™dzie istotny dla Ciebie.

**S:** Tak. Tracing jest techniczny. I czemu to jest waÅ¼ne? Tracing niejako pokazuje nam, w ktÃ³rym
momencie jest proces biznesowy. BÅ‚agam, nie wystawiajmy tego do biznesu, bo jak biznes zobaczy te
wykresy Gantt'a, to bÄ™dziemy mieli maÅ‚y problem. Nie, to jest coÅ› technicznego, co umoÅ¼liwia nam
debugowanie, sprawdzenie, zobaczenie gdzie mamy dziury, zobaczenie co moÅ¼emy zoptymalizowaÄ‡,
gdzie jest wartoÅ›Ä‡, jak nasz system siÄ™ zachowuje. NIE do wystawiania dla biznesu. Tyle.

**Å:** Dobra. Teraz kontekst i to jest chyba tak jak w caÅ‚ym **observability** umieszczaliÅ›my to, kontekst jest
bardzo waÅ¼ny, czyli w tagach tak naprawdÄ™ w caÅ‚ym **spanie** powinno siÄ™ dobrze zdefiniowaÄ‡ caÅ‚y
kontekst naszego wywoÅ‚ania: Å›rodowisko, instancjÄ™, Å¼ebyÅ›my mogli namierzyÄ‡ co tam siÄ™ dziaÅ‚o i
poÅ‚Ä…czyÄ‡ to z logami jak i z metrykami, jeÅ¼eli tego potrzebujemy.

**S:** Tak, i ja tu jeszcze raz odeÅ›lÄ™ do tego linku w kontekÅ›cie konwencji a propos tagÃ³w dla **spanÃ³w**.
Tam jest naprawdÄ™ dobrze opisane to, co jest uÅ¼ywane, jakie sÄ… standardy, co powinno byÄ‡. Dobry
punkt wyjÅ›cia. Bardzo!

**Å:** Ostatnie, w sumie prawie ostatnie: optymalizacje wydajnoÅ›ci.

**S:** I tak. Czemu warto jest mieÄ‡ tracing? To jest fenomenalne spojrzenie generalnie gdzie w systemie
jesteÅ›my, no bo odpalenie lokalne, Å¼e coÅ› dziaÅ‚a wolno â€“ ok , interesuje nas jak to bÄ™dzie siÄ™
zachowywaÅ‚o w globalnym scopie na jakimÅ› serwerze. Nie naszym lokalnym. I to zbieranie tych
metryk i tych tracÃ³w dla mnie osobiÅ›cie jest krytyczne, Å¼eby po prostu wiedzieÄ‡, co w ogÃ³le system
robi.

**Å:** Czy da siÄ™ po nichâ€¦to tak jak z profilingiem. Da siÄ™ szczegÃ³Å‚owo zobaczyÄ‡, w ktÃ³rym momencie ten
nasz dÅ‚ugi request ssie.

**S:** Tak. Nie proszÄ…c siÄ™ o podpiÄ™cie Profiler'a do aplikacji na produkcji. To powinno byÄ‡ absolutnie
zabronione.

**Å:** No dobra. Sami robiliÅ›my takie rzeczy, wiÄ™c nie ma sensu. Czasami jest najproÅ›ciej.

**S:** Trzeba zabroniÄ‡, ale ewentualnie sÄ… wyjÄ…tki.

**Å:** Tak. Pokazuje nam dokÅ‚adnie czarne dziury w naszym systemie, w szczegÃ³lnoÅ›ci przy
mikroserwisach. JeÅ¼eli ktoÅ› idzie lub idzie jeszcze niÅ¼ej i robi nanoserwisy, to moÅ¼na, pomaga nam
znaleÅºÄ‡ czarne dziury.

**S:** Czarne dziury i przede wszystkim przerwy, gdzie przerywa, dlaczego nasz proces biznesowy trwa
tak dÅ‚ugo, bo mamy dziurÄ™ na ileÅ› wiadomoÅ›ci, nie skalujemy siÄ™ poprawnie.

**S:** Czas na podsumowanie. SaaS'y sÄ… tutaj super. PrÃ³g wejÅ›cia â€“ minimalny, duÅ¼a wartoÅ›Ä‡ â€“ mogÄ… byÄ‡ drogie.

**Å:** Raczej tak. Tutaj trzeba byÄ‡ Å›wiadomym, bo pÅ‚acimy za gigabajty danych w SaaS'ach. Za te
wchodzÄ…ce gigabajty, przechowywane teÅ¼, ale bolÄ… nas te wchodzÄ…ce. SaaS'y sÄ… okej, w szczegÃ³lnoÅ›ci
Å¼e majÄ… ten prÃ³g wejÅ›cia tak jak dla mnie te **Application Insights** przy Dotnecie: â€kliknij prawym,
dodajâ€¦"

**S:** Tym bardziej, Å¼e teÅ¼ doÅ›Ä‡ czÄ™sto siÄ™ integrujÄ… z usÅ‚ugami faktycznymi, sÄ… bardziej dokÅ‚adne tracy na
wejÅ›ciu. CzÄ™sto nie musimy go na wejÅ›ciu do aplikacji wÅ‚Ä…czaÄ‡. To jest teÅ¼ fajne.

**Å:** Czyli po pierwsze, jeÅ¼eli moÅ¼esz, bo to teÅ¼ dodajmy, nie wszystkie branÅ¼e, sektory mogÄ… sobie na to
pozwoliÄ‡ aktualnie, bo jest rÃ³Å¼ne podejÅ›cie do tego. WiÄ™c SaaS'y sÄ… naprawdÄ™ genialne by zaczÄ…Ä‡.
Cena moÅ¼e zabiÄ‡, ale wartoÅ›Ä‡ teÅ¼ moÅ¼e byÄ‡ duÅ¼a. Na starcie w szczegÃ³lnoÅ›ci, kiedy siÄ™ zaczyna.
Dobra. NastÄ™pnie?

**S:** Tracing dla mnie czÄ™sto jak rozmawiam z ludÅºmi to jest na zasadzie: â€fajnie by byÅ‚o mieÄ‡". Jak siÄ™
sprÃ³buje raz juÅ¼ systemu z tracingiem, to juÅ¼ siÄ™ nie wraca. Tak samo jak raz siÄ™ uÅ¼yÅ‚o Kibany z
Elasticiem, to potem juÅ¼ nie chce siÄ™ remote'owaÄ‡ na maszyny i przeglÄ…daÄ‡ pliki logÃ³w z wielu
maszyn.

**Å:** Nie lubiÄ™ Kibany jako takiej, wiÄ™c bym siÄ™ z tym nie zgodziÅ‚.

**S:** Cokolwiek innego generalnie. Nie chcesz siÄ™ remote'owaÄ‡ do dwudziestu maszyn

**Å:** Tak, pomaga. Distributed tracing, jeÅ¼eli go mamy, pomaga w szczegÃ³lnoÅ›ci jeÅ¼eli przechodzimy
dalej do tego koniecznego samplingu.

**S:** Zdecydowanie.

**Å:** Tak, bo jeÅ¼eli coÅ› siÄ™ dzieje z systemem, zwalnia cokolwiek, to moÅ¼emy na jakiÅ› czas wyÅ‚Ä…czyÄ‡ ten
sampling i wrzuciÄ‡ wszystko. Trzeba pamiÄ™taÄ‡, Å¼e sampling jest konieczny, ale w sytuacjach, kiedy
trzeba zrobiÄ‡ trouble shooting, moÅ¼na przeÅ‚Ä…czyÄ‡ wajchÄ™ i go przerzuciÄ‡.

**S:** MoÅ¼na. Najbardziej polecam ten probabilistyczny. On faktycznie dba o dobry rozkÅ‚ad, nie pomija
zbyt wolnych requestÃ³w, itd. NaprawdÄ™ jest caÅ‚a sekcja dokumentacyjna do przeczytania. Dobra.
Chyba tyle.

**Å:** No to na razie!

**S:** Na razie!
