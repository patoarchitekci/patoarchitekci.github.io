---
title: '#23 Docker A.D. 2020
'
date: 2020-02-28T08:00:00+02:00
episode: "23"
tags: []
description: ""

# Jekyll compatibility fields (zachowane dla innych systemÃ³w)  
spreaker: 23277203
apple: "Brak platform URLs w pliku"
spotify: "https://open.spotify.com/episode/Brak platform URLs w pliku"
youtube: ""

# Hugo fields  
youtube_id: "Brak platform URLs w pliku"
youtube_url: "https://www.youtube.com/embed/Brak platform URLs w pliku?enablejsapi=1"

# Social media images (poprawione nazwy)
og_landscape: "/img/23-landscape.webp"
og_square: "/img/23-square.webp"

# Intro for episode
intro: |
  Kontenery... kontenery... kontenery..., czyli co sÅ‚ychaÄ‡ w Docker na 2020!
  

# Links for the episode
links:
  - title: "Rootless Containers"
    url: "https://rootlesscontaine.rs/"
  - title: "Clair"
    url: "https://github.com/quay/clair"
  - title: "distroless"
    url: "https://github.com/GoogleContainerTools/distroless"
  - title: "containerd"
    url: "https://containerd.io/"
  - title: "Harbor"
    url: "https://goharbor.io/"
  - title: "Twistlock"
    url: "https://www.twistlock.com/"
  - title: "Aqua Security"
    url: "https://www.aquasec.com/"
  - title: "cri-o.io"
    url: "https://cri-o.io/"
  - title: "Firecracker"
    url: "https://firecracker-microvm.github.io/"
  - title: "Kata Containers"
    url: "https://katacontainers.io/"
  - title: "An Illustrated Guide to OAuth and OpenID Connect"
    url: "https://developer.okta.com/blog/2019/10/21/illustrated-guide-to-oauth-and-oidc"
  - title: "Aqua Security microscanner"
    url: "https://github.com/aquasecurity/microscanner"
  - title: "podman"
    url: "https://podman.io/"
  - title: "Facebook"
    url: "https://www.facebook.com/patoarchitekci/"
  - title: "Why Every Element of SOLID is Wrong"
    url: "https://speakerdeck.com/tastapod/why-every-element-of-solid-is-wrong"
  - title: "Run the Docker daemon as a non-root user (Rootless mode)"
    url: "https://docs.docker.com/engine/security/rootless/"
  - title: "VMware Project Pacific"
    url: "https://www.vmware.com/products/vsphere/projectpacific.html"
  - title: "Twitter"
    url: "https://twitter.com/patoarchitekci"
  - title: "Aqua Security Trivy"
    url: "https://github.com/aquasecurity/trivy"
  - title: "Open Container Initiative"
    url: "https://www.opencontainers.org/"
  - title: "Distroless Docker images"
    url: "https://www.thoughtworks.com/radar/techniques/distroless-docker-images"
  - title: "Mirantis Acquires Docker Enterprise"
    url: "https://thenewstack.io/mirantis-acquires-docker-enterprise/"
  - title: "Anchore Engine"
    url: "https://anchore.com/opensource/"
  - title: "What is the essence of the Moby project and why did moby / moby suddenly become the main Docker repository?"
    url: "https://sudonull.com/post/70431-What-is-the-essence-of-the-Moby-project-and-why-did-moby-moby-suddenly-become-the-main-Docker-reposi"
  - title: "UserVoice"
    url: "https://github.com/patoarchitekci/uservoice/issues"

# Newsletter content (zachowane dla kompatybilnoÅ›ci)
newsletter: |
  CzeÅ›Ä‡! ğŸ‘‹ âœ¨
  
  Kontenery... kontenery... kontenery..., czyli co sÅ‚ychaÄ‡ w Docker na 2020!
  
  
  
  
  ## Odcinek na stronie i materiaÅ‚y do niego â¬‡ï¸
  
  â¡ï¸ [OdsÅ‚uchaj na stronie](https://patoarchitekci.io/23)
  â¡ï¸ [Spotify](https://open.spotify.com/episode/Brak platform URLs w pliku)
  â¡ï¸ [Apple Podcasts](Brak platform URLs w pliku)
  â¡ï¸ [YouTube](#)
  
  ## Short & Sweet
  

  ### ğŸ¤ DoÅ‚Ä…cz do Discord ğŸ‘‰ [https://discord.gg/78zPcEaP22](https://discord.gg/78zPcEaP22)
  
  ### ğŸ¢ Patron odcinka
  SÅ‚uchasz PatoarchitektÃ³w dziÄ™ki PROTOPII â€“ firmie, w ktÃ³rej Åukasz i Szymon dziaÅ‚ajÄ… na co dzieÅ„, wspierajÄ…c zespoÅ‚y IT na kaÅ¼dym etapie: od projektowania, przez wdroÅ¼enia i migracje, aÅ¼ po optymalizacjÄ™ i zabezpieczenia. Oferujemy teÅ¼ mentoring i szkolenia dostosowane do potrzeb kaÅ¼dej firmy, niezaleÅ¼nie od wielkoÅ›ci. SprawdÅº nas: [protopia.tech](https://protopia.tech/)
  
  PS. Masz pytania? Pisz Å›miaÅ‚o po drugiej stronie to nie bot na bazie GPT czy Claude ğŸ˜
---

**Åukasz:** CzeÅ›Ä‡! SÅ‚uchacie Pato ArchitektÃ³w. ProwadzÄ… Åukasz KaÅ‚uÅ¼ny

**Szymon:** i Szymon Warda. Wszystkie linki do tego odcinka znajdziecie na patoarchitektci.io/23. OczywiÅ›cie teraz teÅ¼ na Facebooku, Twitterze.

**Å:** Tak. Mamy profil rÃ³wnieÅ¼ na Facebooku oprÃ³cz Twittera, gdzie bÄ™dziecie mogli znaleÅºÄ‡ nasze wrzuty.

**S:** Dobrze. To w takim razie linki. Åukaszu â€“ co u Ciebie?

**Å:** Trolling alboâ€¦

**S:** O dziwo.

**Å:** Albo coÅ› dla Å›wiadomego podejÅ›cia, [czyli czemu kaÅ¼dy element Solida jest zÅ‚y](https://speakerdeck.com/tastapod/why-every-element-of-solid-is-wrong).

**S:** Tak. SÅ‚ynna prezentacja Dana North'a.

**Å:** Tak, jest doÅ›Ä‡ stara, ma juÅ¼ parÄ™ lat, ale ostatnio znowu wypÅ‚ynÄ™Å‚a.

**S:** Na Twitterze chyba.

**Å:** Tak. Znowu, Å¼e mamy zbyt skomplikowane przykÅ‚ady i komplikujemy kody w Dotnecie. W Dotnet Core. JeÅ¼eli sobie popatrzymy na to, to ja siÄ™ z niÄ… w bardzo wielu miejscach zgadzam, z bardzo prostego powodu. Dla mnie Solid jest idealny do tworzenia frameworkÃ³w i bibliotek, ktÃ³re majÄ… byÄ‡ re-uÅ¼ywalne.

**S:** A ja siÄ™ nie zgadzam z tym bardzo. Zgadzam siÄ™ z prezentacjÄ… Dana North'a, faktycznie ma sens, bo mÃ³wi â€Pisz prostszy kod". I tu siÄ™ zgadzam.

**Å:** Tak. I to jest w ogÃ³le kwintesencja tego.

**S:** Problem polega na tym, Å¼e Dan North mÃ³wi to z poziomu seniora. Osoba, ktÃ³ra rozumie, czym jest prostszy kod. JeÅ¼eli zaczynamy od juniora, czyli kogoÅ› kto zaczyna, to ta informacja â€co jest prostszym kodem", jest bardzo trudna. WiÄ™c Solid to jest taki zestaw reguÅ‚, ktÃ³re przydajÄ… siÄ™ na starcie, a potem jak kaÅ¼dy zestaw reguÅ‚ ewoluujÄ… wraz z rozwojem osobistym.

**Å:** Wiesz co, tak. Tylko jest taki problem, Å¼e przez to jak sÄ… te osoby wprowadzane (to jest przykÅ‚ad wÅ‚aÅ›nie z Dotnet Core'a, ktÃ³ry wÅ‚aÅ›nie wypÅ‚ynÄ…Å‚), za trudnych rzeczy, to Solid i Dry sÄ… takim kultem cargo, dowoÅ¼enia tego sztucznie.

**S:** ZgodzÄ™ siÄ™ z tym. Jak najbardziej tak. Nie wolno tego zaprzeczaÄ‡ i wÅ‚aÅ›nie w tej prezentacji North'a bardzo brakuje mi tego kontekstu kto to mÃ³wi i kto ocenia tego Solida. I jak ja faktycznie oceniam go teraz to faktycznie â€“ nie wszystkie reguÅ‚y sÄ… super plikowalne i gdzieÅ› jest ta granica miÄ™dzy â€warto to robiÄ‡" a â€juÅ¼ przeginamy totalnie" i jest to po prostu onanizm kodowy. Tak to trzeba nazwaÄ‡ wÅ‚aÅ›ciwie. Robimy coÅ› tylko po to, Å¼eby byÅ‚o, Å¼eby to zrobiÄ‡.

**Å:** Dobra. To zaleÅ¼y od doÅ›wiadczenia. Dla mnie Solid bÄ™dzie dobry zawsze by design przy bibliotekach, przy frameworkach, bo tam pewne reguÅ‚y majÄ… sens. W przypadku oprogramowania biznesowego piszmy to proÅ›ciej. I tak, Å¼eby ten kod byÅ‚ Å‚atwo usuwalny, a nie re-faktoryzowalny. 

**S:** Tak, zgadza siÄ™. I to jest faktycznie ten gÅ‚Ã³wny motyw, Å¼eby Å‚atwo siÄ™ go daÅ‚o zmieniaÄ‡ ewolucyjnie, bo czÄ™sto Solid prowadzi do tego, Å¼e prÃ³bujemy roz magnum w kodzie, a potem nikt nie moÅ¼e tego ruszyÄ‡.

**Å:** Zamiast go po prostu tylko wysprzÄ…taÄ‡. Dobra, a co Ty Szymonie wykopaÅ‚eÅ›?

**S:** Proste, ale przydatne. [â€An illustrated guide to oauth and open id connect."](https://developer.okta.com/blog/2019/10/21/illustrated-guide-to-oauth-and-oidc)
Czemu? Bo naprawdÄ™ doÅ›Ä‡ czÄ™sto widujÄ™ ludzi, ktÃ³rzy mÃ³wiÄ… â€korzystamy z oauth'a, korzystamy z open id connect'a", ale ludzie w ogÃ³le nie majÄ… pojÄ™cia jak to dziaÅ‚a pod spodem, jak to wyglÄ…da. Co wiÄ™cej, czÄ™sto widzimy, na przykÅ‚ad w rozmowach z biznesem, Å¼e â€O, to uÅ¼yjmy tutaj oauth'a, uÅ¼yjmy sso, itd.", a biznes w ogÃ³le nie ma pojÄ™cia, co to jest i jak to wyglÄ…da. Wpis jest Å‚adny, ma Å‚adnie obrysowane caÅ‚e flow, ma Å‚adne grafiki. MoÅ¼na daÄ‡ go zarÃ³wno developerom jak i takim bardziej technicznym Product Ownerom, Å‚Ä…cznie z nagraniem na YouTubie, gdyby ktoÅ› byÅ‚ leniwy i nie chciaÅ‚ czytaÄ‡. 

**Å:** He he he

**S:** Taka prawda. Czasami treÅ›Ä‡ mÃ³wiona jest Å‚atwiejsza w konsumpcji. Bardzo fajny opis, flow, nie tylko dla juniorÃ³w czy ludzi nie-technicznych, dla odÅ›wieÅ¼enia i uporzÄ…dkowania. NaprawdÄ™ ma to sens. UporzÄ…dkowanie, fajna, peÅ‚na wiedza. Po prostu.

**Å:** Ilustracje robiÄ… robotÄ™.

**S:** RobiÄ…, bo fajnie siÄ™ na nie patrzy. To jest takie pro-fajne. To w takim razie zaczynamy wÅ‚aÅ›ciwie temat naszego odcinka.

**Å:** Dzisiaj rozmawiamy o Dockerze. Odcinek inspirowany UserVoice'em przez Åukasza na naszym GitHubie. Porozmawiamy o kontenerach. Jak sobie popatrzymy, to dochodzÄ…c w myÅ›li, jest to taki zip lat 2010-2019 poprzedniej dekady.

**S:** Tak. W ogÃ³le zacznijmy od tego, Å¼e to siÄ™ zaczÄ™Å‚o od samego tematu distroless'a, ale jak zaczÄ™liÅ›my na ten temat rozmawiaÄ‡, to okazaÅ‚o siÄ™, Å¼e distroless jest trochÄ™ maÅ‚ym obszarem, ale nagle nam siÄ™ dyskusja rozwinÄ™Å‚a w kierunku w â€Co z Dockerem bÄ™dzie siÄ™ w ogÃ³le dziaÅ‚o w tym roku?" Bo koÅ„cÃ³wka zeszÅ‚ego roku byÅ‚a bardzo ciekawa dla Dockera. To, co fajnie siÄ™ dziaÅ‚o, jak przechodziliÅ›my przez Technology Radar od ThoughtWorks'a to teÅ¼ okazaÅ‚o siÄ™ wtedy jak popatrzyliÅ›my na to, Å¼e â€o! ciekawe spojrzenie". Ale to siÄ™ juÅ¼ zaczÄ™Å‚o materializowaÄ‡ tak naprawdÄ™ w Å›wiecie. 

**Å:** ByÅ‚o: â€SkÄ…d xxx tyle konteneryzacji w tym Technolgy Radar?".

**S:** Tak. I faktycznie widaÄ‡ generalnie, Å¼e to de facto dojrzewa i pokazuje czym siÄ™ to staje i gdzie to bÄ™dzie za parÄ™ miesiÄ™cy. I oto nagle siÄ™ okazaÅ‚o, Å¼e to juÅ¼ siÄ™ zaczÄ™Å‚o dziaÄ‡.

**Å:** No i teraz trzeba powiedzieÄ‡: kontenery to nie tylko Kubernetes, ale majÄ… bardzo duÅ¼o wspÃ³lnych problemÃ³w, ich uÅ¼ywanie. 

**S:** Tak, ale Kubernetes mocno napÄ™dza to, co siÄ™ dzieje w kontenerach. Ewidentnie to jest taka seria bolÄ…czek, nagle wypÅ‚ynÄ™Å‚a z duÅ¼Ä… prÄ™dkoÅ›ciÄ….

**Å:** Trzeba mieÄ‡ Å›wiadomoÅ›Ä‡ tego, gdzie jeszcze moÅ¼na znaleÅºÄ‡ kontenery oprÃ³cz samego Kubernetesa. To w AWSie to bÄ™dzie w AWS App Mesh, Fargate w Google Servers, Cloud Run; w Azurze jest to ACI Functions, App Service. Do tego jeszcze podejÅ›cia do jakiÅ› ciÄ™Å¼kich bramek IoT/EDGE, przetwarzania EDGE'a wiÄ™c jest sporo tego. 

**S:** Ustalmy generalnie, Å¼e kontenery staÅ‚y siÄ™ de facto standardem pakowania aplikacji. To nie jest tylko tak, Å¼e tylko vendorzy dostarczajÄ… swoje bazy danych, na przykÅ‚ad typu Elastic. To teÅ¼ byÅ‚ taki doÅ›Ä‡ spory ruch. Tylko, Å¼e to jest po prostu normalne pakowanie aplikacji, pakowanie kodu w kontenery staÅ‚o siÄ™ de facto standardem. No wiÄ™c teraz przelecimy parÄ™ obszarÃ³w gÅ‚Ã³wnych. Pierwszym sugerowanym byÅ‚ distroless. O co chodzi?

**Å:** Wiesz co? Zacznijmy od problemu, ktÃ³ry w teorii Docker rozwiÄ…zywaÅ‚ pierwotnie. 

**S:** Tak.

**Å:** Bo odeszliÅ›my od niego.

**S:** Lat temu dziesiÄ™Ä‡.

**Å:** No, niecaÅ‚e osiem, nie wchodzÄ…c juÅ¼ w daty. I pierwotnie on miaÅ‚ rozwiÄ…zywaÄ‡ zarzÄ…dzanie zmianÄ… i konfiguracjÄ…. MiaÅ‚ rozwiÄ…zywaÄ‡ problem, bo nie oszukujmy siÄ™, IT jest jednym wielkim pierdolnikiem, jeÅ¼eli chodzi o zarzÄ…dzanie zmianÄ… i konfiguracjÄ…. My tylko na papierze mÃ³wimy, Å¼e to umiemy. Nigdzie wiÄ™cej. WiÄ™c caÅ‚Ä… ideÄ… byÅ‚o zarzÄ…dzanie, schowanie, zarzÄ…dzanie zmianÄ… i konfiguracjÄ…, uproszczenie tego albo pozbycie siÄ™ powiedzenia â€u mnie na komputerze to dziaÅ‚a" albo â€na moim Å›rodowisku developerskim to dziaÅ‚a".


**S:** I ja bym tu dodaÅ‚, bo to wszystko wypÅ‚ynÄ™Å‚o, to wszystko dziaÅ‚aÅ‚o. KontenerÃ³w byÅ‚o tam piÄ™Ä‡, dziesiÄ™Ä‡, dwadzieÅ›cia, a wypÅ‚ynÄ™Å‚o w skali, po prostu ruszyÅ‚o strasznie, jak weszliÅ›my w Kubernetesa i nagle okazaÅ‚o siÄ™, Å¼e ok, takÄ… iloÅ›ciÄ… obrazÃ³w tego nie ogarniemy. Tak naprawdÄ™.

**Å:** Jest coÅ› w tym. PatrzÄ…c siÄ™ dalej z tym zarzÄ…dzaniem, jak byÅ‚a pierwotnie na prezentacjach przedstawiana konteneryzacja Docker. To zawsze byÅ‚y biblioteki potrzebne dla naszej aplikacji i nasza aplikacja. 

**S:** Tak.

**Å:** Tak, dokÅ‚adnie. I nigdzie nie byÅ‚o pokazywanych zaleÅ¼noÅ›ci od OS-u, Å¼e potrzebujemy kawaÅ‚ka OS-u pod spodem. W kontenerze.

**S:** Tak, bo to wypÅ‚ynÄ™Å‚o z tego, Å¼e â€dobra, przydaÅ‚oby siÄ™ pobraÄ‡, o! nie mam tych narzÄ™dzi. No to dam bazowy obraz narzÄ™dzi i one juÅ¼ bÄ™dÄ…, juÅ¼ jakoÅ› siÄ™ pojawiÄ…". 

**Å:** DokÅ‚adnie. WiÄ™c pierwotnie Docker nie posiadaÅ‚ pod spodem Å¼adnego distroll, tylko naleÅ¼aÅ‚o pakowaÄ‡ potrzebne nam biblioteki. Ale ze wzglÄ™du na lenistwo i wygodÄ™ ludzi, pojawiÅ‚y siÄ™ warstwy na bazie Deviana, Ubuntu, Alpine'a, duÅ¼o rÃ³Å¼nych, ciÄ™Å¼kich dystrybucji. ZaczynajÄ…c od Alpine'a, ktÃ³ry ma 4 MB i ciekawe problemy w niektÃ³rych miejscach, po jakieÅ› krowy po 300MB lub 400MB, gdzie mogliÅ›my wpisaÄ‡ bardzo Å‚adnie APT install, w zaleÅ¼noÅ›ci co wydaliÅ›my, czy uppercut, Å¼eby zainstalowaÄ‡ potrzebne pakiety.

**S:** W ogÃ³le wedÅ‚ug mnie niestety bardzo wielkÄ… bolÄ…czkÄ… byÅ‚o to, Å¼e jak tÅ‚umaczyliÅ›my Dockera, tÅ‚umaczyliÅ›my, Å¼e to jest niby maszyna wirtualna, podczas gdy to nie jest maszyna wirtualna. Jak dalej ludzie myÅ›leli â€ok, jak maszyna toâ€¦"

**Å:** â€¦zrobiÄ™ to standardowo"

**S:** APT cool bÄ™dzie, a jeÅ›li nie ma, to dam obraz bazowy.

**Å:** Tak. I distrolles jest tak naprawdÄ™ powrotem do korzeni i w przypadkuâ€¦ to jest caÅ‚y trend a urodziÅ‚ siÄ™ teÅ¼ taki projekt Google'owy w Google Container Tools'ach, Å¼e sÄ… po prostu gotowe obrazy, na przykÅ‚ad z Nodem, z Dotnet Corem, ktÃ³re niby zawierajÄ… pod spodem Å¼adnych zaleÅ¼noÅ›ci od OSu, Å¼adnej bazy OS-owej, tylko majÄ… wpakowane wszystkie potrzebne biblioteki, wiÄ™c APT czy innego Package Manager'a tam nie znajdziemy, tylko wkopiowane sÄ… na Å¼ywca. Same biblioteki.

**S:** OczywiÅ›cie. Skoro i tak wirtualizujemy, wiÄ™c generalnie to bÄ™dzie wszystko Å‚adnie dziaÅ‚aÅ‚o.

**Å:** Tak. No i pierwotnie byÅ‚o zawsze from-scratch, czyli ta warstwa bazowa. I dzisiaj poÅ‚owa Kubernetesa pod spodem tak lata. Bo Golang czy inne rzeczy statycznie kompilowane, czy FatBinary, radzÄ… sobie w takim Å›rodowisku, gdzie majÄ… 5-6 potrzebnych bibliotek w systemie, i nic wiÄ™cej.

**S:** Tak, bo to sÄ… obrazy, na ktÃ³rych ktoÅ› poÅ›wiÄ™ciÅ‚ czas i znowu skonfigurowaÅ‚ co jest dokÅ‚adnie potrzebne, jakie sÄ… zaleÅ¼noÅ›ci.

**Å:** Golanga moÅ¼esz skompilowaÄ‡ i wrzuciÄ‡ po prostu.

**S:** To jest skrajnoÅ›ciÄ… tutaj generalnie. Jedna fat binarka i lecimy z tym.

**Å:** Tak. Ale to wÅ‚aÅ›nie jest podejÅ›cie. WiÄ™c distrolless to jest pozbycie siÄ™ tak naprawdÄ™, Å¼e mamy warstwÄ™ bazowÄ… na jakimÅ› OS-ie. 

**S:** Tak. Albo caÅ‚y Å‚aÅ„cuch warstw bazowych, bo to z reguÅ‚y tak wyglÄ…da.

**Å:** Tak. WrÃ³cenie do korzeni.

**S:** Dobra. To w takim razie kierunek jest dobry, na pewno i to siÄ™ bÄ™dzie dziaÅ‚o, bo po pierwsze odchudzi te wszystkie obrazy i oczywiÅ›cie bÄ™dzie siÄ™ dziaÅ‚o. JeÅ¼eli juÅ¼ w tym momencie ruszamy generalnie o Dockerze, to przydaÅ‚oby siÄ™ ruszyÄ‡ caÅ‚y temat tego, co siÄ™ wydarzyÅ‚o w kontekÅ›cie samego Dockera jako firmy, bo tam siÄ™ zadziaÅ‚y doÅ›Ä‡ ciekawe rzeczy. 

**Å:** Tak. To nawet w ktÃ³rymÅ› podcaÅ›cie w linkach dawaÅ‚em.

**S:** Tak. 

**Å:** Docker jako firma, Docker Inc. sprzedaÅ‚ swÃ³j kawaÅ‚ek enterpriseowej platformy do Rentisu, czyli Docker by Edition zostaÅ‚a sprzedana na zewnÄ…trz, taki niby jeden z klejnotÃ³w koronnych, ktÃ³ry miaÅ‚ przynosiÄ‡ ten gÅ‚Ã³wny biznes. ZostaÅ‚ wyprzedany.

**S:** Tak. Czyli kasÄ™ de facto. JeÅ¼eli mÃ³wimy w takim razie, Å¼e sprzedaÅ‚ czÄ™Å›Ä‡ swoich klejnotÃ³w koronnych, no to powiedzmy sobie generalnie, co zostaÅ‚o i uÅ‚Ã³Å¼my to w takim flow generalnie, jak przepÅ‚ywa kod.

**Å:** Tak. Co zostaÅ‚o? ZostaÅ‚ Docker Hub, Trusted Registry, Docker for Desktop i Docker Community Edition.

**S:** Tak.

**Å:** MajÄ… siÄ™ skupiÄ‡ na developer experience, jak to Å‚adnie zostaÅ‚o okreÅ›lone. Taka jest ponoÄ‡ idea. Zobaczymy. CiÄ…gle majÄ… jakieÅ› kryzysy toÅ¼samoÅ›ci jako firma, w ktÃ³rym kierunku idÄ…, ale to jest moÅ¼e wyraÅºne, kiedy sprzedali takÄ… enterpiseowÄ… platformÄ™. 

**S:** Tak. Ciekawe, skÄ…d bÄ™dÄ… mieli kasÄ™, ale zobaczymy jak to siÄ™ bÄ™dzie rozwijaÅ‚o. Dobrze. Czyli generalnie tak naprawdÄ™ jak juÅ¼ mÃ³wimy o runtime'ach, to powiedziaÅ‚eÅ› o Docker CE, 

**Å:** Tak.

**S:** Czyli Community Edition, a mamy teÅ¼ coÅ› juÅ¼ wczeÅ›niej.

**Å:** Tak I teraz bardzo waÅ¼ne: Docker rozwija siÄ™ tak jak inne open-source'owe projekty, czyli mamy wersje down-streamowe, ktÃ³re sÄ… stabilne, czyli Community Edition, potem Enterprise Edition, a caÅ‚y rozwÃ³j dzieje siÄ™ w up-streamowym projekcie, czyli takim gÅ‚Ã³wnym open-sourcowym. I mimo, Å¼e Commity Edition jest open-source'owe, to tak naprawdÄ™ pod spodem caÅ‚y rozwÃ³j dzieje siÄ™ w Moby. 

**S:** Ok. Moby to jest zbiÃ³r wielu rzeczy, zbiÃ³r kilku technologii, ktÃ³re sÄ… wykorzystywane, kilku inicjatyw, i omÃ³wienie wszystkiego po kolei by nam zajÄ™Å‚o duÅ¼o czasu. To nie w tym odcinku na pewno, ale wyrÃ³Å¼nimy kilka takich najwaÅ¼niejszych.

**Å:** PatrzÄ…c siÄ™ na Moby'ego, tam stoi, jak powiedziaÅ‚eÅ›, szereg rzeczy za nim. Trzy najwaÅ¼niejsze rzeczy z mojej perspektywy to jest containerd, open-sourceowy, utworzony projekt open-sourceowy przez Dockera.

**S:** Dobra, wtrÄ…cÄ™ siÄ™. Co robi containerd?

**Å:** Uruchamia nam kontenery. To jest po prostu Å›rodowisko uruchomieniowe. I pod spodem Moby jak i Docker Community Edition korzystajÄ… z tej biblioteki do uruchomienia kontenerÃ³w. 

**S:** Kubernetes teÅ¼ bardzo Å‚adnie.

**Å:** Tak. 

**S:** Dobrze, czyli mamy containerd.

**Å:** NastÄ™pnie jest runc.

**S:** WyjaÅ›nienie?

**Å:** Uruchamianie kontenerÃ³w z command-line'a. Czyli mogÄ™ sobie zrobiÄ‡ runc, run-container. Czyli tak naprawdÄ™ jeden z interfejsÃ³w do manipulacji miÄ™dzy innymi containerd. 

**S:**Dobrze! Idziemy dalej.

**Å:** I ostatni komponent, ktÃ³ry jest istotny z caÅ‚oÅ›ci, to jest linuxkit. Linuxkit to jest taki wyciÄ™ty kawaÅ‚ek kernela linuxowego, bardzo maÅ‚y, ktÃ³ry sÅ‚uÅ¼y tylko i wyÅ‚Ä…cznie do uruchamiania kontenerÃ³w. Czyli moÅ¼emy sobie w takiej specjalizowanej vm-ce odpaliÄ‡ bardzo lekki kernel, ktÃ³ry zajmuje bardzo maÅ‚o zasobÃ³w i na tym posadziÄ‡ konteneryzacjÄ™.

**S:** Ale to fajne, wÅ‚aÅ›nie te ruchy pokazujÄ…, gdzie jest koncentracja, zaczynamy traktowaÄ‡ kontenery jako totalne commodity, Å¼e po prostu abstrahujemy, robimy abstrakcji, common interface, i minimalizujemy tÄ… warstwÄ™ bazowÄ…, ktÃ³ra jest nam potrzebna do uruchomienia.

**Å:** DokÅ‚adnie. I trzeba zapamiÄ™taÄ‡, Å¼e tak naprawdÄ™ Docker, o ktÃ³rym mÃ³wimy, to jest Moby ze zbiorem projektÃ³w open-sourceowych. A my instalujemy u siebie stabilnÄ… wersjÄ™ w postaci Docker Community Edition. Z ciekawostek, na Azure lata Moby, na AKSie, na pÅ‚atnej usÅ‚udze Microsoftu (ktÃ³re jest Å›wiadczone jako Manage service), lata Moby. Tam, gdzie wykorzystujemy Azure Kubernetes Service. 

**S:** I tam Microsoft bierze za to odpowiedzialnoÅ›Ä‡. 

**Å:** I daje support.

**S:** DokÅ‚adnie. SLA i wszystkie inne rzeczy. Fajnie. Czyli mamy tak naprawdÄ™ caÅ‚e warstwy abstrakcji. Tworzony wÅ‚aÅ›ciwie zostaÅ‚ CRI-O.

[L] Tak. Zacznijmy moÅ¼eâ€¦wprowadziÅ‚eÅ› to trochÄ™ za wczeÅ›nie. Zacznijmy od OCI â€“ Open Container Initiative. Jest to rok 2015, zaÅ‚oÅ¼one przez Dockera i parÄ™ innych firm. Jest to otwarta specyfikacja runtime'u i obrazÃ³w. Czyli mamy dwie rzeczy: jak ma wyglÄ…daÄ‡ nasz obraz z kontenerem, ktÃ³ry chcemy uruchomiÄ‡ i w jaki sposÃ³b go uruchomiÄ‡. WiÄ™c jest na to otwarta specyfikacja, dwie specyfikacje tak naprawdÄ™. OCI zawiera dwie specyfikacje.

**S:** Obrazu i runtime'u.

**Å:** Tak. W jaki sposÃ³b mam odpaliÄ‡ to. I caÅ‚y rynek zaczyna z tego tak naprawdÄ™ juÅ¼ w jakiÅ› sposÃ³b korzystaÄ‡ albo zaraz bÄ™dzie korzystaÅ‚. Jest to otwarte. PrzykÅ‚adowo jest taki mindfuck w Microsofcie. Znowu do niego wrÃ³cÄ™, bo mnie dotknÄ…Å‚ ostatnio. AKS jakoÅ› za 3-4 tygodnie bÄ™dzie wspieraÅ‚ juÅ¼ OCI i normalne odpalanie OCI, a Container Registry Microsoftu juÅ¼ w peÅ‚ni wspiera OCI do przechowywania obrazu. 

**S:** To Å‚adnie.

**Å:** Taki drobny mindfuck, Å¼e jeden komponent wspiera, a na drugi trzeba poczekaÄ‡. WiÄ™c jest sobie OCI, ktÃ³re jest standardem. I tak jak powiedzieliÅ›my, sÄ… inne runtime'y. Containerd juÅ¼ powiedzieliÅ›my. 

**S:** Tak.

**Å:** Jest to taki goÅ‚y kawaÅ‚ek, ktÃ³ry moÅ¼na wziÄ…Ä‡. IdÄ…c dalej, takim najwiÄ™kszym dla mnie wyrÃ³Å¼nikiem, ktÃ³ry teÅ¼ jest komercyjny jest podman. 

**S:** Red Hat.

**Å:** DokÅ‚adnie. Podman jest od Red Hata. Jest to ich alternatywa, bo wczeÅ›niej utrzymywali jakiegoÅ› Forka Dockera, gdzie backpartowali security i inne rzeczy.

**S:** Ale znowu, czemu majÄ… coÅ› wÅ‚asnego? Bo majÄ… swojego Open Shifta oczywiÅ›cie. 

**Å:** Tak.

**S:** Czyli z problemu wynikÅ‚o, ze skali i iloÅ›ci tych obrazÃ³w, ktÃ³re majÄ…, i co z tym chcieliby zrobiÄ‡.

**Å:** DokÅ‚adnie. WiÄ™c podman jest ich narzÄ™dziem, ich runtimem i zestawem narzÄ™dzi do konteneryzacji i pod spodem jest miÄ™dzy innymi domyÅ›lny dla Red Hat Enterprise, Linuxa 8 czy Open Shifta 4. Podman jest naturalnym Å›rodowiskiem uruchomieniowym. Nie znajdziemy Dockera. Jest nawet dowcip, ktÃ³ry jest pokazywany na wszystkich prezentacjach Red Hata, kiedy pokazujÄ… podmana wÅ‚aÅ›nie, to robi siÄ™ alias do Dockera, czyli wskazujÄ…cy na podmana, bo wiÄ™kszoÅ›Ä‡ poleceÅ„ jest kompatybilna. Po prostu.

**S:** No bo mamy uspÃ³jniony interfejs, generalnie co siÄ™ zachowuje. W sumie przestaje nas interesowaÄ‡, co dokÅ‚adnie nam odpala te kontenery.

**Å:** I z caÅ‚oÅ›ci, kiedy robimy to poza cloudem, podman ma jednÄ… genialnÄ… rzecz. Jest suport na niego w ramach subskrypcji na tego Red Hata. 

**S:** Wiadomo. Red Hat siÄ™ z czegoÅ› utrzymuje.

**Å:** WiÄ™c w Å›rodowiskach korporacyjnych naprawdÄ™ tutaj suport robi robotÄ™. Do tego stopnia, Å¼e taki Dotnet Core ma dual suport, od Microsoftu i Red Hat. WiÄ™c jak coÅ› bÄ™dzie nie tak, moÅ¼emy zaÅ‚oÅ¼yÄ‡ ticket albo w Red Hacie albo w Microsofcie. I oni siÄ™ odzywajÄ… do siebie nawzajem bez naszego udziaÅ‚u. WiÄ™c to jest doÅ›Ä‡ ciekawa rzecz, jeÅ¼eli komuÅ› siÄ™ zdarzyÅ‚o przy duÅ¼ych systemach, powinien wiedzieÄ‡, Å¼e takie sÄ… problemy.

**S:** Nie oszukujmy siÄ™, Red Hat od bardzo wielu lat siedzi w enterprise i doskonale wie, jak zaadresowaÄ‡ problemy i bolÄ…czki, ktÃ³re wystÄ™pujÄ…. Support kosztuje, ale jest potrzebny. WiÄ™kszoÅ›Ä‡ firm decyduje siÄ™ na duÅ¼y projekt bez supportu. Dobrze. To teraz CRI-O?

**Å:** Tak. Albo CRI-O, w zaleÅ¼noÅ›ci od tego, jak to kto odczytuje. 

**S:** To wyjaÅ›niaj.

**Å:** Tak. To jest taki lekki runtime konteneryzacyjny dla Kubernetesa. Jest to prowadzone w ramach CNCFU. Jest tam caÅ‚y zestaw narzÄ™dzi i tak naprawdÄ™ jest to container runtime interface, czyli sposÃ³b jak to odpaliÄ‡. Pod spodem teÅ¼ korzysta z OCI, wiÄ™c moÅ¼e wykorzystywaÄ‡ run-container, runc, bo tak naprawdÄ™ do kraju moÅ¼na podÅ‚Ä…czyÄ‡ dowolny runtime, ktÃ³ry jest kompatybilny z OCI. I tak naprawdÄ™ z caÅ‚ym tulingiem OCI. I tyle. I on jest w Kubernetesie. Tylko tam, jeÅ¼eli popatrzymy, bo to ma byÄ‡ warstwa abstrakcji do komunikacji pomiÄ™dzy Kubernetesem, a naszym Å›rodowiskiem uruchomieniowym naszego kontenera. 

**S:** Ok. I teraz przechodzimy na kolejny temat, ktÃ³ry jest bardzo waÅ¼ny. Ja, jak go widzÄ™, to siÄ™ zawsze uÅ›miecham generalnie, bo tak to jest idea, ktÃ³rÄ… Microsoft bardzo mocno promowaÅ‚. A problem, ktÃ³ry istniaÅ‚ od startu Dockera tak naprawdÄ™. To jest to, Å¼e niestety wiele firm mÃ³wi to, na przykÅ‚ad, i tak byÅ‚o w pierwszych wersjach chmurowych, Å¼e zgadali siÄ™, Å¼eby ich kontenery chodziÅ‚y obok obcych kontenerÃ³w. No bo jakby siÄ™ ktoÅ› wydostaÅ‚ z konteneru, to w tym momencie ma root'a.

**Å:** Tak albo ma problem third-party kontenerÃ³w, third-party kodu na naszym klastrze, na naszych Å›rodowiskach. Tak. No i odpowiedziÄ… na to Microsoftu byÅ‚ pomysÅ‚ juÅ¼ dawno, dawno temu, Å¼eby kontenery uruchamiaÄ‡ jako malutkie VM-ki. One faktycznie juÅ¼ teraz sÄ… VM-kÄ….

**S:** I tak sÄ… w ogÃ³le odpalane kontenery Windowsowe. To jest jeden z dwÃ³ch sposobÃ³w tak naprawdÄ™.

**Å:** Tak. Jeden z dwÃ³ch sposobÃ³w. No wiÄ™c, mamy tak naprawdÄ™ wykorzystanie funkcji wirtualizacyjnych procesora, czyli jawnie wirtualizacji bÄ…dÅº net set virtualisation, do tego, Å¼eby izolowaÄ‡. Bo Docker z definicji nie izoluje swoich workloadÃ³w. Od strony bezpieczeÅ„stwa nie izoluje. Pozwala na jakÄ…Å› tam ucieczkÄ™. WiÄ™c mamy parÄ™ rozwiÄ…zaÅ„ na rynku. Dwa siÄ™ tak wybijajÄ… mocno i uÅ¼ywajÄ…, majÄ… trochÄ™ wspÃ³lny mianownik, bo uÅ¼ywajÄ… KVM'a, czyli Linuxowego moduÅ‚u do wirtualizacji w kernelu. I czym to jest? Tak naprawdÄ™ to sÄ… mikro-vmki, ktÃ³re sÄ… uruchamiane. Czyli powoÅ‚ujemy sobie taki byt, to jest mikro-vmka lub mikro-vmka z kilkoma kontenerami w Å›rodku. Czyli odpowiednik pola Kubernetesowego. Pod spodem, jeÅ¼eli chodzi o kernell w tej mikro-vmce, to moÅ¼e byÄ‡ na przykÅ‚ad linuxkit, o ktÃ³rym wspomnieliÅ›my wczeÅ›niej.

**S:** Tak

**Å:** I co tam siÄ™ znajduje? OprÃ³cz tego, Å¼e mamy izolacjÄ™, to sÄ… dwa produkty do tego. Pierwszy jest taki open-sourceowy, ktÃ³ry nazywa siÄ™ Kata Container. KiedyÅ› byÅ‚ miÄ™dzy innymi przez Intela rozwijany, jest w CNCFie. I pozwala nam po prostu podnieÅ›Ä‡ to jako vm-kÄ™, zamiast kontenera pod spodem na takim wirtualizatorze. Druga ciekawa rzecz to jest AWS Firecracker. I FireCracker jest o tyle ciekawy, Å¼e zostaÅ‚ produkcyjnie przetestowany przez AWS-a na Lambdzie. Czyli pod spodem Firecracker, wszystkie landy sÄ… uruchamiane na Firecrackerze. Oni to upublicznili i zrobili do tego interfejs zgodny z OCI, Å¼eby moÅ¼na byÅ‚o to sobie wpiÄ…Ä‡. 

**S:** Ok. To jest jedno z podejÅ›Ä‡ do problemu, jak zarzÄ…dzaÄ‡ bezpieczeÅ„stwem z poziomu dla imag-y i kontenerÃ³w.

**Å:** Wiesz co, jeszcze bym Ci przeszkodziÅ‚, zanim przejdziemy dalej, bo sobie przypomniaÅ‚em, Å¼e jest jeszcze Vmware ze swojÄ… zabawkÄ…. Tam to siÄ™ bÄ™dzie nazywaÅ‚o Native Pots w VMware I jest taki projekt â€“ pacifica, ktÃ³ry jakoÅ› w tym roku powinien juÅ¼ ujrzeÄ‡ Å›wiatÅ‚o dzienno-produkcyjne. I dorzucÄ™ do tego, Å¼e z mojej perspektywy to nie wyglÄ…da aÅ¼ tak dobrze, jak wejdziemy w takie detale techniczne. Ich kolejny Vmware'a podejÅ›Ä‡ do kontenerÃ³w za pÃ³Åºno skoczyli na to i kombinujÄ…, jak zrobiÄ‡ tÄ… konteneryzacjÄ™ bardziej infrastrukturalnÄ… niÅ¼ aplikacyjnÄ….

**S:** Tak, tu mam takie wraÅ¼enie, Å¼e ile razy Vmware wyskakuje z czymÅ› w kontekÅ›cie kontenerÃ³w, to Å›mierdzi to takÄ… staroÅ›ciÄ…, takim podejÅ›ciem. To znaczy chÅ‚opaki, bardzo sÄ… wielkie te Vm-ki, nauczyli siÄ™ wÅ‚Ä…czaÄ‡ kontenery i to nie do koÅ„ca dziaÅ‚a. 

**Å:** AdresujÄ… to do obsuw. 

**S:** Tak. Oni caÅ‚y czas myÅ›lÄ…, Å¼e jest to obsuw caÅ‚y czas na temat wirtualek myÅ›lÄ…, a to juÅ¼ siÄ™ trochÄ™ pozmieniaÅ‚o. 

**Å:** Jest tam w pacifice, bÄ™dzie duÅ¼o ciekawych problemÃ³w, miÄ™dzy innymi wÅ‚aÅ›nie z izolacjÄ… workloadu, wiÄ™c zobaczymy, co im z tego wyjÅ›cie.

**S:** Dobrze, ale mÃ³wiliÅ›my wÅ‚aÅ›nie o wirtualizacji. Drugim rozwiÄ…zaniem jest Rootless.

**Å:** Tak.

**S:** TeÅ¼ bardzo temat wypÅ‚ynÄ…Å‚ na footworksowym TechRadarze.

**Å:** Tak. PojawiÅ‚ siÄ™ na footworksowym Radarze, Å¼eby zaczÄ…Ä‡ siÄ™ tym interesowaÄ‡ i oceniaÄ‡. Rootless ma prostÄ… ideÄ™. DomyÅ›lnie, tak jak Å›rodowiska runtimeowe latajÄ… sobie po prostu jako deamony na uprawnieniach roota.

**S:** Co w sumie jest niebezpieczne, bo jeÅ¼eli ktoÅ› wyjdzie z tego kontenera, to uprawnieÅ„ ma doÅ›Ä‡ duÅ¼o, powiedzmy, moÅ¼e wszystko robiÄ‡.

**Å:** Tak i zaÅ‚oÅ¼enie rootlessu jest bardzo proste. To to, Å¼e fakeujemy sobie w Å›rodku, robimy sobie remapowanie i odpalamy to sobie w kontekÅ›cie zwykÅ‚ego uÅ¼ytkownika. CaÅ‚y ten runtime i moÅ¼emy wÅ‚aÅ›nie z nieuprzywilejowanego uÅ¼ytkownika tworzyÄ‡ kontenery i nimi zarzÄ…dzaÄ‡. Wyrzucamy to wszystko z rootowej czÄ™Å›ci systemu. To jest prosta idea. 

**S:** Tak i powoli juÅ¼ realizowana. Nie jest to bardzo Å‚atwe na chwilÄ™ obecnÄ…. 

**Å:** Tak, jest tam jeszcze trochÄ™ problemÃ³w, eksperymentalnie jest to zainicjowane w Dockerze Community Edition juÅ¼ wleciaÅ‚o. Podman coÅ› tam potrafi, ja nie nazwÄ™ jeszcze tego wygranym. Sam siÄ™ nie czujÄ™ i pod tym siÄ™ nie podpiszÄ™. Na przykÅ‚ad, jest klasyczna problematyka. W szczegÃ³lnoÅ›ci, Å¼e one znajdujÄ… siÄ™ w user space, ale jeszcze kombinujÄ… jak to bezpiecznie zrobiÄ‡. Jest parÄ™ rzeczy, ktÃ³re moÅ¼na zastosowaÄ‡. No ale to jeszcze nie ten moment. 

**S:** DokÅ‚adnie. I gorÄ…cy temat, ktÃ³ry znowu teÅ¼ byÅ‚ takim motywem, ktÃ³ry byÅ‚ na footoworksowym Radarze i juÅ¼ jest realizowany, to jest bezpieczeÅ„stwo. I tu widaÄ‡ przede wszystkim to, Å¼e w koÅ„cu jest czas, Å¼eby siÄ™ temu przyjrzeÄ‡ i jest to realizowane, i nie ma pomysÅ‚u jak go ugryÅºÄ‡. Bo dwa lata temu to byÅ‚o generalnie na zasadzie â€RÃ³bmy to". A teraz faktycznie powstaÅ‚y przede wszystkim narzÄ™dzia, powstaÅ‚y podejÅ›cia i powstaÅ‚a automatyzacja do tego wszystkiego, bezpieczeÅ„stwa, w kontekÅ›cie kontenerÃ³w i w kontekÅ›cie spojrzenia caÅ‚oÅ›ciowego na naszÄ… aplikacjÄ™ jako kod i obrazy bazowe, i co budujemy.

**Å:** Wiesz co, tak. Tylko teraz zaczynamy siÄ™. JeÅ¼eli chodzi o narzÄ™dzia i best practises, one istniejÄ… tak z trzy lata, wiÄ™c to nie jest tak, Å¼e sÄ… standardy od trzech lat dla Dockera jak i dla samego Kubernetesa. Jest coÅ› takiego, co siÄ™ nazywa na czÄ™Å›ci bezpieczeÅ„stwa, jest standard okreÅ›lony w CIS Benchmark. IstniejÄ… takie benchmarki, czyli zestaw wytycznych, jak to wszystko bezpiecznie konfigurowaÄ‡. Dla Dockera i Kubernetesa one istniejÄ… juÅ¼ trzy lata, wiÄ™c best practises istniejÄ….

**S:** Tylko teraz siÄ™ nimi przejmujemy bardzo mocno. 

**Å:** Tak.

**S:** WidaÄ‡ generalnie, Å¼e to wyszÅ‚o na tapetÄ™, bo jak to wyszÅ‚o od enterprise'u to ktoÅ› powiedziaÅ‚, ok fajnie, Å¼e umiemy to szybko, ale teraz jak to dziaÅ‚a wewnÄ™trznie. Narzekania na bezpieczeÅ„stwo w Dockerze jest od dawna, nie oszukujmy siÄ™.

**Å:** Tak. 

**S:** Teraz przyszedÅ‚ ktoÅ› i powiedziaÅ‚" Sorry, pÃ³ki tego nie ogarniecie, nie wejdziemy z tym na produkcjÄ™". 

**Å:** Tak, dokÅ‚adnie. WiÄ™c sÄ… standardy. Drugie: sÄ… best practises. Docker ma bardzo fajny, dÅ‚ugi dokument, jak zrobiÄ‡ bezpiecznie Docker Community Edition, Enterprise Edition. W jaki sposÃ³b zrobiÄ‡ bezpiecznie. WiÄ™c best practises posiadamy. WiÄ™c jest juÅ¼ siÄ™ na czym wzorowaÄ‡. Zalecam zdrowy rozsÄ…dek, bo niektÃ³re sÄ… troszeczkÄ™ juÅ¼ przesadzone dla wiÄ™kszoÅ›ci aplikacji. W szczegÃ³lnoÅ›ci dla tych wewnÄ™trznych. Ale sÄ…, wiÄ™c moÅ¼na siÄ™ do nich odwoÅ‚aÄ‡. Linki znajdziecie w materiaÅ‚ach, wÅ‚aÅ›nie do tych best practises. 

**S:** I sÄ… teÅ¼ narzÄ™dzia. 

**Å:** Tak, narzÄ™dzia. MoÅ¼e zacznijmy jeszcze od problemu z bezpieczeÅ„stwem, o ktÃ³rym zaczynamy myÅ›leÄ‡. To znaczy, o ktÃ³rym zawsze siÄ™ mÃ³wiÅ‚o na szkoleniach, prezentacjach. To sÄ… bazowe, z ktÃ³rych korzystamy. I masz dwa problemy, takie z mojego punktu widzenia security. Pierwszym jest to, Å¼e powinniÅ›my korzystaÄ‡ z oficjalnych obrazÃ³w. Nadal jest problem, Å¼e ludzie prÃ³bujÄ… korzystaÄ‡ z rzeczy, ktÃ³re sÄ… zrobione na przykÅ‚ad LukaszKaluzny/xxxx na Docker Hubie. 

**S:** Z takich nigdy nie korzystam.

**Å:** Ty nigdy nie, ale ludzie biorÄ…, bo â€jest coÅ› gotowego na mÃ³j problem".

**S:** Raczej pijÄ™ do tego, Å¼e â€od Åukasza KaÅ‚uznego", ale tak ;) ZgodzÄ™ siÄ™, Å¼e faktycznie generalnie na Docker Hubie jest od groma obrazÃ³w, ktÃ³re sÄ… robione, zaciÄ…gane z jakiegoÅ› tam Repo GitHubowego. Plus, Å¼e widzimy faktycznego Docker Compose'a tam.

**Å:** Docker File'a.

**S:** Tak. Ale to siÄ™ moÅ¼e zmieniÄ‡ tak naprawdÄ™ i takie poleganie na tym jest doÅ›Ä‡ Å›liskie. Sam siÄ™ raz przejechaÅ‚em.

**Å:** Tak. WiÄ™c tak naprawdÄ™ dobrÄ… praktykÄ…, o ktÃ³rej przydaÅ‚oby siÄ™ pamiÄ™taÄ‡ w organizacji, to jest tak naprawdÄ™ korzystanie z oficjalnych obrazÃ³w dostawcÃ³w i teraz to jest totalny mindfuck, bo Red Hat ma swoje Repo, Microsoft ma swoje Repo. Elastici teÅ¼ siÄ™ gdzieÅ› wyniosÅ‚y. 

**S:** Wszyscy sÄ… gdzieÅ› indziej, jest masakra.

**Å:** Jest to porozwalane, wiÄ™c trzeba wychodziÄ‡ od â€co mam uÅ¼yÄ‡", od tego co wskazuje dostawca. 

**S:** Tak.

**Å:** Runtime'u, innych rzeczy, rozwiÄ…zania, w zaleÅ¼noÅ›ci od tego, czego uÅ¼ywamy, czy framework'a. To, co wam wskazuje dostawca. Druga rzecz odnoÅ›nie problemu z obrazami, to Å¼e potrafiÄ… zniknÄ…Ä‡. 

**S:** To jest problem, ktÃ³ry byÅ‚ swojego czasu w MPMie, Å¼e nagle zniknÄ…Å‚ jeden obraz i wywaliÅ‚o siÄ™ kilkadziesiÄ…t tysiÄ™cy innych bibliotek zaleÅ¼nych. To bÄ™dzie wystÄ™powaÅ‚o.

**Å:** Tak. I rozwiÄ…zanie jest tu proste i brutalne. NaleÅ¼y utrzymywaÄ‡ swojÄ… kopiÄ™. 

**S:** Brutalne, bardzo, ale na tym to siÄ™ skoÅ„czy.

**Å:** Tak Albo niektÃ³re virtual tak naprawdÄ™ mamy w Artifactory i w paru innych mamy te virtual, ktÃ³re cachujÄ… i trzymajÄ… nam po pobraniu.

**S:** Tak. Jeszcze pozostaje pytanie generalnie, czy te, ktÃ³re zniknÄ™Å‚y, czemu zniknÄ™Å‚y, czy sÄ… na tyle stare, Å¼e w ogÃ³le powinniÅ›my siÄ™ im przyjrzeÄ‡, Å¼e moÅ¼e z nich juÅ¼ nie korzystajmy.

**Å:** Ale wiesz, jakie jest z legacy w duÅ¼ych organizacjach. 

**S:** Wiem, szczegÃ³lnie, kiedy przychodzi czas na migracjÄ™ lub upgrade. To nie jest takie proste.

**Å:** Albo biznesowo to nie jest opÅ‚acalne. 

**S:** Zgadzam siÄ™ w zupeÅ‚noÅ›ci. WiÄ™c tam stoi za caÅ‚Ä… seriÄ… Firewall-i.

[L] ChciaÅ‚bym pozdrowiÄ‡ parÄ™ aplikacji w PHP56, ktÃ³re widziaÅ‚em, Å¼e latajÄ… produkcyjnie gdzieÅ›. 

**S:** Tak. BÄ™dzie takich od groma, dokÅ‚adnie.

**Å:** Dobra. WiÄ™c trzeba je skopiowaÄ‡, zbudowaÄ‡ listÄ™ dozwolonych. W pewnym momencie bÄ™dzie trzeba jakieÅ› procesy nadzorcze, bardzo Å‚adnie nazywane governance-owymi, tak naprawdÄ™, obudowaÄ‡ te bazowe rzeczy, z ktÃ³rych korzystamy.

**S:** Tak. I mieÄ‡ Å›wiadomoÅ›Ä‡, co te bazowe obrazy, jakie majÄ… problemy, bo bÄ™dÄ… miaÅ‚y problemy. One bÄ™dÄ… wypÅ‚ywaÅ‚y. I wchodzimy teraz na caÅ‚Ä… automatyzacjÄ™ tego wszystkiego. Czyli skanowanie naszej aplikacji w formie caÅ‚oÅ›ci, czyli skanowni, mamy caÅ‚e CI, mamy Repo, runtime. To wszystko tworzy naszÄ… aplikacjÄ™ i to automatyzujemy nagle, bo nagle potencjalnych dziur mamy doÅ›Ä‡ duÅ¼o.

**Å:** Tak. Trzeba pamiÄ™taÄ‡, Å¼e przez to, Å¼e korzystamy z jakiejÅ› bazy zaleÅ¼noÅ›ci pod spodem na bazie jakiegoÅ› sytemu, to Å‚apiemy z nimi podatnoÅ›ci, tak naprawdÄ™, bo jest tego wiÄ™cej.

**S:** One bÄ™dÄ… wystÄ™powaÅ‚y. Trzeba siÄ™ z tym pogodziÄ‡.

**Å:** Tak, jest to standard. Obrazy potrafiÄ… mieÄ‡ naprawdÄ™ sporo. WiÄ™c, tak jak Szymon powiedziaÅ‚, trzeba to zautomatyzowaÄ‡, wiÄ™c o co chodzi. Tak naprawdÄ™ powinniÅ›my przeskanowaÄ‡ nasz kontener pod wzglÄ™dem (tak jak skanujemy system operacyjny) podatnoÅ›ci, czy aplikacja zawiera jakieÅ› podatnoÅ›ci. 

**S:** Ja bym doprecyzowaÅ‚. Nasz kontener, czyli nasz bazowy image i ten wpis, ktÃ³ry my stworzyliÅ›my, bo dziury mogÄ… byÄ‡ w obydwu miejscach.

**Å:** Tak. Czyli mÃ³wimy o caÅ‚oÅ›ci. Czyli tym, co wypluwa, wiÄ™c takÄ… podstawowÄ… rzeczÄ… jest skanowanie i robimy to w trzech miejscach. Ja to zawsze okreÅ›lam poziomami paranoi. Takim przynajmniej podstawowym bÄ™dzie robienie tego w ramach continuous integration, czyli albo na pull request czy na gÅ‚Ã³wnym buildzie zawsze to powinno byÄ‡ skanowane. Potem kolejne to jest regularne skanowanie Repo czy obrazÃ³w, ktÃ³re tam leÅ¼Ä…, czy nie sÄ… za stare. I na koniec skanowanie runtime, czy obrazy, ktÃ³rych uÅ¼ywamy tam, teÅ¼ nie majÄ… jakiejÅ› podatnoÅ›ci. WiÄ™c sÄ… te trzy miejsca. I teraz waÅ¼ne: jest masa narzÄ™dzi do tego.

**S:** WÅ‚aÅ›nie chciaÅ‚em CiÄ™ ciÄ…gnÄ…Ä‡ za jÄ™zyk, bo wÅ‚aÅ›nie mÃ³wisz, Å¼e trzeba, a generalnie tego jest trochÄ™ na rynku. Lecisz, co tam mamy?

**Å:** Dobra. JeÅ¼eli sobie wyrÃ³Å¼nimy, jest tego masa. Ja wybraÅ‚em kilka, z ktÃ³rymi mam stycznoÅ›Ä‡, ktÃ³re moÅ¼na uÅ¼yÄ‡. Pierwszym to bÄ™dzie Anchore do skanowania w Repo, do integracji z CIM. Posiada teÅ¼ w wersjÄ™ komercyjnÄ…, wiÄ™c jest jako open source jako komercja, wiÄ™c moÅ¼emy sobie wpiÄ…Ä‡ w CI Repo, ma tez jakÄ…Å› integracjÄ™ z Kubernetesem, jeÅ¼eli chodzi o runtime. WiÄ™c, moÅ¼emy to wpiÄ…Ä‡. Potem kolejne to bÄ™dzie Aqua microscaner i trivy. To sÄ… wersje komercyjne. Dobrze skanujÄ… CI, mogÄ… skanowaÄ‡ obraz z Repo. Niestety musimy sobie to wszystko oscryptowaÄ‡ samodzielnie, caÅ‚y ten proces, ale da siÄ™ je wÅ‚Ä…czyÄ‡ w szczegÃ³lnoÅ›ci trivy bardzo Å‚atwo siÄ™ wÅ‚Ä…cza w proces Ci, bo to jest po prostu nastÄ™pny krok, w ktÃ³rym mÃ³wimy: â€przeskanuj mi ten obraz i wypluj z tego raport". JeÅ¼eli wyjdÄ™ z kodem niezerowym, to albo wywala, albo zrÃ³b warning, Å¼e trzeba siÄ™ temu przyjrzeÄ‡, w zaleÅ¼noÅ›ci od podejÅ›cia.

**S:** W konfiguracji bit serwera, jak do tego dochodzimy. OczywiÅ›cie.

[L] Tak. KolejnÄ… rzeczÄ… to bÄ™dzie Clair. Pod spodem dziaÅ‚a on w rÃ³Å¼nych miejscach, m.in. w QI-u, teraz naleÅ¼y do Red Hata, tam pod spodem. ByÅ‚ zapoczÄ…tkowany ten projekt przez Core RS. WiÄ™c tak to wyglÄ…da, jeÅ¼eli chodzi o skanowanie. Dodatkowo, jeÅ¼eli chodzi o Repo, w szczegÃ³lnoÅ›ci, bo cloudowe zaczynajÄ… siÄ™ dorabiaÄ‡ wbudowanego skanowania regularnego. Docker Hub na przykÅ‚ad je posiada. A teraz z platform, ktÃ³re moÅ¼emy uÅ¼yÄ‡ do skanowania lokalnie, jest to projekt w ramach CNCFU, jakim jest Harbor. I jest to repozytorium kontenerÃ³w, ale rÃ³wnieÅ¼ posiada wbudowany skaner, ktÃ³ry pozwala nam to robiÄ‡ regularnie. WspominaÅ‚em wczeÅ›niej o regularnej przebudowie. 

**S:** Tak.

**Å:** KontenerÃ³w. TeÅ¼ powiedziaÅ‚eÅ› o tym. Chodzi o to, Å¼ebyÅ›my sprÃ³bowali zautomatyzowaÄ‡ ten proces, Å¼e jeÅ¼eli wykryjemy jakieÅ› podatnoÅ›ci, to, Å¼e automat tak naprawdÄ™ zaciÄ…ga nowÄ… bazÄ™ i przebudowuje nasze wszystkie aplikacje i automatycznie je gdzieÅ› deplojuje.

**S:** DokÅ‚adnie tak siÄ™ robi w aplikacjach Dotnet Coreowych, updatey na zaleÅ¼noÅ›ciach i sprawdzamy czy to w ogÃ³le dziaÅ‚a. OkreÅ›lamy czy robimy na minor major i automatyzujemy sprawdzenie,w jaki sposÃ³b to siÄ™ dzieje.

**Å:** Dependency Bot Manager, jak to ktoÅ› ostatnio okreÅ›liÅ‚, Å¼e czuje siÄ™ jak manager bota, ktÃ³ry tylko wypluwa pull requesty.

**S:** Coraz wiÄ™cej narzÄ™dzi do Ci ma to w formie przeÅ‚Ä…cznika, Å¼e â€przeskaluj zaleÅ¼noÅ›ci, zrÃ³b upgrade, jak sÄ… nowe rzeczy to zrÃ³b PR'a, itd.. To byÅ‚o juÅ¼ w linkach, w ktÃ³rych odcinkach, Å¼e de facto boty ogarnÄ™Å‚y caÅ‚kowicie temat i wypuÅ›ciÅ‚y na produkcjÄ™.

**Å:** Tak, porozmawiaÅ‚y ze sobÄ… i puÅ›ciÅ‚y.

**S:** I pochwaliÅ‚y PR'a.

**Å:** Tak. I tu bym dorzuciÅ‚, Å¼e to jest ten proces caÅ‚ej automatyzacji, czyli CI Repo Runtime. JeÅ¼eli mamy budÅ¼et albo duÅ¼Ä… organizacjÄ™, moÅ¼emy tym zarzÄ…dziÄ‡ bardziej centralnie. Jest tego trochÄ™ na rynku, ja wyrÃ³Å¼niam dwie platformy, ktÃ³re dajÄ… radÄ™, ktÃ³re moÅ¼na Å›miaÅ‚o uÅ¼yÄ‡. SÄ… to Twistlock i Aquasecurity. One tak naprawdÄ™ pozwalajÄ… nam siÄ™ wpiÄ…Ä‡ w caÅ‚y cykl Å¼ycia, czyli w CI, Repo Runtime, wyÅ›wietliÄ‡ to w jednym miejscu, zobaczyÄ‡ w centralnym miejscu, mieÄ‡ centralne miejsce do zaraportowania, zdania tego. Z drugiej strony majÄ… masÄ™ dodatkowych rzeczy, ktÃ³re znajdujÄ… siÄ™ w Runtime. Tak jak na przykÅ‚ad zarzÄ…dzanie juÅ¼ bardziej w Å›rodku, w bebechach, tym jakie wywoÅ‚ania w kernelu wykonujÄ…, jakie capatibilities wykorzystujÄ…, czy jakieÅ› Cloud Native Firewall'e wbudowane w kontener. WiÄ™c jest tego tam naprawdÄ™ sporo i jeÅ¼eli mamy budÅ¼et, warto siÄ™ tymi platformami zainteresowaÄ‡, bo one podchodzÄ… do tematu holistycznie. DajÄ… nam to z jednego miejsca.

**S:** JeÅ¼eli mamy duÅ¼Ä… organizacjÄ™, to bezpieczniki bÄ™dÄ… od nas tego wymagaÅ‚y, takiego holistycznego podejÅ›cia.

**Å:** Albo sami z tym przyjdÄ….

**S:** DokÅ‚adnie. Wymagania, ktÃ³re sobie okreÅ›limy albo okreÅ›li dziaÅ‚ bezpieczeÅ„stwa doskonale wymusi narzÄ™dzie. Dobrze. Teraz podsumujmy, bo nam siÄ™ trochÄ™ przedÅ‚uÅ¼a. To co mi siÄ™ nasuwa, to w jakim tempie przewidywania, o ktÃ³rych rozmawialiÅ›my w kontekÅ›cie technology footworksa, siÄ™ nagle zaczÄ™Å‚y ziszczaÄ‡. Tempo jest niesamowite, bo to co mÃ³wiliÅ›my, Å¼e bÄ™dzie siÄ™ dziaÅ‚o juÅ¼ siÄ™ dzieje obecnie tak naprawdÄ™. Jest spore ciÅ›nienie na bezpieczeÅ„stwo i na wszystkie inicjatywy.

**Å:** Tak. Footworks to pokazuje. Trzeba powiedzieÄ‡, Å¼e te kontenery, przestaÅ„my je nazywaÄ‡ new VM, parafrazujÄ…c rÃ³Å¼ne podejÅ›cia. Nie. To jest juÅ¼ commodity.

**S:** To jest totalne commodity. Jak jest uÅ¼ywane, jak czÄ™sto, jaki pÄ™d daÅ‚ temu wszystkiemu Kubernetes, to pokazuje, Å¼e nie ma juÅ¼ wyjÅ›cia, to nie jest zadanie czy powinniÅ›my, tylko jak powinniÅ›my go wykorzystywaÄ‡.

**Å:** Dobra. Å»eby coÅ› mieÄ‡ z tego odcinka, to dwie rzeczy. Po pierwsze: warto wrÃ³ciÄ‡ do korzeni, czyli zobaczyÄ‡ czym jest distrolles i wiedzieÄ‡, o co w tym chodzi. Å»eby mieÄ‡ Å›wiadomoÅ›Ä‡, jak bardzo zboczyliÅ›my. 

**S:** Tak

**Å:** Nie mÃ³wimy, Å¼e trzeba teraz wrÃ³ciÄ‡ i zaraz wdraÅ¼aÄ‡ from scratch. Nie, ale zobaczyÄ‡ o co w tym chodziÅ‚o.

**S:** I wchodzi to, Å¼e bÄ™dziemy do tego zmuszeni i jest to temat, ktÃ³ry wydaje siÄ™ byÄ‡ ugrzany, nie jest to coÅ›, przez co bÄ™dziemy musieli siÄ™ przebijaÄ‡, tylko zbieramy narzÄ™dzia i uÅ¼ywamy ich, i integrujemy je w CI. I to w wiÄ™kszoÅ›ci sytuacji dziaÅ‚a.

**Å:** WiÄ™c porada, jeÅ¼eli chodzi o bezpieczeÅ„stwo: zestaw proces zarzadzania obrazami i zacznij uÅ¼ywaÄ‡ narzÄ™dzi open-sourceowych, ktÃ³re wymieniliÅ›my w swoim procesie CI oraz skanowaniu Repo. Zestaw ten proces.
