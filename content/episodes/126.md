---
title: '#126 12-factor app - skamielina czy nadal Å¼ywe?
'
date: 2024-10-18T08:00:00+02:00
episode: "126"
tags: []
description: ""

# Jekyll compatibility fields (zachowane dla innych systemÃ³w)  
spreaker: 62398275
apple: "https://podcasts.apple.com/pl/podcast/12-factor-app-skamielina-czy-nadal-%C5%BCywe/id1477067604?i=1000673536870&uo=4"
spotify: "https://open.spotify.com/episode/25HVjn94fj1SMGwqVvZzb4"
youtube: "https://www.youtube.com/watch?v=D6L-tlycBgA"

# Hugo fields  
youtube_id: "D6L-tlycBgA"
youtube_url: "https://www.youtube.com/embed/D6L-tlycBgA?enablejsapi=1"

# Social media images (poprawione nazwy)
og_landscape: "/img/126-landscape.webp"
og_square: "/img/126-square.webp"

# Intro for episode
intro: |
  Czy **12-factor app** to _skamielina czy nadal Å¼ywe_? Patoarchitekci odkopujÄ… ten artefakt z 2011 roku. Czy te zasady przetrwaÅ‚y prÃ³bÄ™ czasu w erze mikroserwisÃ³w i konteneryzacji?
  
  Szymon i Åukasz analizujÄ… kaÅ¼dy z dwunastu punktÃ³w pod kÄ…tem aktualnoÅ›ci. Od _code base_ przez _port binding_ po _disposability_ - sprawdzajÄ…, co siÄ™ zmieniÅ‚o. DyskutujÄ… teÅ¼ o brakujÄ…cych elementach, takich jak _health checki_ i _toÅ¼samoÅ›Ä‡ aplikacji_.
  
  Zastanawiasz siÄ™, czy Twoja aplikacja jest _cloud-native ready_? PosÅ‚uchaj tego odcinka i zrÃ³b **audyt swojego kodu**. MoÅ¼e odkryjesz, Å¼e Twoja nowoczesna architektura to tak naprawdÄ™ _prehistoryczny zabytek_!
  

# Links for the episode
links:
  - title: "Pato Discord"
    url: "https://discord.gg/78zPcEaP22"
  - title: "Patoszkolenia"
    url: "https://patoarchitekci.io/szkolenia/"
  - title: "The Twelve-Factor App "
    url: "https://12factor.net/"
  - title: "Twelve-Factor App methodology - Wikipedia"
    url: "https://en.wikipedia.org/wiki/Twelve-Factor_App_methodology"
  - title: "Szkolenia"
    url: "https://protopia.tech/szkolenia"
  - title: "An illustrated guide to 12 Factor Apps"
    url: "https://www.redhat.com/en/blog/12-factor-app"

# Newsletter content (zachowane dla kompatybilnoÅ›ci)
newsletter: |
  CzeÅ›Ä‡! ğŸ‘‹ âœ¨
  
  Czy **12-factor app** to _skamielina czy nadal Å¼ywe_? Patoarchitekci odkopujÄ… ten artefakt z 2011 roku. Czy te zasady przetrwaÅ‚y prÃ³bÄ™ czasu w erze mikroserwisÃ³w i konteneryzacji?
  
  Szymon i Åukasz analizujÄ… kaÅ¼dy z dwunastu punktÃ³w pod kÄ…tem aktualnoÅ›ci. Od _code base_ przez _port binding_ po _disposability_ - sprawdzajÄ…, co siÄ™ zmieniÅ‚o. DyskutujÄ… teÅ¼ o brakujÄ…cych elementach, takich jak _health checki_ i _toÅ¼samoÅ›Ä‡ aplikacji_.
  
  Zastanawiasz siÄ™, czy Twoja aplikacja jest _cloud-native ready_? PosÅ‚uchaj tego odcinka i zrÃ³b **audyt swojego kodu**. MoÅ¼e odkryjesz, Å¼e Twoja nowoczesna architektura to tak naprawdÄ™ _prehistoryczny zabytek_!
  
  
  
  
  ## Odcinek na stronie i materiaÅ‚y do niego â¬‡ï¸
  
  â¡ï¸ [OdsÅ‚uchaj na stronie](https://patoarchitekci.io/126)
  â¡ï¸ [Spotify](https://open.spotify.com/episode/25HVjn94fj1SMGwqVvZzb4)
  â¡ï¸ [Apple Podcasts](https://podcasts.apple.com/pl/podcast/12-factor-app-skamielina-czy-nadal-%C5%BCywe/id1477067604?i=1000673536870&uo=4)
  â¡ï¸ [YouTube](https://www.youtube.com/watch?v=D6L-tlycBgA)
  
  ## Short & Sweet
  

  ### ğŸ¤ DoÅ‚Ä…cz do Discord ğŸ‘‰ [https://discord.gg/78zPcEaP22](https://discord.gg/78zPcEaP22)
  
  ### ğŸ¢ Patron odcinka
  SÅ‚uchasz PatoarchitektÃ³w dziÄ™ki PROTOPII â€“ firmie, w ktÃ³rej Åukasz i Szymon dziaÅ‚ajÄ… na co dzieÅ„, wspierajÄ…c zespoÅ‚y IT na kaÅ¼dym etapie: od projektowania, przez wdroÅ¼enia i migracje, aÅ¼ po optymalizacjÄ™ i zabezpieczenia. Oferujemy teÅ¼ mentoring i szkolenia dostosowane do potrzeb kaÅ¼dej firmy, niezaleÅ¼nie od wielkoÅ›ci. SprawdÅº nas: [protopia.tech](https://protopia.tech/)
  
  PS. Masz pytania? Pisz Å›miaÅ‚o po drugiej stronie to nie bot na bazie GPT czy Claude ğŸ˜
---

**Szymon Warda**: CzeÅ›Ä‡. SÅ‚uchacie PatoarchitektÃ³w. ProwadzÄ… Szymon Warda...

**Åukasz KaÅ‚uÅ¼ny**: I Åukasz KaÅ‚uÅ¼ny. Wszystkie linki do tego odcinka znajdziecie na Patoarchitekci.io lub gdzieÅ› tu na dole. Poradzicie sobie, bÄ™dzie spoko.

**Szymon Warda**: Dobrze. Szkolenia.

**Åukasz KaÅ‚uÅ¼ny**: Tak, szkolenia. WiÄ™c wpadnijcie na Patoarchitekci.io/szkolenia. Zobaczcie co w tym momencie jest dostÄ™pne, jak i na naszego Discorda, gdzie nawet do tego odcinka mogliÅ›cie dorzuciÄ‡ swoje pytania.

**Szymon Warda**: Ja dorzucÄ™ tylko to, Å¼e Åukaszowi w koÅ„cu udaÅ‚o siÄ™ zmolestowaÄ‡ mnie i jest termin na Observability, kolejna iteracja. Ale lista oczekujÄ…cych jest wiÄ™ksza niÅ¼ pojemnoÅ›Ä‡ szkolenia, tak Å¼e siÄ™ zalecam Å›pieszyÄ‡ raczej.

**Åukasz KaÅ‚uÅ¼ny**: Dobra, to sÅ‚uchajcie, dzisiaj jest odcinek, ja bym powiedziaÅ‚ trochÄ™ suchar, bo Szymon od dwÃ³ch lat uwaÅ¼aÅ‚ albo trzech, Å¼e po co w ogÃ³le o tym rozmawiaÄ‡, wiÄ™c bÄ™dzie ze mnie dzisiaj szydziÅ‚. Z naszej takiej codziennej praktyki w Protopii, jeÅ¼eli chodzi w szczegÃ³lnoÅ›ci o konsultacje typu gaszenie poÅ¼aru w czÄ™Å›ciach aplikacyjnych gdzieÅ› hostowaniach, to czÄ™Å›Ä‡ z tych nudnych rzeczy i tak jest standardem, ktÃ³ry jest nie do koÅ„ca speÅ‚niany. No wÅ‚aÅ›nie, to o czym dzisiaj?

**Szymon Warda**: The Twelve-Factor App. Ale tutaj Åukasz to jest obszar, w ktÃ³rym trzeba wprowadziÄ‡ trochÄ™ historii, bo jest to tak stara lista. WÅ‚aÅ›ciwie tak to trzeba nazywaÄ‡.

**Åukasz KaÅ‚uÅ¼ny**: To ja moÅ¼e przejdÄ™ od tego w ogÃ³le czym to jest. To byÅ‚ taki zbiÃ³r 12 praktyk, ktÃ³re w tamtym okresie, kiedy powstaÅ‚o, miaÅ‚o mÃ³wiÄ‡ o tym, jak projektowaÄ‡ nowoczesnÄ… aplikacjÄ™, jak wyglÄ…da skalowanie i hostowanie takiej aplikacji w rÃ³Å¼nych Å›rodowiskach. I jak popatrzymy, pewne rzeczy bÄ™dÄ… trÄ…caÄ‡ myszkÄ…, tak to nazwijmy, albo bÄ™dÄ… mogÅ‚y wyglÄ…daÄ‡ staro. Dobra i sama koncepcja jest z 2011 roku i powstaÅ‚a na bazie platformy Heroku. I to sÄ… takie. Heroku cloudem nigdy nie byÅ‚ w prawdziwym, byÅ‚ takim passem, ale no kurde, to siÄ™ w... MoÅ¼e lepiej nie wchodÅºmy.

**Szymon Warda**: MiaÅ‚ bardzo duÅ¼e wykorzystanie tak naprawdÄ™. W pewnych obszarach Heroku naprawdÄ™ byÅ‚ wykorzystywany i to dziaÅ‚aÅ‚o, dziaÅ‚aÅ‚o caÅ‚kiem przyjemnie, prosto, itd.

**Åukasz KaÅ‚uÅ¼ny**: Raczej byÅ‚o genialnÄ… platformÄ… dla Ruby'ego, Pythona, Node'a i w szczegÃ³lnoÅ›ci w momencie MVP bootstrapowania to byÅ‚o mega. No i Heroku wÅ‚aÅ›nie stworzyÅ‚o te 12 Factor App, Å¼eby ustandaryzowaÄ‡ wdraÅ¼anie tych aplikacji i przez to moÅ¼e wtedy ta dziaÅ‚ka startup'owa bardzo mocno siÄ™ rozlewaÅ‚a na Å›wiat, jeÅ¼eli chodzi o technologie. To poszÅ‚o to szeroko. I zapamiÄ™tajcie 2011 rok. No i co? PrzejdÅºmy z czego siÄ™ skÅ‚ada.

**Szymon Warda**: WiÄ™c pierwsze jest moim ulubieÅ„cem generalnie, ktÃ³ry chyba Å›wiadczy o tym, jak bardzo to wali myszkÄ…. I co wiÄ™cej, czemu ja do koÅ„ca nie widzÄ™, co tu jest do rozmowy tak naprawdÄ™, Å¼eby trzymaÄ‡ code base w repozytorium.

**Åukasz KaÅ‚uÅ¼ny**: Tak i to jest w ogÃ³le pierwsza rzecz, jak zobaczycie, code base. Ja, jak sobie to spisywaÅ‚em, przygotowywaÅ‚em siÄ™ do odcinka, Szymon, to zauwaÅ¼, Å¼e Git wtedy byÅ‚ nowoÅ›ciÄ… w korpach.

**Szymon Warda**: Ok, ale Git byÅ‚ nowoÅ›ciÄ…. To siÄ™ zgadza, ale byÅ‚o duÅ¼o innych form repozytoriÃ³w i mimo wszystko w 2011 roku to wersjonowanie kodu nie byÅ‚o nowoÅ›ciÄ….

**Åukasz KaÅ‚uÅ¼ny**: Ale nie byÅ‚o teÅ¼, raczej nowoÅ›ciÄ… nie, ale dopiero stawaÅ‚o siÄ™ szeroko przestrzegane.

**Szymon Warda**: MoÅ¼e inaczej, to teÅ¼ jest waÅ¼ne, to co powiedziaÅ‚eÅ› odnoÅ›nie historii. Oni to robili dla startupowcÃ³w czÄ™sto, ludzi, Heroku teÅ¼ byÅ‚o kierowane do ludzi, ktÃ³rzy nie do koÅ„ca kodowali. Jak siÄ™ zaczÄ…Å‚ Node rozwijaÄ‡, to masÄ™ byÅ‚o ludzi, ktÃ³rzy po prostu zaczynali siÄ™ tego uczyÄ‡ i faktycznie nie mieli tych praktyk. Co jest jeszcze waÅ¼ne odnoÅ›nie code base? Tam jest napisane, na stronie 12 Factor App, Å¼e jest single repo. Co teÅ¼ jest takÄ… ciekawostkÄ…, bo zakÅ‚ada wÅ‚aÅ›nie pojedyncze repo, co juÅ¼ teraz odchodzimy, zmieniamy, to juÅ¼ nie jest takie wykute w skale.

**Åukasz KaÅ‚uÅ¼ny**: Wiesz co? Pojedyncze repo, w zaleÅ¼noÅ›ci jak pÃ³jdziesz tam, czÄ™Å›Ä‡ interpretacji, bo ja sobie pogrzebaÅ‚em, to teÅ¼ ta oryginalna jest taka, Å¼e jedna aplikacja, jedno repozytorium. To byÅ‚o oryginalne stwierdzenie tutaj stojÄ…ce za Twelve-Factor.

**Szymon Warda**: MoÅ¼emy siÄ™ przeciskaÄ‡. Na 12factor.net jest tam zdanie: single repo.

**Åukasz KaÅ‚uÅ¼ny**: Dobra, odsyÅ‚amy do odcinka o repo, bo kiedyÅ› taki nagraliÅ›my w kontekÅ›cie mikroserwisÃ³w.

**Szymon Warda**: Tak, faktycznie byÅ‚o. No racja.

**Åukasz KaÅ‚uÅ¼ny**: Dobra. NastÄ™pnÄ… rzeczÄ… sÄ… zaleÅ¼noÅ›ci: jawnie deklaruj i izoluj zaleÅ¼noÅ›ci. I tutaj chodziÅ‚o o to, Å¼eby jawnie wpisywaÄ‡ wszystkie zaleÅ¼ne biblioteki i inne rzeczy. Jak przeÅ‚oÅ¼ymy na dzisiejszy czas, to wszystkie zaleÅ¼noÅ›ci, ktÃ³re moÅ¼emy zrobiÄ‡ gdzieÅ› tam w NPM-ie, requirements od Pythona, NuGet, to jest juÅ¼ standard, o ktÃ³rym nie myÅ›limy.

**Szymon Warda**: Tak, ale faktycznie w 2011 roku na przykÅ‚ad czÄ™Å›Ä‡ jÄ™zykÃ³w nie miaÅ‚o wsparcia do tego, Å¼eby pobieraÄ‡ zaleÅ¼noÅ›ci automatycznie. Z tym siÄ™ zgodzÄ™ jak najbardziej. I byÅ‚o to kopiowanie po prostu DLL-ek. Jak najbardziej to siÄ™ odbywaÅ‚o.

**Åukasz KaÅ‚uÅ¼ny**: O tak, przypomniaÅ‚aÅ› mi .Netowego gaca.

**Szymon Warda**: Tak, dokÅ‚adnie, o tym teÅ¼ wÅ‚aÅ›nie chciaÅ‚am powiedzieÄ‡. WiÄ™c to ma jakiÅ› tam sen. Obecnie to jest...

**Åukasz KaÅ‚uÅ¼ny**: Wiesz co Szymon? CzÄ™Å›ciowo to rozwinÄ™liÅ›my teÅ¼ na infrastrukturÄ™, bo zauwaÅ¼, powiedzieliÅ›my: to powstaÅ‚o przed czasami konteneryzacji i Kubernetes i wszystkich serverlessowych i innych jawnych modeli. I zobacz.

**Szymon Warda**: To teÅ¼ siÄ™ zgadza.

**Åukasz KaÅ‚uÅ¼ny**: Zobacz, Å¼e tutaj Dockerfile na przykÅ‚ad wchodzi w grÄ™, w ktÃ³rym teÅ¼ teraz juÅ¼ jawnie tak by design wrzucasz, w zaleÅ¼noÅ›ci, nawet od strony infry pod spodem systemu operacyjnego.

**Szymon Warda**: Tak. Dockerfile jest dobrym przykÅ‚adem, ale bardziej Twelve-Factor mÃ³wi o tym, Å¼eby mieÄ‡ Dockerfile'a, a nie Å¼eby pushowaÄ‡ docker image, bo to jest bardziej ta bajka. Tak Å¼eby byÅ‚o to porozdzielane. ZresztÄ… o czym w ogÃ³le mÃ³wiÄ… kolejne obszary i kolejne punkty tego Twelve-Factora? Dalej, konfiguracja. Opowiadaj.

**Åukasz KaÅ‚uÅ¼ny**: Dobra. I tu zaczyna siÄ™ zabawa, jak zestarzaÅ‚o siÄ™ to bardzo. ChociaÅ¼ nie, to zaleÅ¼y. Tu jest bardzo mocne "to zaleÅ¼y", bo chodziÅ‚o o to, Å¼eby przechowywaÄ‡ konfiguracjÄ™ w Å›rodowisku i konfiguracja ogÃ³lnie per Å›rodowisko jest ok, must have. I tutaj jak pÃ³jdziemy w detale, to mÃ³wiÅ‚o siÄ™ o tym, Å¼eby to byÅ‚y zmienne Å›rodowiskowe.

**Szymon Warda**: No bo Linux.

**Åukasz KaÅ‚uÅ¼ny**: Tak, Linux i to byÅ‚o pierwotne, plik dotenv i jedziemy, tudzieÅ¼ podane do procesu. A zobaczcie, w dzisiejszych czasach to jest czÄ™sto nadal, powrÃ³ciliÅ›my do plikÃ³w konfiguracyjnych. JeÅ¼eli pÃ³jdziemy dalej to jakieÅ› poÅ›wiadczenia sÄ… mapowane z jakichÅ› vaultÃ³w, keyvaultÃ³w, KMS-Ã³w natywnie pobierane przez apkÄ™. Czy z drugiej strony mamy soft do feature managementu i configuration managementu. Nie wiem jak Azure App Configuration lub inne tego typu rozwiÄ…zania.

**Szymon Warda**: Znaczy ja tu jednÄ… rzecz obroniÄ™. I czemu to siÄ™ trochÄ™ zestarzaÅ‚o? Bo kiedyÅ› konfiguracje to byÅ‚y proste klucz-wartoÅ›Ä‡. Teraz coraz czÄ™Å›ciej mÃ³wimy o konfiguracji w formie JSON i to wpychanie w zmiennÄ… Å›rodowiskowÄ… juÅ¼ nie jest takie miÅ‚e i przyjemne. Co wiÄ™cej, czÄ™sto mamy tak, Å¼e mamy konfiguracjÄ™, a dopiero w podsekcjach chcemy je zastÄ…piÄ‡ odpowiednimi obszarami. WiÄ™c to siÄ™ zrobiÅ‚o duÅ¼o trudniejsze. Znowu gdzieniegdzie chcielibyÅ›my decydowaÄ‡, mamy Fluxa, ktÃ³rego tak bardzo lubiÄ™, ktÃ³ry generalnie czÄ™Å›ciowo nakÅ‚ania do tego wÅ‚aÅ›nie, Å¼eby.. W ogÃ³le problem jest z Kubernetesem wÅ‚aÅ›nie, Å¼e wstrzykiwanie tych sekretÃ³w i co tam dalej z nimi robiÄ‡ w tym repo. WiÄ™c dyskusyjne bym powiedziaÅ‚. Obecnie, czy to powinno byÄ‡ w Å›rodowisku, czy powinno byÄ‡ wstrzykiwane przez providerÃ³w typu keyvault? No fajnie by byÅ‚o tak naprawdÄ™. To w tym momencie rodzi siÄ™ problem z zarzÄ…dzaniem tym keyvaultem, w ktÃ³rym sÄ… wszystkie te sekrety, no nie?

**Åukasz KaÅ‚uÅ¼ny**: Trzeba to mieÄ‡. SposÃ³b dostarczenia to jest duÅ¼e "to zaleÅ¼y".

**Szymon Warda**: Znaczy ogÃ³lnie, bo jaka byÅ‚a idea za tym? Idea za tym byÅ‚a taka, Å¼eby sekrety nie byÅ‚y w repo, bo o to chodziÅ‚o tak naprawdÄ™.

**Åukasz KaÅ‚uÅ¼ny**: I druga rzecz, Å¼eby daÅ‚o siÄ™ skonfigurowaÄ‡ w ogÃ³le aplikacjÄ™, a nie hardcore'owana.

**Szymon Warda**: I opcja, Å¼eby wywaliÄ‡ sekrety z repo jest jak najbardziej sÅ‚uszna, Å¼eby nie byÅ‚o. W ktÃ³rym kierunku to dalej pÃ³jdzie? To siÄ™ dalej rozwija, bo rÃ³Å¼ne zespoÅ‚y majÄ… rÃ³Å¼ne potrzeby, prawda? TeÅ¼ zaleÅ¼y od organizacji.

**Åukasz KaÅ‚uÅ¼ny**: Kolejne sÄ… Baking Services, czyli usÅ‚ugi wspierajÄ…ce. I oryginalnie byÅ‚o: traktuj usÅ‚ugi wspierajÄ…ce jako doÅ‚Ä…czone zasoby, tak to moÅ¼na byÅ‚oby skwitowaÄ‡.

**Szymon Warda**: I ja to rozwinÄ™. Bo o co chodzi? Chodzi o to, Å¼eby zasoby zewnÄ™trzne, czyli generalnie podajemy po prostu URL do bazy, podajemy connection stringa, a nie jest to hardcodowane w aplikacji jako kiedyÅ› byÅ‚o.

**Åukasz KaÅ‚uÅ¼ny**: Albo odpalane razem z aplikacjÄ….

**Szymon Warda**: TeÅ¼ druga opcja, dokÅ‚adnie tak. ZakÅ‚adamy, Å¼e to leci po localhost, itd. W sensie rozbijamy nasz system na poszczegÃ³lne serwisy, ktÃ³re mogÄ… byÄ‡ niezaleÅ¼nie hostowane.

**Åukasz KaÅ‚uÅ¼ny**: I to po dziÅ› dzieÅ„ ma sens i to nie ma co tutaj z tym dyskutowaÄ‡.

**Szymon Warda**: Tak.

**Åukasz KaÅ‚uÅ¼ny**: Dobra, co mamy nastÄ™pne?

**Szymon Warda**: Build, release, run - budowanie, wydawani, uruchamianie. To siÄ™ zestarzaÅ‚o bardzo mocno, bo chodzi o to, Å¼eby po prostu porozdzielaÄ‡ te kroki.

**Åukasz KaÅ‚uÅ¼ny**: Inaczej. Przedpotopowe podejÅ›cie do CI/CD.

**Szymon Warda**: TrochÄ™ tak. Wiesz co, wydaje mi siÄ™, Å¼e teÅ¼ trochÄ™ podejÅ›cie do tego, co robiÄ‡ z takimi programami, ktÃ³re po prostu jak je uruchamiasz, to one nagle zaczynajÄ… siÄ™ dopiero przygotowywaÄ‡ do uruchomienia. TeÅ¼ moÅ¼e byÄ‡ ta pozostaÅ‚oÅ›Ä‡.

**Åukasz KaÅ‚uÅ¼ny**: Tak, samo jest sensowne, Å¼ebyÅ› miaÅ‚ oddzielnie builda, a release to jest wdroÅ¼enie odpowiedniego builda. I run to jest de facto uruchomienie tego release'u. To gdzieÅ› samo technicznie ma sens.

**Szymon Warda**: Tak. I kolejne lecimy - procesy.

**Åukasz KaÅ‚uÅ¼ny**: A ja bym siÄ™, sÅ‚uchaj, jest tak, procesy, czyli uruchamiaj aplikacje jako jeden lub wiÄ™cej bezstanowych procesÃ³w. I tu sÄ… dwie rzeczy. Wtedy nie byÅ‚o kontenerÃ³w, wiÄ™c proces byÅ‚ normalnÄ… funkcjÄ… hostowania.

**Szymon Warda**: Ale kontener jest podobnym poziomem izolacji. Znaczy trochÄ™ niÅ¼szym de facto.

**Åukasz KaÅ‚uÅ¼ny**: Tak, ale ciÄ…gle mÃ³wi, Å¼ebyÅ›my odpalali tam powiedzmy jeden gÅ‚Ã³wny proces, a pobocznych nie hostowali w tym samym kontenerze, tylko uÅ¼ywali sidecarÃ³w. WiÄ™c od tej strony to nadal ma sens.

**Szymon Warda**: Czy to nadal ma sens? I jeÅ¼eli mÃ³wimy o tym, co jest Å‚amane tak naprawdÄ™, to to akurat zdarza siÄ™, Å¼e jest Å‚amane. BywajÄ… rÃ³Å¼ne pomysÅ‚y: a co tu moÅ¼na by pokolejkowaÄ‡? Co tu moÅ¼na by zrobiÄ‡? Napiszmy wÅ‚asny system DotXYZ.

**Åukasz KaÅ‚uÅ¼ny**: Tak, albo Supervisord, Å¼eby odpaliÄ‡ w jednym kontenerze wiele procesÃ³w, bo mamy jakieÅ› gÃ³wno.

**Szymon Warda**: Jeszcze jeden element doprecyzujÄ™ tutaj, bo tu jest takie zaÅ‚oÅ¼enie, Å¼e to sÄ… procesy, ktÃ³re majÄ… share nothing architecture, czyli niczym siÄ™ nie dzielÄ…, czyli nie majÄ… jakiegoÅ› tam... Tu gÅ‚Ã³wnie chodziÅ‚o o to, Å¼e one nie wymieniajÄ… siÄ™ pamiÄ™ciÄ…, Å¼e nie majÄ… jakiegoÅ› streama, z ktÃ³rego...

**Åukasz KaÅ‚uÅ¼ny**: Nie ma Å¼adnego IPC i innych takich elementÃ³w.

**Szymon Warda**: DokÅ‚adnie tak. Czyli po prostu nie nadpisujÄ… sobie, nie mamy problemu rÃ³wnolegÅ‚oÅ›ci. To ma rÄ™ce, ma nogi tam, gdzie powinno mieÄ‡.

**Åukasz KaÅ‚uÅ¼ny**: Dobra, siÃ³demka jest oczywistoÅ›ciÄ….

**Szymon Warda**: Tak, siÃ³demka, czyli mianowicie port binding, czyli okreÅ›lanie, ktÃ³re porty sÄ… wykorzystywane. W czasach Docker to tak ciÄ™Å¼ko inaczej, to wymusza.

**Åukasz KaÅ‚uÅ¼ny**: Ale niekiedy jak ktoÅ› nie pamiÄ™ta na czym chodzi jego aplikacja, troubleshooting jest ciekawy.

**Szymon Warda**: Jest to po prostu szukanie dwukropka z numerkiem.

**Åukasz KaÅ‚uÅ¼ny**: Dobra, nastÄ™pna rzecz i to jest, ja siÄ™ nad tym zastanawiaÅ‚em i to nadal ma sens, bo disposibility, czyli jednorazowoÅ›Ä‡, efemerycznoÅ›Ä‡ pojedynczej instancji, maksymalizuj odpornoÅ›Ä‡ przez szybki start i wÅ‚aÅ›nie bezproblemowe wyÅ‚Ä…czanie, wÅ‚Ä…czanie.

**Szymon Warda**: Tak. Znowu, to jest wszystko Å‚adnie, wszystko piÄ™kne, Å¼e wÅ‚Ä…czamy, wyÅ‚Ä…czamy. Jednak miaÅ‚eÅ› sytuacje, w ktÃ³rych musiaÅ‚eÅ› na przykÅ‚ad dodawaÄ‡ proby, musiaÅ‚eÅ› dodawaÄ‡ sytuacje w Kubernetesie, Å¼e aplikacji trochÄ™ chwilÄ™ zajmuje wyÅ‚Ä…czenie i wÅ‚Ä…czenie.

**Åukasz KaÅ‚uÅ¼ny**: Bezproblemowe, wiÄ™c graceful shutdown. ZauwaÅ¼, oryginalnie jest, ja tutaj tak to skrÃ³ciÅ‚em, ale oryginalnie jest w tym greatfull shutdown jako przy disposibility, masz w oryginale graceful shutdown, czyli czyste wyÅ‚Ä…czanie siÄ™, Å¼eby aplikacja siÄ™ prawidÅ‚owo sama skÅ‚adaÅ‚a. Nie ma tutaj czasu, jest szybki start i zÅ‚oÅ¼enie siÄ™ potem prawidÅ‚owe, wiÄ™c to jest nadal aktualne. Szybki start moÅ¼e nie jest juÅ¼ takim problemem, ale graceful shutdown, no sorry, w praktyce nadal sÄ… z tym jazdy jeÅ¼eli proby sÄ… Åºle poustawiane w Kubernetesch na przykÅ‚ad, czy innych cloudach.

**Szymon Warda**: Proby, ogÃ³lnie czasy wyÅ‚Ä…czenia zajmujÄ… trochÄ™ dÅ‚uÅ¼ej, bo to teÅ¼ jest takie... SÄ… sytuacje, w ktÃ³rych aplikacja po prostu potrzebuje coÅ› wiÄ™cej zrobiÄ‡.

**Åukasz KaÅ‚uÅ¼ny**: I wiesz co? W dzisiejszych czasach jest to spoko, pod warunkiem, Å¼e zrobisz healthchecki. Do healthcheckÃ³w jeszcze przejdziemy.

**Szymon Warda**: BÄ™dzie w sekcji brakujÄ…cych rzeczy. Dobra, to Å›migamy do kolejnego. Dev/prod partiality, czyli rozdzielenie dev/proda.

**Åukasz KaÅ‚uÅ¼ny**: Jego wzglÄ™dna rÃ³wnoÅ›Ä‡.

**Szymon Warda**: Ta, dev/prod parity. Chodzi o to generalnie, Å¼eby one byÅ‚y do siebie w miarÄ™ podobne, co jest bardzo waÅ¼ne i Å¼eby byÅ‚y rozdzielone. I tu bym siÄ™ zgodziÅ‚, Å¼e z tym faktycznie jest najwiÄ™kszy problem obecnie, jeÅ¼eli juÅ¼ mamy mÃ³wiÄ‡.

**Åukasz KaÅ‚uÅ¼ny**: Å»e nadal to wystÄ™puje.

**Szymon Warda**: Nadal wystÄ™puje albo nadal wystÄ™puje taka opcja, Å¼e na przykÅ‚ad ten dev albo test jest kompletnie inny od proda, to, Å¼e utrzymanie ich, Å¼eby byÅ‚y podobne po prostu nie wystÄ™puje. Tego developerzy nie pilnujÄ…, a potem na to psioczÄ…, Å¼e coÅ› im nie dziaÅ‚a. To wynika gÅ‚Ã³wnie z lenistwa po prostu, tu nie ma wytÅ‚umaczenia.

**Åukasz KaÅ‚uÅ¼ny**: Dobra, kolejne bÄ™dzie - concurrency, bo pominÄ™liÅ›my to. Czyli wspÃ³Å‚bieÅ¼noÅ›Ä‡ to chyba zÅ‚e okreÅ›lenie bÄ™dzie, Å¼eby zrÃ³wnoleglaÄ‡ procesy. Czyli Å¼e jeÅ¼eli potrzebujemy siÄ™ skalowaÄ‡, to powinniÅ›my robiÄ‡ to horyzontalnie.

**Szymon Warda**: Zgadza siÄ™. Znowu rÃ³Å¼ne aplikacje majÄ… rÃ³Å¼ne charakterystyki, rÃ³Å¼ne charakterystyki jeÅ¼eli chodzi o skalowanie, dziaÅ‚anie i optymalny rozmiar. WiÄ™c to do koÅ„ca tak nie wyglÄ…da. I to teÅ¼ siÄ™...

**Åukasz KaÅ‚uÅ¼ny**: ZestarzaÅ‚o inaczej.

**Szymon Warda**: ZestarzaÅ‚o siÄ™ inaczej, poniewaÅ¼ po pierwsze mamy caÅ‚e taski w .Necie i te nasze maszyny wirtualne, ktÃ³re gdzieÅ› tam, znaczy maszyny wirtualne, runtime'y, ktÃ³re wykonujÄ… nasz kod, one duÅ¼o wiÄ™cej robiÄ…, Å¼e to niekoniecznie muszÄ… byÄ‡ procesy, mogÄ… to byÄ‡ wÄ…tki albo coÅ› zbudowane na bazie wÄ…tkÃ³w.

**Åukasz KaÅ‚uÅ¼ny**: Wiesz co? Nie i zobacz, Å¼e teraz ta caÅ‚oÅ›Ä‡, ja bym to wyrzuciÅ‚ do kosza i powiedziaÅ‚ o horyzontalnym skalowaniu instancji aplikacji w tym miejscu juÅ¼.

**Szymon Warda**: To w tym momencie pokrywamy siÄ™ bardzo mocno z procesami tak naprawdÄ™, bo te punkty sÄ… do siebie bardzo, bardzo podobne, jedno i drugie.

**Åukasz KaÅ‚uÅ¼ny**: Tylko wiesz i wtedy to historycznie... Raczej nadal mÄ™czysz siÄ™ w niektÃ³rych rozwiÄ…zaniach na temat skalowania siÄ™ workerami. WeÅºmy na przykÅ‚ad Node'a. Nadal jeden tam, powiedzmy jeden CPU, jeden core, jeden worker, sÄ… nadal takie rzeczy w konfiguracji.

**Szymon Warda**: Zgadza siÄ™, jak najbardziej. Redis, w ogÃ³le teraz pozmieniali, to inna bajka. Dobra, leÄ‡my dalej. Logi.

**Åukasz KaÅ‚uÅ¼ny**: Logi. Traktuj logi jako strumieÅ„ zdarzeÅ„, czyli wysyÅ‚aj na stdout, stderror.

**Szymon Warda**: Tak. OgÃ³lnie chodzi o to, Å¼eby aplikacja nie martwiÅ‚a siÄ™ tym jak zapisywaÄ‡ logi, tylko po prostu: wyrzucaj, w porzÄ…dku.

**Åukasz KaÅ‚uÅ¼ny**: WiÄ™c inaczej, ma sens nadal.

**Szymon Warda**: Raczej ktoÅ› musiaÅ‚by siÄ™ natrudziÄ‡, Å¼eby zrobiÄ‡ inaczej.

**Åukasz KaÅ‚uÅ¼ny**: Raczej tak, bo potrzebowaÅ‚byÅ› sidecara, przestrzeÅ„ tymczasowÄ… na pliki. Ewentualnie moÅ¼na teÅ¼ waliÄ‡ bezpoÅ›rednio z logera, z aplikacji do jakiejÅ› usÅ‚ugi.

**Szymon Warda**: Albo samemu otwieraÄ‡ plik i tam pisaÄ‡, to teÅ¼ by byÅ‚o maÅ‚o Å‚adnie. Ale niewaÅ¼ne. PrzejdÅºmy - admin processes, czyli to, Å¼eby rzeczy typu migracje danych, itd., odpalaÄ‡ jako osobne procesy.

**Åukasz KaÅ‚uÅ¼ny**: I to jest, jak porÃ³wnasz, to jest chyba, kiedy zaczynasz robiÄ‡ to prawidÅ‚owo, job na Kubernetesie albo na CI/CD staje siÄ™ normÄ….

**Szymon Warda**: Tak i ja zastanawiam siÄ™ tak naprawdÄ™, co z takimi sytuacjami, kiedy aplikacja wstaje, patrzy, Å¼e schemat jest inny i zaczyna siÄ™ migracja, bo takie sytuacje zdarzajÄ… siÄ™ jak najbardziej.

**Åukasz KaÅ‚uÅ¼ny**: Bo zapomniaÅ‚eÅ› przeÅ‚Ä…czyÄ‡ domyÅ›lnej flagi.

**Szymon Warda**: Tak. Albo, Å¼eby tak byÅ‚o, czÄ™sto jest tak, Å¼e takie jest dziaÅ‚anie niepoÅ¼Ä…dane tak naprawdÄ™, czyli Å¼e developerzy zakÅ‚adajÄ…, Å¼e tak powinno byÄ‡. Gorzej jak potem, bo to lokalnie dziaÅ‚a Å›wietnie, prawda?

**Åukasz KaÅ‚uÅ¼ny**: To czemu na produkcji nie bÄ™dzie dziaÅ‚aÄ‡.

**Szymon Warda**: A na produkcji potem wÅ‚Ä…czajÄ… to, skalujÄ… to do zaÅ‚Ã³Å¼my trzech instancji i patrzÄ… czemu majÄ… logi na bazie albo bÅ‚Ä™dy. I nagle trzeba duÅ¼o bardziej skomplikowany flow jeÅ¼eli chodzi o dziaÅ‚anie dorobiÄ‡. I wydaje mi siÄ™, Å¼e ze wszystkich to ten element jest chyba najbardziej dyskusyjny w tej sytuacji. Jak to tam powinno dziaÅ‚aÄ‡ i co z tym zrobiÄ‡?

**Åukasz KaÅ‚uÅ¼ny**: Raczej sam kierunek, Å¼e jest to w ogÃ³le wskazane, to siÄ™ nie zestarzaÅ‚o.

**Szymon Warda**: Znaczy jedna rzecz jest waÅ¼na tutaj, to jest myÅ›l tego punktu jest to, Å¼e to powinno byÄ‡ w repo. Te taski migracyjne powinny byÄ‡ w repo, nie obok tak naprawdÄ™. I to siÄ™ przyjÄ™Å‚o. Ja juÅ¼ widzÄ™, Å¼e tak. Rzadko widzÄ™, Å¼eby to byÅ‚o Å‚amane. JuÅ¼ maÅ‚o kto chce rÄ™cznie SQL-a pisaÄ‡, bo teÅ¼ chyba maÅ‚o kto umie tego SQL-a napisaÄ‡.

**Åukasz KaÅ‚uÅ¼ny**: Jedno. I drugie, Å¼eby te skrypty konsolowe wÅ‚aÅ›nie, to wszystko byÅ‚o zdefiniowane i odpalane oddzielnie, a nie przez aplikacjÄ™ samÄ… w sobie. DokÅ‚adnie.

**Szymon Warda**: Dobra, to teraz przejdÅºmy do tego, czego brakuje.

**Åukasz KaÅ‚uÅ¼ny**: Dobra, ja bym pierwsze wrzuciÅ‚ z praktyki, rzecz, z ktÃ³rÄ… chyba mamy najwiÄ™cej na co dzieÅ„ w konsultacjach, to sÄ… healthchecki po dziÅ› dzieÅ„.

**Szymon Warda**: Znaczy to jest naprawdÄ™ fascynujÄ…ce, poniewaÅ¼ to jest chyba jedna z rzeczy, ktÃ³ra jest na dokumentacji Kubernetes i w ogÃ³le na szkoleniach jako takich.

**Åukasz KaÅ‚uÅ¼ny**: Raczej kaÅ¼dy cloud provider ma na temat aplikacji, jeÅ¼eli sÄ… kontenery albo hosting aplikacji, jest przynajmniej jeden healthcheck wymieniony.

**Szymon Warda**: Zgadza siÄ™ i jest to najczÄ™Å›ciej Å‚amane. To naprawdÄ™ jest ciekawe jak to dziaÅ‚a. Bez healthcheckÃ³w to nie ma opcji, Å¼eby ta aplikacja w jakimkolwiek klastrze zadziaÅ‚aÅ‚a dobrze.

**Åukasz KaÅ‚uÅ¼ny**: WiÄ™c dla przypomnienia, mamy dwa podstawowe healthchecki, jak popatrzymy, w szczegÃ³lnoÅ›ci w kontekÅ›cie graceful shutdown, tego disposability caÅ‚ego. Czyli jest to liveness, czyli endpoint w aplikacji, ktÃ³ry mÃ³wi czy aplikacja w ogÃ³le Å¼yje. I jeÅ¼eli przestanie odpowiadaÄ‡, to naleÅ¼y zrestartowaÄ‡ aplikacjÄ™. Drugi to jest readiness i on jest mega waÅ¼ny, bo mÃ³wi czy moÅ¼na, jeÅ¼eli aplikacja coÅ› wystawia, jakieÅ› API, cokolwiek, to odpowiada czy aplikacja jest juÅ¼ gotowa do dziaÅ‚ania i czy moÅ¼na dopuÅ›ciÄ‡ do niej ruch.

**Szymon Warda**: DokÅ‚adnie tak. Tam jeszcze majÄ… oczywiÅ›cie odpowiednie delay'e na wstanie pÃ³Åºniejsze, tego trochÄ™ tam jest, ale to jest dalej temat, ktÃ³ry omawiamy na szkoleniu w ciÄ…gu pÃ³Å‚ godziny, jakoÅ› tak.

**Åukasz KaÅ‚uÅ¼ny**: Ale kwintesencjÄ… readinessa i graceful shutdown jest to, Å¼e kiedy zaczyna siÄ™ shutdown aplikacji, readiness powinien siÄ™ przeÅ‚Ä…czyÄ‡ na odpowiadanie, Å¼e juÅ¼ nie jest gotowe, obsÅ‚uÅ¼yÄ‡ do koÅ„ca requesty i aplikacja powinna siÄ™ Å‚adnie zÅ‚oÅ¼yÄ‡ i nie dostawaÄ‡ juÅ¼ requestÃ³w.

**Szymon Warda**: A wÅ‚aÅ›nie, mÃ³wimy o szkoleniach, mÃ³wimy o szkoleniach, to jakby ktoÅ› byÅ‚ zainteresowany, to jeszcze Protopia Tech i tam mamy juÅ¼ takÄ… peÅ‚nÄ…, peÅ‚nÄ… ofertÄ™ szkoleÅ„.

**Åukasz KaÅ‚uÅ¼ny**: Dobra, i ostatni typ healthchecku to startup probe. Nie uÅ¼ywajcie tego. Czyli aplikacja wolno wstaje i powinno siÄ™ sprawdzaÄ‡, czy ona juÅ¼ wstaÅ‚a czy nie.

**Szymon Warda**: Ma to swoje zastosowanie, zdecydowanie. Ma swoje zastosowanie, waÅ¼niejsze sÄ… odpowiednie ustawienie delay, wedÅ‚ug mnie. Dobra, to lecimy dalej. Ty wypunktowaÅ‚eÅ›, Å¼eby nie byÅ‚o, Åukasz tutaj przygotowaÅ‚ gÅ‚Ã³wnie materiaÅ‚ pod to, bardzo, bardzo chciaÅ‚ zrobiÄ‡ odcinek, wiÄ™c jak najbardziej, wzorce zwiÄ™kszajÄ…ce niezawodnoÅ›Ä‡. Mi siÄ™ tylko tutaj uÅ›miecha generalnie nasza dyskusja o tym, Å¼e circuit breaker powinien byÄ‡. JeÅ›li chodzi o circuit breaker...

**Åukasz KaÅ‚uÅ¼ny**: Retry'e, outbox pattern.

**Szymon Warda**: I ciekawe jest to, Å¼e dodaÅ‚eÅ› outboxa, bo retry'e majÄ… swÃ³j sens, czÄ™sto w ogÃ³le biblioteki juÅ¼ majÄ… to wbudowane. Outboxa najczÄ™Å›ciej widzÄ™, Å¼e go nie ma i najczÄ™Å›ciej teÅ¼ widzÄ™ opcjÄ™, Å¼e ludzie nie wiedzÄ…, Å¼e on powinien byÄ‡. To jest najwiÄ™kszy problem tak naprawdÄ™.

**Åukasz KaÅ‚uÅ¼ny**: Tak, albo zakÅ‚adamy, Å¼e kolejka zawsze bÄ™dzie dziaÅ‚aÄ‡.

**Szymon Warda**: O jak siÄ™ bardzo mylimy. Albo co wiÄ™cej, Å¼e zawsze bÄ™dziemy mogli do niej wysÅ‚aÄ‡ wiadomoÅ›ci, Å¼e zawsze przyjmie, albo Å¼e zawsze odbierzemy, albo Å¼e nie myÅ›limy o tym, Å¼e to jest transakcja, czyli Å‚Ä…czymy jedno z drugim.

**Åukasz KaÅ‚uÅ¼ny**: Te trzy podstawowe wzorce, ktÃ³re wiÄ™kszoÅ›Ä‡ bibliotek i frameworkÃ³w ma w sobie w jakiÅ› sposÃ³b zopiniowane jak tego uÅ¼yÄ‡.

**Szymon Warda**: DoprecyzujÄ™ tak naprawdÄ™. WiÄ™kszoÅ›Ä‡ bibliotek do Å‚Ä…czenia z bazami danych tak naprawdÄ™. MoÅ¼e niektÃ³re, odnoÅ›nie kolejek, przy reszcie juÅ¼ tego tak bardzo nie widzÄ™.

**Åukasz KaÅ‚uÅ¼ny**: W sensie masz zawsze jakiÅ› dodatek. W springu masz dodatek do zrobienia circuit breakera, retry'a, w .Necie masz... Inaczej, kaÅ¼de z tych rozwiÄ…zaÅ„ ma jakiÅ› dodatek, ktÃ³ry jest w danym Å›rodowisku uznany, Å¼e ten jest dobry.

**Szymon Warda**: Z tym siÄ™ zgodzÄ™, ale bardziej chodzi mi o takÄ… opcjÄ™, Å¼e na przykÅ‚ad Å‚Ä…czysz siÄ™ z bazÄ… i tam masz parametr, np. ile masz retry'i zrobiÄ‡, to z reguÅ‚y juÅ¼ jest. Przy innych rzeczach jest to czÄ™sto pomijane, co jest trochÄ™ upierdliwe. Dobra, kolejny obszar to jest, rzuciÅ‚eÅ› ciekawÄ… rzecz, bo to jest zarzÄ…dzanie toÅ¼samoÅ›ciÄ… aplikacji.

**Åukasz KaÅ‚uÅ¼ny**: I ogÃ³lnie toÅ¼samoÅ›ciÄ….

**Szymon Warda**: Tak. Mam trochÄ™ miks czy to powinno byÄ‡ w takim, powiedzmy, nowym Twelve-Factorze, czy jakkolwiek byÅ›my go nazwali. Bo fajnie, tylko co, mÃ³wimy nagle, Å¼e wszyscy muszÄ… lecieÄ‡ po OAuth, itd.?

**Åukasz KaÅ‚uÅ¼ny**: Wiesz co, raczej bardziej jak lecimy z user to service. I drugie, co jest bardziej zaniedbane, service to service.

**Szymon Warda**: Okej, to z tym siÄ™ zgodzÄ™. SzczegÃ³lnie service to service jest kompletnie...

**Åukasz KaÅ‚uÅ¼ny**: Dlatego nazwaÅ‚em to toÅ¼samoÅ›ciÄ… aplikacji, bo zobacz, Å¼e user to service jest jakoÅ› na wejÅ›ciu zadbany rynkowo.

**Szymon Warda**: Znaczy zadbany, po prostu dziaÅ‚a z pudeÅ‚ka.

**Åukasz KaÅ‚uÅ¼ny**: Tak. A service to service, wiesz ile razy jest narzeÅºbiony tym rÄ™cznym wystawianiem JWT-kÃ³w, API, tych tokenÃ³w i innych takich rzeczy.

**Szymon Warda**: Tak. Jeszcze jest inna opcja, jeszcze jest user to service w komunikacji asynchronicznej. To teÅ¼ jest ciekawy obszar, ktÃ³ry z reguÅ‚y jest na zasadzie, Å¼e: ale to my tego tu potrzebujemy? I tam jest dopiero rzeÅºbienia. Kolejna opcja, zarzÄ…dzanie sekretami.

**Åukasz KaÅ‚uÅ¼ny**: Tak i tutaj zobacz, Å¼e Twelve-Factor: w dzisiejszych czasach uwaÅ¼amy to za problem, kiedyÅ› nie byÅ‚o to w ogÃ³le postrzegane jako problem.

**Szymon Warda**: WÅ‚aÅ›nie sugerujesz, Å¼e co? Å»eby wszyscy wÅ‚aÅ›nie uÅ¼ywali Key Vault?

**Åukasz KaÅ‚uÅ¼ny**: Bardziej bym powiedziaÅ‚, Å¼e eksternalizacja tych sekretÃ³w tak na powaÅ¼nie. Bo wiesz, z jednej strony masz sekrety Kubernetesowe, tak jak hostujesz aplikacje.

**Szymon Warda**: KtÃ³re sÄ… takie trochÄ™ nie do koÅ„ca.

**Åukasz KaÅ‚uÅ¼ny**: Tak, sÄ… nie do koÅ„ca, ale sÄ….

**Szymon Warda**: SÄ…, ale one teÅ¼ nakÅ‚aniajÄ… do tego, Å¼eby ludzie znowu wracali do sekretÃ³w w repo. To jest aÅ¼ za Å‚atwe.

**Åukasz KaÅ‚uÅ¼ny**: JeÅ¼eli chodzi o techniki GitOpsowe, to tak, tutaj masz racjÄ™. A z drugiej strony masz, jak lecisz w cloudach, to masz keyvaulty, jakieÅ› tam KMS-y, w zaleÅ¼noÅ›ci od dostawcy. Czy jak lecisz w on-premie to masz vaulta od HashiCorpa, plus parÄ™ innych rozwiÄ…zaÅ„ do tego.

**Szymon Warda**: Zgadza siÄ™, problem jest taki co zrobiÄ‡... Znaczy tak, jeÅ¼eli mÃ³wimy o prodzie, jest to w ogÃ³le bezdyskusyjne, prawda, to w ogÃ³le inna opcja. Natomiast co zrobiÄ‡ z takÄ… opcjÄ…, jak robimy shift left i to developerzy sobie powiedzmy stawiajÄ… Å›rodowiska dynamicznie, itd., muszÄ… skonfigurowaÄ‡. WÅ‚aÅ›nie nam nie chodzi o to, tak mi siÄ™ zdaje, Å¼e nam nie chodzi o to, Å¼eby stawiajÄ…c deva na przykÅ‚ad zwracaÄ‡ siÄ™ do adminÃ³w: ej, ustawcie nam sekrety.

**Åukasz KaÅ‚uÅ¼ny**: Nie, one powinny wynikaÄ‡ z CI/CD po prostu i IJAC-a.

**Szymon Warda**: Z tym siÄ™ zgodzÄ™. Dla mnie jedna rzecz, ktÃ³ra jest tutaj ciekawa, to jest, ktÃ³rÄ… teÅ¼ Kubernetes bardzo mocno pcha, to jest to, Å¼eby uÅ¼ywaÄ‡ toÅ¼samoÅ›ci, Å¼eby w ogÃ³le pozbyÄ‡ siÄ™ tych sekretÃ³w. To jest najlepsze.

**Åukasz KaÅ‚uÅ¼ny**: Tylko to zrobisz w cloudach. Zobacz, Å¼e gÅ‚Ã³wnie zrobisz to w cloudach. SPIFI i inne rzeczy w on-premie siÄ™ nie przyjÄ™Å‚y.

**Szymon Warda**: Zgadza siÄ™. A co wiÄ™cej, nie zrobiÄ™ tego na przykÅ‚ad w takich bibliotekach typu wÅ‚aÅ›nie do PostgreSQL, itd., ktÃ³re nie wspierajÄ… tego natywnie i muszÄ™ robiÄ‡ wÅ‚asne strzaÅ‚y HTTP, itd.

**Åukasz KaÅ‚uÅ¼ny**: Dam tu gwiazdkÄ™, dam tutaj takÄ… duÅ¼Ä… gwiazdkÄ™, nienawidzÄ™ tego robiÄ‡, ale jest jeszcze Kerberos ciÄ…gle i da siÄ™ go zrobiÄ‡ na Kubernetesie.

**Szymon Warda**: Tak. Z sekretami problem jest i problem bÄ™dzie, pÃ³ki nie umÃ³wimy siÄ™, Å¼e to po toÅ¼samoÅ›ci i Å›rodowisko, sorry, ale gÅ‚Ã³wnie linuksowe przyjmie, Å¼e faktycznie sÄ… te rzeczy i moÅ¼na z nich korzystaÄ‡.

**Åukasz KaÅ‚uÅ¼ny**: Dobra.

**Szymon Warda**: Åšmigamy.

**Åukasz KaÅ‚uÅ¼ny**: CI/CD, to jest taki zabawny, bo zobacz, Å¼e tam ok, jest na temat buildu, releasu, ale nie ma juÅ¼ takich dokÅ‚adnie praktyk pod spodem, nie wiem, testÃ³w i innych takich rzeczy, ktÃ³re nie byÅ‚y wtedy normÄ….

**Szymon Warda**: Znaczy dla mnie caÅ‚y Twelve-Factor to jest takie zbuduj aplikacjÄ™ for dummies, taki zbiÃ³r naprawdÄ™ bazowych praktyk. ITen element The Twelve-Factor App, ten element aplikacyjny, bo to nie jest coÅ›, co mÃ³wi o aplikacjach, wiÄ™c normalnie bym nie dorzuciÅ‚ tego czy CI/CD. Ale w kontekÅ›cie jak bardzo to jest szerokie, tak, zgodzÄ™ siÄ™, tym bardziej Å¼e CI/CD jest z pudeÅ‚ka i wszÄ™dzie.

**Åukasz KaÅ‚uÅ¼ny**: Dobra. Kolejna rzecz to komunikacja miÄ™dzy usÅ‚ugami. Brakuje, jak byÅ›my powiedzieli sobie uniwersalnie, jak to zrobiÄ‡. To byÅ‚a moja pierwsza myÅ›l, Å¼e tego brakuje. Z drugiej strony, czy to trzeba specyfikowaÄ‡ jako wskazÃ³wkÄ™? Chyba, Å¼e for dummies.

**Szymon Warda**: To jest bardzo zaleÅ¼ne od aplikacji. To jest jedna rzecz. Druga rzecz to jest to, Å¼e dyskusja czy uÅ¼ywamy GIPC, czy uÅ¼ywamy HTTP jest w kaÅ¼dym projekcie i bÄ™dzie zawsze miaÅ‚a swoich wyznawcÃ³w, bo to jest kwestia juÅ¼ religii.

**Åukasz KaÅ‚uÅ¼ny**: A moÅ¼e zrÃ³bmy GraphQL-a Szymon.

**Szymon Warda**: Tak, super. Moje zdanie o GraphQL-u doskonale znasz i mamy chyba zbieÅ¼ne w tym temacie.

**Åukasz KaÅ‚uÅ¼ny**: Tak. ChociaÅ¼ stabilizuje siÄ™, ostatnio zerkaÅ‚em, zaczynajÄ…...

**Szymon Warda**: GraphQL ma sens w pewnych obszarach i jest naprawdÄ™, naprawdÄ™ fajny. W komunikacji wewnÄ…trzserwisowej, sorry, ale tego nie widzÄ™.

**Åukasz KaÅ‚uÅ¼ny**: Dobra, kolejny punkt. No wÅ‚aÅ›nie i teraz to jest pytanie czy to powinno byÄ‡ czy nie? Orkiestracja.

**Szymon Warda**: Dorzucenie tego spowoduje, Å¼e Twelve-Factor postarzaÅ‚by siÄ™ bardzo i tak siÄ™ postarzaÅ‚ i by siÄ™ zwiÄ…zaÅ‚ z czymÅ› konkretnym, mÃ³wiÄ…c wprost, z Kubernetesem. A orkiestracja znowu jest ciÄ™Å¼kim tematem. To jest temat mimo wszystko nie developerski, bym powiedziaÅ‚. To nie jest temat dla tego, dla kogo powstaÅ‚ Twelve-Factor, czyli dla ludzi, ktÃ³rzy budujÄ… swoje aplikacje.

**Åukasz KaÅ‚uÅ¼ny**: I wrzucajÄ… go na prostego PaaS.

**Szymon Warda**: DokÅ‚adnie tak. I nie oszukujmy siÄ™, wiÄ™kszoÅ›Ä‡ systemÃ³w nie potrzebuje orkiestracji i nigdy nie bÄ™dzie go potrzebowaÅ‚o.

**Åukasz KaÅ‚uÅ¼ny**: Tak, Docker Compose for the win.

**Szymon Warda**: Tak. Ruch tam bÄ™dzie taki, Å¼e naprawdÄ™ wystarczy jeden kontener i bÄ™dzie w porzÄ…dku. Dobrze. Ostatni.

**Åukasz KaÅ‚uÅ¼ny**: Dobra, skalowanie stanu. I to jest taka rzecz, ktÃ³ra mi wpadÅ‚a. ZauwaÅ¼, Å¼e nie ma tutaj jak sobie wÅ‚aÅ›nie podejÅ›Ä‡ do cache'y, baz danych i innych takich rzeczy i skalowaniem tego w tym miejscu.

**Szymon Warda**: Dobrze, to jest w ogÃ³le ciekawe, bo ostatnio wÅ‚aÅ›nie jak robiÅ‚em audyt, to wÅ‚aÅ›nie byÅ‚ ten problem. Mianowicie, Å¼e ok, mamy cache, gÅ‚Ã³wnie nas tu boli cache aplikacyjny i mamy aplikacjÄ™, ktÃ³ra chodzi w wielu instancjach. Jedna aplikacja dostaje request, inwaliduje swÃ³j cache, ale pozostaÅ‚e instancje nie majÄ… o tym zielonego pojÄ™cia, Å¼e ten cache powinien byÄ‡ zinwalidowany. WiÄ™c w takim razie jak obsÅ‚uÅ¼yÄ‡ to, Å¼eby ten cache po prostu usunÄ…Ä‡ i wyczyÅ›ciÄ‡? I to jest mega czÄ™sto pomijane. O tym po prostu ludzie nie myÅ›lÄ….

**Åukasz KaÅ‚uÅ¼ny**: To jest ciekawy w ogÃ³le problem, bo jak zobaczysz, w Å›wiecie Javy byÅ‚o popularne dziaÅ‚anie cache'y po multicast'cie.

**Szymon Warda**: Najfajniejsze byÅ‚o teÅ¼ z Redisem, czyli wÅ‚aÅ›nie z takim multicastem, formÄ… multicasta, a nie tam robisz pub/sub...

**Åukasz KaÅ‚uÅ¼ny**: KolejkÄ™ albo klucz po prostu kasujesz, ktÃ³ry jest dostÄ™pny, tudzieÅ¼ pamiÄ™tasz o TTL-ach.

**Szymon Warda**: MoÅ¼na teÅ¼ zrobiÄ‡. Dobrze, podsumowanie? Czego tam brakuje i jak to w ogÃ³le wyglÄ…da i co o tym myÅ›limy?

**Åukasz KaÅ‚uÅ¼ny**: SÅ‚uchaj dobra, zestarzaÅ‚o siÄ™ tak dwojako moim zdaniem, bo czÄ™Å›Ä‡ jest aktualna, ale jest teÅ¼ multum, multum brakÃ³w, jak byÅ›my zaczÄ™li grzebaÄ‡, jak mÃ³wisz zrÃ³bmy aplikacjÄ™ for dummies.

**Szymon Warda**: Tak jest to for dummies. Zastanawiam siÄ™, w sumie dalej istniejÄ… odbiorcy tego typu rzeczy. Pewne rzeczy zostaÅ‚y zastÄ…pione przez technologiÄ™ Docker, bo juÅ¼ sporo leci, pewne staÅ‚y siÄ™ jakimiÅ› tam dobrymi praktykami, po prostu weszÅ‚y biblioteki. Mimo Å¼e my jesteÅ›my najczÄ™Å›ciej zanurzeni w tym korpo Å›wiatku, raczej nie doradzamy osobom poszczegÃ³lnym, ktÃ³re robiÄ… swojÄ… pierwszÄ… aplikacjÄ™, bo to trochÄ™ nie nasza bajka, ale wydaje mi siÄ™, Å¼e ta grupa odbiorcÃ³w dalej istnieje i po prostu jest tak naprawdÄ™. WiÄ™c tu jednak przyznam Ci racjÄ™, ma to jakiÅ› sens. MoÅ¼e kwestia naszej baÅ„ki, w jakiej siÄ™ obracamy, Å¼e rzadziej widzimy te problemy, o ktÃ³rych mowa. No ale on dalej istnieje faktycznie.

**Åukasz KaÅ‚uÅ¼ny**: Dobra.

**Szymon Warda**: Powinny byÄ‡ dalej omawiane? Nie, wydaje mi siÄ™, Å¼e to istnieje, ma siÄ™ i koniec.

**Åukasz KaÅ‚uÅ¼ny**: Nadal aktualne jest zerkniÄ™cie czy w niektÃ³rych miejscach, jak robimy, jesteÅ›my z tym zgodni, z niektÃ³rymi z punktÃ³w.

**Szymon Warda**: Tak, dobra rzecz dla ludzi, ktÃ³rzy na studiach, tuÅ¼ po studiach, ktÃ³rzy piszÄ… swoje pierwsze aplikacje, chcÄ… coÅ› wystawiÄ‡.

**Åukasz KaÅ‚uÅ¼ny**: Jedna rzecz, jak uÅ¼ywacie Kubernetes i tak bÄ™dÄ™ sprawdzaÅ‚ te disposibility przy audycie.

**Szymon Warda**: Dobrze, to co, koÅ„czymy?

**Åukasz KaÅ‚uÅ¼ny**: KoÅ„czymy.

**Szymon Warda**: Trzymajcie siÄ™.

**Åukasz KaÅ‚uÅ¼ny**: Na razie.

