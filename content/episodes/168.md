---
title: '#168 Standaryzacja logÃ³w - nudne rzeczy, ktÃ³re trzeba ustaliÄ‡ '
date: 2025-10-31T08:00:00+02:00
episode: "168"
tags: ["Logging", "Observability", "OpenTelemetry", "Monitoring"]
description: ""
seo_keywords: "logi, logging, standardy logowania, structured logging, JSON, observability, monitoring, Open Telemetry, log management, troubleshooting, retencja logÃ³w"

# Hugo fields
youtube_id: "8DAwLk8cXZM"
youtube_url: "https://www.youtube.com/watch?v=8DAwLk8cXZM"
youtube_embed_url: "https://www.youtube.com/embed/8DAwLk8cXZM?enablejsapi=1"
spotify_url: "https://open.spotify.com/episode/"
apple_id: ""

# Spreaker data (technical only - for Schema.org, not user-facing)
duration: ""
audio_url: ""

# Social media images (poprawione nazwy)
og_landscape: "/img/168-landscape.webp"
og_square: "/img/168-square.webp"

# Intro for episode
intro: |
  **"Moim faworytem byÅ‚a firma z 15 poziomami logÃ³w. PiÄ™tnaÅ›cie."** Szymon opisuje chaos w organizacjach: zespoÅ‚y szukajÄ… logÃ³w w czterech rÃ³Å¼nych miejscach, **Elastic** poÅ¼era budÅ¼ety, a deweloperzy dodajÄ… logi _"na czuja"_ bez strategii. A Åukasz doprecyzowuje problem: _"Logi majÄ… wrednÄ… tendencjÄ™ - tylko je dodajemy, nigdy nie usuwamy."_
  
  Popularne "rozwiÄ…zania"? **Sampling**? _"Zawsze bÄ™dzie zÅ‚em, bo odsampluje to, czego wÅ‚aÅ›nie potrzebujecie."_ **Stdout** jako standard? _"Absolutne zÅ‚o i ostatecznoÅ›Ä‡."_ A wewnÄ™trzne dyskusje o nazewnictwie? _"JeÅ¼eli macie dyskusjÄ™ w firmie jak coÅ› nazwaÄ‡, oznacza to, Å¼e pierdolnik bÄ™dzie kontynuowany."_
  
  **Jak z tego wyjÅ›Ä‡?** RozwiÄ…zanie zaczyna siÄ™ od fundamentÃ³w: **structured logging** w **JSON**, **Open Telemetry** jako standard (koniec kÅ‚Ã³tni o _"fatal"_ vs _"critical"_), **Open Telemetry Collector** do wzbogacania i filtrowania. Plus dokument definiujÄ…cy pola, retencja zamiast samplingu, tenanty zamiast jednego indeksu, budÅ¼ety zamiast bezÅ‚adnego logowania wszystkiego.
  
  Czy twoja organizacja tonie w logach, ktÃ³rych nikt nie umie czytaÄ‡? SprawdÅº, zanim ktoÅ› doda szesnasty poziom logowania. âš ï¸
  

# Newsletter content (multiline)
newsletter: |
  **"Moim faworytem byÅ‚a firma z 15 poziomami logÃ³w. PiÄ™tnaÅ›cie."** ZespoÅ‚y szukajÄ… w **4 rÃ³Å¼nych miejscach**, **Elastic** poÅ¼era budÅ¼ety, deweloperzy logujÄ… _"na czuja"_. Åukasz doprecyzowuje: _"Logi majÄ… wrednÄ… tendencjÄ™ - tylko je dodajemy, nigdy nie usuwamy."_
  
  **Sampling**? _"Zawsze bÄ™dzie zÅ‚em."_ **Stdout**? _"Absolutne zÅ‚o i ostatecznoÅ›Ä‡."_ **Multiline'y**? _"Nie zamierzam pisaÄ‡ wiÄ™cej regexÃ³w."_ Dyskusje o nazewnictwie? _"Oznacza to, Å¼e pierdolnik bÄ™dzie kontynuowany."_
  
  RozwiÄ…zanie? **Structured logging**, **Open Telemetry**, **Open Telemetry Collector**, dokument definiujÄ…cy pola, tenanty i budÅ¼ety. ğŸ¯
  
  ---
  
  ### ğŸ“ NajbliÅ¼sze szkolenia
  
  Z kodem \*\*{$promo_code}\*\* taniej o {$promo_discount}%:
  
  - ğŸ—ï¸ [ARCHITEKTURA 101](https://patoarchitekci.io/szkolenia/architektura-101/?promo={$promo_code}) - Åukasz (25-26.11 i 02-03.12)
  - âš™ï¸ [Kubernetes the Hard Way](https://patoarchitekci.io/szkolenia/kubernetes-the-hard-way/?promo={$promo_code}) - Åukasz (16.12)
  - ğŸ“Š [Observability - Grafana Stack](https://patoarchitekci.io/szkolenia/observability-stos-grafana/?promo={$promo_code}) - Szymon (08.12)
  
  [Wszystkie szkolenia â†’](https://patoarchitekci.io/szkolenia/?promo={$promo_code})
  
  ---
  
  ### ğŸ˜± 15 poziomÃ³w logowania - chaos w organizacjach
  
  ZespoÅ‚y szukajÄ… logÃ³w w **4 rÃ³Å¼nych miejscach**, **Elastic** poÅ¼era budÅ¼ety, deweloperzy logujÄ… _"na czuja"_. Problem fundamentalny: _"Logi majÄ… wrednÄ… tendencjÄ™ - tylko je dodajemy, nigdy nie usuwamy."_
  
  ### âŒ Anty-rozwiÄ…zania, ktÃ³re nie dziaÅ‚ajÄ…
  
  **Sampling**? _"Zawsze bÄ™dzie zÅ‚em, bo odsampluje to, czego wÅ‚aÅ›nie potrzebujecie."_ **Stdout** jako standard? _"Absolutne zÅ‚o i ostatecznoÅ›Ä‡."_ Parsowanie **multiline'Ã³w**? _"SpÄ™dziÅ‚em duÅ¼o czasu na pisaniu regexÃ³w i nie zamierzam tego robiÄ‡ wiÄ™cej."_
  
  ### ğŸ¯ Dyskusje o nazewnictwie (fatal vs critical)
  
  _"JeÅ¼eli macie dyskusjÄ™ w firmie jak coÅ› nazwaÄ‡, oznacza to, Å¼e pierdolnik bÄ™dzie kontynuowany."_ RozwiÄ…zanie? **Open Telemetry** jako zewnÄ™trzny standard - koniec kÅ‚Ã³tni.
  
  ### âœ… Jak to naprawiÄ‡?
  
  RozwiÄ…zanie zaczyna siÄ™ od **fundamentÃ³w**, nie od narzÄ™dzi:
  
  1. **Structured logging** w **JSON** - jedna linia, Å¼adnych multiline'Ã³w
  2. **Open Telemetry** jako standard (pola, nazwy, poziomy)
  3. **Open Telemetry Collector** - buforowanie, wzbogacanie, filtrowanie
  4. **Dokument definiujÄ…cy pola** - spisany, nie ustny!
  5. **Tenanty** zamiast jednego indeksu dla caÅ‚ej organizacji
  6. **Retencja** zamiast samplingu - lepiej krÃ³cej trzymaÄ‡ niÅ¼ samplingowaÄ‡
  7. **BudÅ¼ety** na logowanie dla zespoÅ‚Ã³w
  
  ### ğŸ“‹ Trzy zasady fundamentalne
  
  1. **SpisaÄ‡ dokument** - ktÃ³re pola co znaczÄ…, jakie sÄ… standardy
  2. **UstaliÄ‡ gdzie wysyÅ‚ane** - aplikacja â†’ OT Collector â†’ system (nie bezpoÅ›rednio!)
  3. **Wszystko w jednej linii** - koniec z regexami do multiline'Ã³w
  

# Links for the episode
links:
  - title: "[Patoszkolenie] Kubernetes the Hard Way"
    url: "https://patoarchitekci.io/szkolenia/kubernetes-the-hard-way/"
  - title: "OpenTelemetry Logging"
    url: "https://opentelemetry.io/docs/specs/otel/logs/"
  - title: "[Patoszkolenie] Observability ze stosem Grafana"
    url: "https://patoarchitekci.io/szkolenia/observability-stos-grafana/"
  - title: "Logging - OWASP Cheat Sheet Series"
    url: "https://cheatsheetseries.owasp.org/cheatsheets/Logging_Cheat_Sheet.html"
  - title: "[Patoszkolenie] Architektura 101"
    url: "https://patoarchitekci.io/szkolenia/architektura-101/"
  - title: "Logging best practices - AWS Prescriptive Guidance"
    url: "https://docs.aws.amazon.com/prescriptive-guidance/latest/logging-monitoring-for-application-owners/logging-best-practices.html"
---

**Szymon Warda**: Sampling zawsze bÄ™dzie zÅ‚em, bo wam odsampluje to, co wÅ‚aÅ›nie potrzebujecie. I sampling jest trudny i realnie jest praktycznie nie do wykonania, Å¼eby to miaÅ‚o rÄ™ce i nogi.

**Åukasz KaÅ‚uÅ¼ny**: JeÅ¼eli macie dyskusjÄ™ w firmie jak coÅ› nazwaÄ‡, zrobiÄ‡, oznacza to, Å¼e pierdolnik bÄ™dzie kontynuowany.

**Szymon Warda**: JeÅ¼eli moÅ¼emy, zamieniamy new line'y, Å¼eby one jednak byÅ‚y w jednej linii. IloÅ›Ä‡ nie idzie w parze z jakoÅ›ciÄ…. My potrzebujemy logÃ³w dobrej jakoÅ›ci, a nie po prostu wszystkiego. CzeÅ›Ä‡, sÅ‚uchacie PatoarchitektÃ³w. ProwadzÄ… Szymon Warda...

**Åukasz KaÅ‚uÅ¼ny**: I Åukasz KaÅ‚uÅ¼ny. Wszystkie linki do tego odcinka znajdziecie na Patoarchitekci.io i prawdopodobnie tu na dole, gdzieÅ› tu pod spodem w opisie, dacie radÄ™.

**Szymon Warda**: Tak, wierzymy w Was. Dobrze Åukaszu, to informacyjnie, co tam siÄ™ bÄ™dzie u nas dziaÅ‚o teraz?

**Åukasz KaÅ‚uÅ¼ny**: Tak, zaczynamy z jesiennymi szkoleniami. Na start moja Architektura 101 - 25 listopada, 26, 2 grudnia, 3 grudnia, spotkania poranne po 4 godziny. I to szkolenie bÄ™dzie przechodziÅ‚o, porzÄ…dkowaÅ‚o wiedzÄ™, czym jest architektura. Dlatego Architektura 101, bo duÅ¼o osÃ³b ma stycznoÅ›Ä‡ z architekturÄ…, z jej projektowaniem albo aspiruje bardziej do roli architekta. I jest to pokazanie w jaki sposÃ³b tÄ… wiedzÄ™ ustrukturyzowaÄ‡. BÄ™dziemy przechodziÄ‡ przez fundamenty architektury wÅ‚aÅ›nie czym jest architektura, przez te wszystkie pojÄ™cia, ktÃ³re siÄ™ pojawiajÄ…, jak style architektury, potem przez wzorce budowy systemÃ³w. TrochÄ™ bÄ™dzie teÅ¼ o charakterystykach architektury, ktÃ³re sÄ… problematyczne, bo z jednej strony bardzo uÅ‚atwiajÄ…, a z drugiej chcielibyÅ›my speÅ‚niÄ‡ wszystko. Innym elementem, ktÃ³ry cieszy siÄ™ popularnoÅ›ciÄ… w trakcie szkoleÅ„, to jest architektura versus bezpieczeÅ„stwo, czyli w jaki sposÃ³b rozmawiaÄ‡ z ludÅºmi od bezpieczeÅ„stwa, co mieÄ‡ na uwadze. Potem teÅ¼ czÄ™Å›Ä‡, ktÃ³ra jest, jeÅ¼eli ktoÅ› z Was wywodzi siÄ™ ze Å›wiata developerskiego, jest pain in the ass, czyli podstawy architektury sieciowej, jak to rozumieÄ‡. Potem takie podejÅ›cie do build versus buy, czyli kiedy kupowaÄ‡ gotowe, jak rozumieÄ‡, dlaczego niektÃ³rzy wybierajÄ… gotowe rozwiÄ…zania, a dlaczego niektÃ³rzy kalkulujÄ…, Å¼e skorzystajmy z open source albo zbudujmy wÅ‚asne? WiÄ™c podejÅ›cie do tego, w jaki sposÃ³b do tego podchodziÄ‡. I do tego wszystkiego na koniec czÄ™Å›Ä‡ na temat wybierania stosu aplikacyjnego, technologicznego i odpowiedzenie sobie na pytanie, czy Kubernetes i ekosystem CNCF-u to lekarstwo na wszystkie nasze potrzeby, jeÅ¼eli bÄ™dziemy budowaÄ‡ aplikacjÄ™? I warto teÅ¼ dorzuciÄ‡, Å¼e w caÅ‚oÅ›ci jest sporo takich Ä‡wiczeÅ„ grupowych, Å¼eby pokazaÄ‡, bo w pracy architekta istotne jest to, Å¼e jednak postÄ™puje ta wymiana wiedzy i interakcji, wiÄ™c mamy duÅ¼o Ä‡wiczeÅ„ w postaci tak zwanych Architectural Kata, gdzie dostajemy maÅ‚e zagadnienie, 40 minut i grupowo je projektujemy, a potem wspÃ³lnie te wszystkie elementy omawiamy. WiÄ™c jest parÄ™ takich Ä‡wiczeÅ„ w trakcie tych spotkaÅ„, na ktÃ³rych wÅ‚aÅ›nie bÄ™dzie okazja od razu do sprawdzania tej wiedzy i testowania tego i dostania od razu feedbacku.

**Szymon Warda**: MyÅ›lÄ™ sobie to jest szkolenie, ktÃ³re trochÄ™ porzÄ…dkuje temat, ktÃ³ry ja czÄ™sto widzÄ™ z ludÅºmi rozmawiajÄ…c wÅ‚aÅ›nie, ktÃ³rzy awansowali do roli architekta, mianowicie uporzÄ…dkowania, co ja wÅ‚aÅ›ciwie w organizacji powinienem robiÄ‡? Jaka jest moja rola? Jakich narzÄ™dzi w ogÃ³le, co, czym siÄ™ posÅ‚ugiwaÄ‡ i jakie cele mam sobie wyznaczaÄ‡? Tak trochÄ™ mentalnie porzÄ…dkuje co i jak.

**Åukasz KaÅ‚uÅ¼ny**: Dobra Szymonie, Twoje jest kolejne.

**Szymon Warda**: Moje jest kolejne, tak. Jest to Observability ze stosem Grafana i to jest z takÄ… gwiazdkÄ…, bo ten stos Grafana sobie wliczamy w Prometheus'za. I o czym to jest szkolenie? To jest takie trochÄ™ szkolenie, ktÃ³re zostaÅ‚o skrÃ³cone, bo wczeÅ›niej mieliÅ›my to dwudniowe i tym razem... Czego tam nie bÄ™dzie? MoÅ¼e tego zacznijmy. ZakÅ‚adamy, Å¼e juÅ¼ mniej wiÄ™cej jakÄ…Å› tam wiedzÄ™ macie o tym, po co w ogÃ³le monitorowaÄ‡, czym jest observabili i tak dalej. I to jest takie czysto techniczne szkolenie, ktÃ³re skupia siÄ™ na tym, jak uÅ¼ywaÄ‡ narzÄ™dzi grafanowych, plus Prometheus'z oczywiÅ›cie. Skupia siÄ™ na kilku rzeczach. Po pierwsze, omawiamy sobie architekturÄ™, ona jest bardzo waÅ¼na, jeÅ¼eli chodzi o nawet skÅ‚adnie, jak ona potem dziaÅ‚a, jak siÄ™ zachowuje i tak dalej. I zrozumienie tego jest bardzo, bardzo waÅ¼ne. To nie sÄ… narzÄ™dzia typu Elastic, Å¼e sobie wpisujemy, error i dziaÅ‚a, dziaÅ‚a pÃ³ki dziaÅ‚a w sumie. Pierwsza rzecz, do ktÃ³rej przychodzimy to jest Loki, czyli mianowicie system do agregacji logÃ³w i duÅ¼ej agregacji logÃ³w, ktÃ³ry skaluje siÄ™ fenomenalnie i jest tani w utrzymaniu. Jednak UI i jÄ™zyk kwerend nie jest taki intuicyjny jakby to mogÅ‚o byÄ‡. Ale po przejÅ›ciu przez ten prÃ³g bÃ³lu i zrozumienia z czego to wynika, to juÅ¼ zaczyna byÄ‡ doÅ›Ä‡ intuicyjne i moÅ¼na siÄ™ tym Å‚adnie posÅ‚ugiwaÄ‡. Tam przede wszystkim duÅ¼y, bardzo duÅ¼y nacisk wÅ‚aÅ›nie na skÅ‚adniÄ™, poniewaÅ¼ ona bardzo mocno wpÅ‚ywa wÅ‚aÅ›nie na wydajnoÅ›Ä‡, a potem finalnie na nasze zadowolenie w ogÃ³le z Loki. Sposoby zbierania i warsztaty (...) caÅ‚y dzieÅ„, tam jest doÅ›Ä‡ niewiele mojego mÃ³wienia. Dobrze, dalej przechodzimy przez kolejnÄ… bajkÄ™, czyli Prometheus'z. Prometheus'z podobnie, jeÅ¼eli chodzi, mÃ³wimy o (...), ktÃ³re omawiamy sobie, jak to w ogÃ³le dziaÅ‚a? Ten sam problem, ktÃ³ry wystÄ™puje teÅ¼ w Loki, czyli mianowicie czym jest w ogÃ³le kardynalnoÅ›Ä‡ i jak siÄ™ wiÄ…Å¼e labelowanie, jak dobrze labelowaÄ‡, jakie sÄ… ryzyka zÅ‚ego labelowania, czyli wÅ‚aÅ›nie eksplozja kardynalnoÅ›ci. Przechodzimy przez caÅ‚ego prompt wella, czyli jÄ™zyk zapytaÅ„ od doÅ›Ä‡ prostych, zrozumienie, czym sÄ… wektory czasowe, bo one sÄ… doÅ›Ä‡ kluczowe i zrozumienie wÅ‚aÅ›nie, omÃ³wienie jakie sÄ… metryki i zrozumienie, czemu wÅ‚aÅ›nie w wiÄ™kszoÅ›ci kwerend widzimy, bÄ™dziemy mieli sumÄ™ od rate'a albo sumÄ™ od inkrementa i tego typu operacje i jak Prometheus'z ogarnia przerwy w zestawie. Jakie sÄ… konsekwencje wykorzystywania w ogÃ³le push pull, zbierania metryk? A na koÅ„cu rzecz, ktÃ³rÄ… ja osobiÅ›cie bardzo lubiÄ™, ale ktÃ³ra z reguÅ‚y jest takim trochÄ™ rozczarowaniem, z mojej strony w sumie teÅ¼ trochÄ™, w takim prostym wykorzystaniu, czyli mianowicie Tempo, czyli zbieranie trace'Ã³w. I czemu z rozczarowaniem? Bo Tempo jest (...) system, bardzo fajnie dziaÅ‚a. Jest to system z reguÅ‚y zbudowany dla developerÃ³w w obecnej wersji, a caÅ‚a agregacja tak naprawdÄ™, to juÅ¼ musimy sobie z reguÅ‚y napisaÄ‡ na boku. OczywiÅ›cie mÃ³wimy jak zrobiÄ‡, Å¼eby mieÄ‡ dane zagregowane, mieÄ‡ dane raportowe z tego, jak wykorzystaÄ‡, jak zrobiÄ‡ dobrze trace'y. I przechodzimy sobie teÅ¼ doÅ›Ä‡ mimo wszystko doÅ›Ä‡ prosty, ale caÅ‚kiem, caÅ‚kiem przyjemny jÄ™zyk zapytaÅ„ wÅ‚aÅ›nie dla trace'Ã³w, czyli dla Tempo. I tak to siÄ™ zamyka. Bardzo, bardzo mocny nacisk wÅ‚aÅ›nie na czÄ™Å›Ä‡ technicznÄ…. I to jest szkolenie, po ktÃ³rym wychodzicie i znacie skÅ‚adniÄ™ w peÅ‚ni praktycznie. No wiÄ™c tyle, zapraszam. Åukasz, Ty masz jeszcze jedno.

**Åukasz KaÅ‚uÅ¼ny**: Tak, 16 grudnia i bÄ™dzie to Kubernetes The Hard Way. Czyli sposÃ³b, Å¼eby zobaczyÄ‡ jak Kubernetes dziaÅ‚a pod spodem, jeÅ¼eli chodzi o infrastrukturÄ™, logikÄ™ komponentÃ³w, ich komunikacjÄ™. I tutaj zaÅ‚oÅ¼enie jest takie, Å¼e omawiamy juÅ¼ bardziej w detalach architekturÄ™ klastra, Kubernetes jest pod spodem, co siÄ™ dzieje i potem kaÅ¼dy z uczestnikÃ³w na przygotowanym labie dostaje goÅ‚e wirtualki i bÄ™dziemy wspÃ³lnie stawiaÄ‡ Kubernetesa z binarek od podszewki, zaczynajÄ…c od przygotowania wszystkich configÃ³w, certyfikatÃ³w. WiÄ™c zaczynamy od przygotowania sobie narzÄ™dzi, budowy wÅ‚asnego load balancer'a, nastÄ™pnie postawienie caÅ‚ego CA i wygenerowanie wszystkich certyfikatÃ³w do mTLS-a. Przechodzimy potem pod przygotowanie sobie szyfrowania etcd. Przechodzimy potem do robienia, stawiania rÄ™cznie control plane'Ã³w z binarek, potem odpalenie caÅ‚ych wÄ™zÅ‚Ã³w Kubernetes'owych, przygotowanie sobie configÃ³w pod kubectl'a, gdzie potem pÃ³jdziemy pod budowÄ™ tutaj caÅ‚ego stosu sieciowego, czyli kawaÅ‚ek wÅ‚asnego prostego CNI-a, w jaki sposÃ³b z tych gotowych komponentÃ³w poskÅ‚adaÄ‡. Co tam jeszcze jest? A, odpalimy DNS-a, potem testy wysokiej dostÄ™pnoÅ›ci, trochÄ™ troubleshootingu, symulacji awarii i na koniec do tego wszystkiego jeszcze rozbudowujemy nasz load balancer o to, Å¼eby on teÅ¼ byÅ‚ wysoko dostÄ™pny. I na koniec jeszcze dorzucamy On Top of Ingress Controller. I po caÅ‚ym dniu wiecie gdzie te elementy w Kubernetes'ie sÄ…, co za co odpowiada tak naprawdÄ™ i dziÄ™kujcie w wiÄ™kszoÅ›ci przypadkÃ³w, tak jak jest jeden z tych komentarzy, Å¼e docenia juÅ¼ teraz Azure AKS-a, Å¼e nie musi siÄ™ z tym mÄ™czyÄ‡ i utrzymywaÄ‡ tego. WiÄ™c moÅ¼na zobaczyÄ‡ caÅ‚y flow, jak wyglÄ…da pod spodem Kubernetes, ile jest tam decyzji. I z drugiej strony, jeÅ¼eli uwaÅ¼amy, Å¼e coÅ› jest nielogiczne w Kubernetes'ie albo gÅ‚upie, moÅ¼na teÅ¼ zrozumieÄ‡, z czego to dokÅ‚adnie siÄ™ wywodzi. Tutaj od razu taka podpowiedÅº, trzeba patrzeÄ‡ na Kubernetes'a jak na cepa i wtedy od razu wiemy dlaczego coÅ› nielogicznego jest bardzo logiczne.

**Szymon Warda**: Tak, dokÅ‚adnie, poznaÄ‡ z czego wynikaÅ‚a decyzja, Å¼eby zrozumieÄ‡ dlaczego wÅ‚aÅ›nie zostaÅ‚a taka podjÄ™ta. Dobrze, to tyle z parafialek tak naprawdÄ™. To lecimy. O czym dzisiaj?

**Åukasz KaÅ‚uÅ¼ny**: Dzisiaj, Szymonie, chcÄ™ CiÄ™ przepytaÄ‡ z logÃ³w, bo pojawiÅ‚o siÄ™ gdzieÅ› tam na zaprzyjaÅºnionym Discordzie pytanie teÅ¼ tam i dyskusjÄ™ o logi. Nie oszukujmy siÄ™, to co widzimy, to Twoja dziaÅ‚ka najczÄ™Å›ciej, to widzisz baÅ‚agan z nimi. Jaki jest gÅ‚Ã³wny problem z logami?

**Szymon Warda**: GÅ‚Ã³wny problem z logami, sÄ… wÅ‚aÅ›ciwie dwa problemy. Pierwsze to jest to, Å¼e jest ich za duÅ¼o i po prostu organizacja zaczyna tonÄ…Ä‡ od iloÅ›ci, od kosztÃ³w ich utrzymania. Elastic szczegÃ³lnie z tym, nie oszukujmy siÄ™, bo to jest ten gÅ‚Ã³wny element. Drugi element to jest to, Å¼e okej, mamy logi i wÅ‚aÅ›ciwie nie umiemy z nich korzystaÄ‡ tak naprawdÄ™. To jest szukanie zagroÅ¼enia, ale dosÅ‚ownie na paÅ‚Ä™, byle coÅ› znaleÅºÄ‡ i jest to taka prÃ³ba Å‚owienia. I jeÅ¼eli jest potrzeba, to wÅ‚aÅ›ciwie z logÃ³w ciÄ™Å¼ko nam jest wywnioskowaÄ‡, co siÄ™ wÅ‚aÅ›ciwie staÅ‚o i jak siÄ™ staÅ‚o i co byÅ‚o powodem. A finalnie tak naprawdÄ™ to trzeba znaleÅºÄ‡ z reguÅ‚y developera od konkretnego systemu, Å¼eby on przypomniaÅ‚, zrozumiaÅ‚ i wyszukaÅ‚ logi, ktÃ³re mogÄ… pomÃ³c w debugowaniu odpowiedniej sekcji.

**Åukasz KaÅ‚uÅ¼ny**: Tak, u naszego jednego klienta ogarnÄ™Å‚o mnie trochÄ™ przeraÅ¼enie, Å¼e w trakcie, mieliÅ›my jakieÅ› tam prace serwisowe grubszej zmiany w infrze i kiedy ludzie z zespoÅ‚Ã³w aplikacyjnych szukali w czterech rÃ³Å¼nych miejscach logÃ³w, czy we wszystkich komponent dziaÅ‚a. I to jest przeraÅ¼ajÄ…ce.

**Szymon Warda**: Albo na przykÅ‚ad stwierdzajÄ…, Å¼e: nie, to trzeba zmieniÄ‡ poziom logowania, bo ta wiadomoÅ›Ä‡ pewnie jest na innym poziomie.

**Åukasz KaÅ‚uÅ¼ny**: Dobra, sÅ‚uchaj, to teraz tak, to jest rzecz, o ktÃ³rÄ… siÄ™ trochÄ™ kÅ‚Ã³cimy, trochÄ™ zgadzamy, ale sÅ‚uchaj, jakie mamy rodzaje logÃ³w, jeÅ¼eli teraz popatrzysz?

**Szymon Warda**: Dobrze, to pÃ³jdÅºmy o tych, gdzie siÄ™ zgadzamy. Mamy tak, aplikacyjne, czyli te rzeczy, ktÃ³re wysyÅ‚ajÄ… nasze aplikacje. Zgadzamy siÄ™? Tak, zgadzamy siÄ™, dobrze bardzo mocno. Systemowe, czyli mamy takie typowe infrastrukturalne, czyli co tam siÄ™ wydarzyÅ‚o, nasz klaster Kubernetesowy co loguje na przykÅ‚ad.

**Åukasz KaÅ‚uÅ¼ny**: Tak. Co leci na stdout'a, bo to sÄ… logi, ktÃ³re powinny trafiaÄ‡ na stdout'a i co powiedzieÄ‡ szybko: aplikacja Å¼yje, nie Å¼yje, nie byÅ‚o stack trace'Ã³w.

**Szymon Warda**: Dobrze, to teraz zasiejÄ™ takie ziarenko zapytania, logi na przykÅ‚ad z naszego Ingressa, albo z naszego Mongo, albo z takich typowo aplikacyjnych komponentÃ³w z naszej infrastruktury. Gdzie je zaliczysz?

**Åukasz KaÅ‚uÅ¼ny**: Wiesz co, one pÃ³jdÄ… sobie do... WÅ‚aÅ›nie i widzisz i teraz jest problem, bo Ingress to sÄ… logi dostÄ™powe zazwyczaj, bo to jest access, to jest access control zazwyczaj, to sÄ… rzeczy, ktÃ³re sÄ… albo dostÄ™powe, albo bezpieczeÅ„stwa. A tak jak powiedziaÅ‚eÅ›, rzuciÅ‚eÅ› Mongo, to raczej jest to, co wypluwa Mongo, to jest systemÃ³wka.

**Szymon Warda**: Tak, to by znowu implikowaÅ‚o, Å¼e w tym momencie potencjalnie na przykÅ‚ad patrzy na to juÅ¼ nie developerzy, tylko patrzy na to bardziej OPS-i, admini i tak dalej.

**Åukasz KaÅ‚uÅ¼ny**: Raczej kaÅ¼dy z nich moÅ¼e to oglÄ…daÄ‡. To jest problem.

**Szymon Warda**: Ja bym to powiedziaÅ‚ tak, ci, ktÃ³rzy chcieli wdroÅ¼yÄ‡ i jeszcze nie przekazali do platformy, ci na te logi patrzÄ…. PowaÅ¼nie, bo tak to powinno dziaÅ‚aÄ‡, kaÅ¼dy moÅ¼e sobie... Okej, chcesz mieÄ‡ jakiÅ› system inny, to teraz go utrzymuj. Dobrze, idziemy kawaÅ‚ek dalej. RuszyÅ‚eÅ› dostÄ™powe, wiÄ™c faktycznie mamy. Mamy caÅ‚y element Ingressa, ktÃ³ry nam wchodzi, jak najbardziej. Wiemy co weszÅ‚o, jak weszÅ‚o, to jest kluczowe, przede wszystkim to potem bÄ™dzie przy liczeniu jakiegoÅ› tam SLA, jeÅ¼eli nie mamy metryk. MoÅ¼e tak siÄ™ zdarzyÄ‡. Idziemy dalej. BezpieczeÅ„stwo. Kto siÄ™ zalogowaÅ‚, kiedy siÄ™ zalogowaÅ‚, w jakiej roli i co zrobiÅ‚. Mnie to...

**Åukasz KaÅ‚uÅ¼ny**: Typowa audytÃ³wka.

**Szymon Warda**: Tak. Teraz mamy taki element, ktÃ³ry juÅ¼ jest trochÄ™ rozmyty, bo to nazwaÅ‚em przez takie logi biznesowe, czyli Å¼eby Å›ledziÄ‡ zdarzenia biznesowe. Ja bym tu juÅ¼ wchodziÅ‚: a weÅº sobie uÅ¼yj metryk.

**Åukasz KaÅ‚uÅ¼ny**: WÅ‚aÅ›nie, bo zobacz, jest teraz tak, to jest ten problem, ktÃ³ry jak sobie popatrzymy, aplikacyjne versus biznesowe. I to jest bardzo duÅ¼y problem, bo zwykle potem to, co powiedziaÅ‚eÅ› o tym pierdolniku, ja zawsze oglÄ…dam, Å¼e logi techniczne sÄ… wymieszane z logami biznesowymi i to jest jeden wielki pierdolnik.

**Szymon Warda**: Nie jest wymieszane. My prÃ³bujemy wywnioskowaÄ‡ zdarzenia biznesowe z logÃ³w technicznych.

**Åukasz KaÅ‚uÅ¼ny**: WÅ‚aÅ›nie, wiesz i teraz jest pytanie czy to sÄ… statusy, ktÃ³re sÄ… jednak rzeczÄ…, ktÃ³re sÄ… w produkcie, w naszych, czy to powinny byÄ‡ logi tak naprawdÄ™, czy to sÄ… jednak eventy, ktÃ³re sÄ… w naszym stanie aplikacji?

**Szymon Warda**: Dla mnie to jest taka opcja. JeÅ¼eli to jest tylko takie, Å¼eby zorientowaÄ‡ siÄ™, jak to wyglÄ…da, okej, uÅ¼ywamy metryk. JeÅ¼eli to ma byÄ‡ coÅ›, z czego rozliczamy, z caÅ‚ym szacunkiem, zapisujemy to do jakiejÅ› bazy i mamy jakieÅ› kwerendy, ktÃ³re nam to wyliczajÄ…, jeÅ¼eli chcÄ™ mieÄ‡ absolutne ÅºrÃ³dÅ‚o prawdy. To zarÃ³wno logi, moÅ¼e zdarzyÄ‡ siÄ™, Å¼e coÅ› siÄ™ zgubi, tak samo i metryki, moÅ¼e zdarzyÄ‡ siÄ™, Å¼e gdzieÅ› siÄ™ machniemy, coÅ› siÄ™ wydarzy. WiÄ™c dla mnie tak zwane logi biznesowe nie majÄ… obecnie za bardzo zastosowania w systemach. To powinno, wylatuje do metryk.

**Åukasz KaÅ‚uÅ¼ny**: I wylatuje do bazy danych, tam gdzie to siÄ™ dzieje, ten proces.

**Szymon Warda**: Tak, gdzie mamy jakieÅ›, wÅ‚aÅ›nie jakieÅ› zapytania, jakÄ…Å› raportÃ³wkÄ™, jeÅ¼eli tego potrzebujemy. Dobra. I na koÅ„cu diagnostyka, ktÃ³ra znowu, kolejny element dla mnie do ubicia, to powinny byÄ‡ trace'y, koniec, kropka.

**Åukasz KaÅ‚uÅ¼ny**: Tak, czyli jakieÅ› szczegÃ³Å‚owe i wÅ‚Ä…czane on demand raczej niÅ¼... Dla mnie to jest problem, Å¼e dla mnie to jest stara szkoÅ‚a, Å¼e domyÅ›lnie trace debug jest wÅ‚Ä…czany kiedy jest potrzebny albo jest skÅ‚adowany krÃ³ciutko.

**Szymon Warda**: O wÅ‚aÅ›nie i do tego dojdziemy, bo na naszym Discordzie byÅ‚a uwaga odnoÅ›nie, Å¼e nie poruszyliÅ›my tematu samplingu. Nie rÃ³bcie samplingu, logujcie, tylko miejcie krÃ³tszÄ… retencjÄ™. Sampling zawsze bÄ™dzie zÅ‚em, bo Wam odsampluje to, co potrzebujecie. I sampling jest trudny i realnie jest praktycznie nie do wykonania, Å¼eby to miaÅ‚o rÄ™ce i nogi. A jak macie awariÄ™ to potrzebujecie mieÄ‡ wszystkiego praktycznie, wiÄ™c dawajcie bardzo krÃ³tkÄ… retencjÄ™. I teraz to jest moment, kiedy powiedziaÅ‚eÅ› o tym, Å¼e aplikacje, kiedy logujÄ…. Tak i to wÅ‚aÅ›nie jest bardzo waÅ¼ne do powiedzenia, z ktÃ³regomy kontekstu patrzymy. Bo teraz patrzymy z kontekstu tego, jak oglÄ…damy te logi, a nie jak te logi wysyÅ‚amy. Bo dochodzimy teraz do tego, Å¼e mamy takie zabawki, jak na przykÅ‚ad Open Telemetry Collector, ktÃ³ry moÅ¼e filtrowaÄ‡ logi, wiÄ™c aplikacja moÅ¼e logowaÄ‡ wiÄ™cej niÅ¼ potrzebuje, a my potem pewne rzeczy ucinamy. WiÄ™c moÅ¼esz taki Open Telemetry Collector zrobiÄ‡, albo GrafanÄ™ Alloy. MoÅ¼emy dynamicznie, bez restartu ich zmieniÄ‡ konfiguracjÄ™ i nagle zaczÄ…Ä‡ wysyÅ‚aÄ‡ wszystkie logi i je zbieraÄ‡. To jest dopiero fajna zabawka. WiÄ™c aplikacja bÄ™dzie wymagaÅ‚a restartu, nie oszukujmy siÄ™, z reguÅ‚y, albo bÄ™dziemy jakieÅ› mieli feature flagi na logowania, a to nie ma Å¼adnego sensu powiedzmy sobie, to jest duÅ¼o roboty za maÅ‚y zysk.

**Åukasz KaÅ‚uÅ¼ny**: Dobra Szymon, i teraz tak, jeÅ¼eli mÃ³wimy o sprzÄ…taniu. Czyli zastajemy pierdolnik w organizacji, jeÅ¼eli na to popatrzymy, to jak wyglÄ…da sprzÄ…tanie tego?

**Szymon Warda**: Dobra, sprzÄ…tanie rozkÅ‚adamy na kilka poziomÃ³w. NajwaÅ¼niejsze to powiedzieÄ‡ sobie, co w ogÃ³le moÅ¼emy posprzÄ…taÄ‡. Mianowicie pogodzenie siÄ™ z tym, Å¼e pewne logi bÄ™dÄ… baÅ‚aganem po prostu. Ale moÅ¼emy ograniczyÄ‡ iloÅ›Ä‡ logÃ³w, ktÃ³re sÄ… baÅ‚aganem i to jest waÅ¼ne tak naprawdÄ™. Zaczynamy przede wszystkim od tego, Å¼eby ustaliÄ‡, jaki mamy format logÃ³w. I teraz co jest waÅ¼ne? Bo i teÅ¼ jak te aplikacje mogÄ… wysyÅ‚aÄ‡. I tu idziemy dwojako, bo pierwszy element, gdzie ja polecam, to jest przejÅ›cie na to, Å¼eby aplikacje zaczÄ™Å‚y wysyÅ‚aÄ‡ do naszego systemu logowania poÅ›rednio czy bezpoÅ›rednio nasze logi. Czemu? Bo daje nam to moÅ¼liwoÅ›Ä‡ uÅ¼ywania logÃ³w ustrukturyzowanych. Jak mamy logi strukturyzowane, najlepiej JSON, nie oszukujmy siÄ™, to siÄ™ sprawdzi najlepiej, to moÅ¼emy jawnie okreÅ›liÄ‡, ktÃ³re pola sÄ… i ktÃ³re pola jak bÄ™dÄ… nazywane i jak siÄ™ znajdÄ… w naszym systemie do zbierania logÃ³w. To jest bardzo waÅ¼ne. To jest teÅ¼ bardzo waÅ¼na rzecz, nie zawsze jest to, Å¼e aplikacja wszystko wie. NiektÃ³re logi bÄ™dziemy wzbogacali o pewne labele, wiÄ™c teÅ¼ musimy okreÅ›liÄ‡ na przykÅ‚ad co my chcemy mieÄ‡ w naszym systemie do zbierania logÃ³w i co aplikacja nam moÅ¼e wysÅ‚aÄ‡. I potem dalej tÄ… dziurÄ™, gdzie nam czegoÅ› brakuje, okreÅ›lamy gdzie to moÅ¼emy wzbogaciÄ‡. To jest super waÅ¼ne. WiÄ™c okreÅ›lamy tak naprawdÄ™ gdzie logujemy i godzimy siÄ™ z drugim faktem, Å¼e pewne logi, jeÅ¼eli mÃ³wimy, Å¼e aplikacja bÄ™dzie wysyÅ‚aÅ‚a, pewne logi bÄ™dziemy musieli scrape'owaÄ‡ z stdouta i okreÅ›lamy dokÅ‚adnie w jakiej sytuacji te logi, ktÃ³re bÄ™dÄ… duÅ¼o gorszej jakoÅ›ci, majÄ… byÄ‡ wysyÅ‚ane. Czyli mÃ³wimy prosto: tylko w sytuacjach krytycznych jak nie moÅ¼emy wysÅ‚aÄ‡, w sytuacjach jak nie mamy poÅ‚Ä…czenia z systemem centralnym, jak nam siÄ™ komponenty zewnÄ™trzne wywaliÅ‚y, to jest ostatecznoÅ›Ä‡. WiÄ™c wprowadzamy pewnÄ… formÄ™ (...) zamordyzmu, no sorry, tak po prostu musi byÄ‡.

**Åukasz KaÅ‚uÅ¼ny**: Jak popatrzymy to to, co mÃ³wisz, to stdout to jest miejsce na logi systemowe, Å¼eby szybko podejrzeÄ‡ co siÄ™ dzieje, co jest nie tak, a nie na tÄ… czÄ™Å›Ä‡ aplikacyjnÄ….

**Szymon Warda**: Bardziej dla mnie to jest taka ostatecznoÅ›Ä‡, Å¼e jeÅ¼eli coÅ› siÄ™ pojawiÅ‚o na stdout'cie to znaczy, Å¼e mamy juÅ¼ problem.

**Åukasz KaÅ‚uÅ¼ny**: WiÄ™c wiesz, ja trochÄ™ teÅ¼ patrzÄ™ z perspektywy OPS-owej, Å¼e coÅ› mi siÄ™ konkretnie gdzieÅ› grzeje, to pÃ³jdÄ™, zobaczÄ™ logi na podzie od instancji na przykÅ‚ad w tym, Å¼e to jest takie miejsce, z perspektywy osoby utrzymujÄ…cej, do szybkiego rÃ³wnieÅ¼ sprawdzenia tego, co siÄ™ dzieje w niektÃ³rych miejscach.

**Szymon Warda**: To pÃ³jdziemy teraz caÅ‚Ä… dÅ‚ugÄ… dyskusjÄ™ odnoÅ›nie wejÅ›cia na pod'a generalnie i kto tam moÅ¼e wejÅ›Ä‡. Z perspektywy OPS-owej, tak, czÄ™Å›ciowo, bo w tym momencie OPS nie zna kodu aplikacji, nie zna samych logÃ³w aplikacji, wiÄ™c generalnie jeÅ¼eli coÅ› bÄ™dzie widziaÅ‚ w logach aplikacji, to juÅ¼ tam generalnie znaczy, Å¼e jest niewesoÅ‚o, powiedzmy sobie szczerze. Developer nie powinien wchodziÄ‡ na stdout'a.

**Åukasz KaÅ‚uÅ¼ny**: Tak.

**Szymon Warda**: Tak, to juÅ¼ jest (...). Dobra, wspomnieliÅ›my odnoÅ›nie samego wysyÅ‚ania i dla mnie to jest okreÅ›lenie elementu, ktÃ³ry bÄ™dzie waÅ¼ny. Bo jeÅ¼eli mÃ³wimy, Å¼e aplikacja musi, znaczy powinna wysyÅ‚aÄ‡ logi do systemu, to w tym momencie poruszamy temat: to do czego ona wysyÅ‚a? Bo moÅ¼emy ustaliÄ‡ tak, jeÅ¼eli mamy maÅ‚y system, maÅ‚y wolumen, to wysyÅ‚ajmy do tego naszego systemu docelowego. JeÅ¼eli to jest jakaÅ›, zaÅ‚Ã³Å¼my, nie wiem, nawet jakaÅ› usÅ‚uga, nie wiem, niech to bÄ™dzie jakiÅ› Elastic, Loki i tak dalej, nie bawmy siÄ™. Bierzemy Sync'a czy jakiegoÅ› writera, ktÃ³ry umie komunikowaÄ‡ siÄ™ po naszym protokole, pewnie bÄ™dzie to Open Telemetry, bÄ™dzie jakiÅ› tam wÅ‚aÅ›ciwy protokÃ³Å‚ do komunikacji z naszym systemem do zbierania logÃ³w i tam wysyÅ‚amy bezpoÅ›rednio, nie bawimy siÄ™ z tym. Zabawa zaczyna siÄ™ wÅ‚aÅ›nie w sytuacji, jak mamy Å›redni wolumen i duÅ¼y wolumen, bo w tym momencie wchodzi nam buforowanie, kilka (...), buforowanie i batchowanie. O co chodzi? Czym siÄ™ one od siebie rÃ³Å¼niÄ…? Buforowanie, to znaczy, Å¼e nasz system do zbierania logÃ³w moÅ¼e mieÄ‡ czkawkÄ™, moÅ¼e byÄ‡ niedostÄ™pny, wiÄ™c musimy gdzieÅ› ten bufor mieÄ‡. To wÅ‚aÅ›nie peÅ‚ni. Tu rolÄ™ mamy dwojakÄ…, my widujemy czÄ™sto wÅ‚aÅ›ciwie KafkÄ™, bo jak nie wiadomo co zrobiÄ‡, to trzeba uÅ¼yÄ‡ Kafki. Ja bym polecaÅ‚ moÅ¼e jednak nie do koÅ„ca z prostego powodu, mamy wÅ‚aÅ›nie Open Telemetry Collector, mamy GrafanÄ™ Alloy, ktÃ³re umiejÄ… buforowaÄ‡, umiejÄ… tÄ… rolÄ™ speÅ‚niaÄ‡. (...) to jest to, Å¼e teÅ¼ mogÄ… batchowaÄ‡. Czyli nie wysyÅ‚aÄ‡ logÃ³w per linie, tylko wysyÅ‚amy w tym momencie logi w samych batchach. Zyskujemy oczywiÅ›cie duÅ¼Ä… wydajnoÅ›Ä‡ i zyskujemy lepsze utrzymanie, lepszÄ… jakoÅ›Ä‡ i tak dalej. A teraz jeszcze czemu mamy tylko tego Alloya albo Open Telemetry Collectora? Bo moÅ¼emy w tym momencie wzbogacaÄ‡ te nasze logi, moÅ¼emy dodawaÄ‡ labele, pola ktÃ³re nas interesujÄ… i tak dalej, o ktÃ³rych czÄ™sto nawet aplikacja moÅ¼e nie wiedzieÄ‡. MoÅ¼emy filtrowaÄ‡ i teÅ¼ moÅ¼emy pilnowaÄ‡. To jest nasze narzÄ™dzie z poziomu na przykÅ‚ad OPS-Ã³w i naszej platformy, gdzie pilnujemy, czy te logi sÄ… dobre i nie dopuszczamy na przykÅ‚ad tego caÅ‚ego baÅ‚aganu, ktÃ³ry nam siÄ™ nagle pojawi w naszym systemie do logowania i moÅ¼emy robiÄ‡ duÅ¼o, duÅ¼o wczeÅ›niej tak naprawdÄ™. Mamy polityki na przykÅ‚ad na Collectorze, one siÄ™ nazywajÄ… dev test i (...) czy po prostu nie przypuszczamy. ZaÅ‚Ã³Å¼my Å¼e ktoÅ› uÅ¼yÅ‚ fatal, a my ustaliliÅ›my, Å¼e pole nazywa siÄ™ critical, poziom logÃ³w. Åšmiejesz siÄ™ Åukasz. Ile razy widziaÅ‚eÅ› ora gdzie ktoÅ› szukaÅ‚ fatal albo critical?

**Åukasz KaÅ‚uÅ¼ny**: No jest takie coÅ›. Ja wiem, bo to sÄ…... Tak to jest problem.

**Szymon Warda**: (...) Å¼e jak siÄ™ pali to ktoÅ› tego ora zapomni daÄ‡ i nagle czÄ™Å›ci logÃ³w nie widaÄ‡.

**Åukasz KaÅ‚uÅ¼ny**: Wiem, nie, wiem, inaczej, to jest, ja siÄ™ z tego Å›miejÄ™, ale jest to prawda Szymon. To jest prawdziwy, napisane krwiÄ… i dupogodzinami oglÄ…dania takich przypadkÃ³w. Albo troubleshooting tego... Inaczej, dla mnie z tym poziomem, albo jeszcze nadawanie jakichÅ› wÅ‚asnych custom poziomÃ³w. Wiesz, Å¼e takie, widziaÅ‚eÅ› takie rzeczy, Å¼e ktoÅ› uwaÅ¼aÅ‚, Å¼e musi mieÄ‡ swojego pÅ‚atka Å›niegu dedykowanego.

**Szymon Warda**: Moim faworytem byÅ‚o, jak firma ma 15 poziomÃ³w logÃ³w. 15. PiÄ™kna sprawa po prostu bym powiedziaÅ‚. Dobra, ustaliliÅ›my kilka rzeczy. Dalej, jak juÅ¼ zaczÄ™liÅ›my takie typowe podstawy podstaw, kolejna rzecz, ustalenie w jakim formacie jest ta data i w jakim czasie jest ta data. Doskonale wiesz, Å¼e ile razy jest sytuacji, gdzie odpytujesz siÄ™ o logi, jest pytanie: ej, ale logujemy tu w UTC czy w czasie lokalnym? PrzecieÅ¼ to jest... A najlepiej jest to, jak mamy jeden system loguje w UTC, a inny w czasie lokalnym.

**Åukasz KaÅ‚uÅ¼ny**: Tak.

**Szymon Warda**: To sÄ… rzeczy drobne. Tu nie bÄ™dziemy mÃ³wiÄ‡ o Å¼adnych rewolucjach, ale to sÄ… rzeczy, ktÃ³re jak macie awarie i jest to uÅ‚oÅ¼one, to oszczÄ™dzacie naprawdÄ™ godziny czasami. Dobra, wiÄ™c przeszliÅ›my doÅ›Ä‡ pÅ‚ynnie do tego. Musimy ustaliÄ‡, jakie pola majÄ… znajdowaÄ‡ siÄ™ w systemie do zbierania logÃ³w. Niekoniecznie to sÄ… pola, ktÃ³re aplikacja loguje. Fajnie, gdyby aplikacja logowaÅ‚a jak najwiÄ™cej z nich, ale nie muszÄ…. Idziemy po kolei. Data, oczywiÅ›cie jest pierwszy. Kolejny, poziom, ustalenie nazw tych poziomÃ³w. To jest naprawdÄ™ waÅ¼ne.

**Åukasz KaÅ‚uÅ¼ny**: JeÅ¼eli masz dyskusjÄ™, oznacza to, Å¼e naleÅ¼y wrÃ³ciÄ‡ do standardu na przykÅ‚ad z Open Telemetry i nie dyskutowaÄ‡. I to jest nasza polecajka. JeÅ¼eli macie dyskusjÄ™ w firmie, jak coÅ› nazwaÄ‡, zrobiÄ‡, oznacza to, Å¼e pierdolnik bÄ™dzie kontynuowany i bierzemy na przykÅ‚ad wÅ‚aÅ›nie standard z Open Telemetry.

**Szymon Warda**: Tak, bo to zamyka w ogÃ³le tÄ… dyskusjÄ™ o tym, kto jest mÄ…drzejszy, kto co wymyÅ›liÅ‚ i odciÄ™cie siÄ™ od: to jest...

**Åukasz KaÅ‚uÅ¼ny**: Nasze.

**Szymon Warda**: Moja prawda jest mojsza, Twoja jest twojsza generalnie tak naprawdÄ™ i uÅ¼ywamy czegoÅ› zewnÄ™trznego. W kaÅ¼dej opcji ustalenia standardÃ³w wspieranie siÄ™ czymÅ› zewnÄ™trznym jest super pomysÅ‚em, rozwiÄ…zuje wiÄ™kszoÅ›Ä‡ konfliktÃ³w. Dobra, dalsza opcja, okreÅ›lamy typ. Jak juÅ¼ aplikacja loguje, to okreÅ›lamy czy to mamy jakieÅ›, powiedzmy, czy to sÄ… audytowe? Z tym jest pewien problem, bo najlepiej w ogÃ³le gdyby audytowe byÅ‚y w innym strumieniu w ogÃ³le wysyÅ‚ane, inaczej filtrowane.

**Åukasz KaÅ‚uÅ¼ny**: Tak, to jest w ogÃ³le rzecz, o ktÃ³rÄ… siÄ™ tam moÅ¼na pokÅ‚Ã³ciÄ‡. JeÅ¼eli zrobimy prawidÅ‚owo event sourcing, to logi...

**Szymon Warda**: Åukasz, wszÄ™dzie byÅ‚ outsourcing.

**Åukasz KaÅ‚uÅ¼ny**: Tak, ale to wiesz, to jest teÅ¼, wychodzi na to, Å¼e ten log audytowy z tego, co siÄ™ dziaÅ‚o w systemie, teÅ¼ w niektÃ³rych miejscach zmian na obiektach mÃ³gÅ‚by byÄ‡ spokojnie w bazie danych, a nie aplikacji.

**Szymon Warda**: Ale nie zawsze jest, tak to bywa. Czy to jest (...) aplikacyjne? Nie, wiÄ™c bywa. Dalej, kolejne w sumie staje siÄ™ opcjonalne, bo ono jest zaleÅ¼ne od tego, jak mamy uÅ‚oÅ¼one Å›rodowisko. JeÅ¼eli mamy system do zbierania logÃ³w per Å›rodowisko, to to pole po prostu omijamy. Nie ma sensu, Å¼eby to pole byÅ‚o wszÄ™dzie takie samo.

**Åukasz KaÅ‚uÅ¼ny**: Tak, ewentualnie Szymon bym dorzuciÅ‚, jeÅ¼eli tak jak w Lokim mamy tenanty.

**Szymon Warda**: O, i tak za chwilÄ™ powiemy, jak to w ogÃ³le podzieliÄ‡, bo to jest teÅ¼ bardzo, bardzo waÅ¼na rzecz.

**Åukasz KaÅ‚uÅ¼ny**: Tak, jeÅ¼eli nasz system do logowania uÅ¼ywa tenantÃ³w, to teÅ¼ wtedy te pole staje siÄ™ opcjonalne.

**Szymon Warda**: Tak. Kolejne pole to jest service name. I kolejna dyskusja, Å¼eby byÅ‚a i... Co siÄ™ Å›miejesz? Ile razy widziaÅ‚eÅ› sytuacjÄ™, gdzie czÄ™Å›Ä‡ zespoÅ‚Ã³w, gdzie serwis nazywa siÄ™ czasami tak, czasami tak?

**Åukasz KaÅ‚uÅ¼ny**: SÅ‚uchaj, takich problemÃ³w z nazwami i nieposiadaniem wspÃ³lnego nazewnictwa to widziaÅ‚em o wiele gorszych. Jest on standardowy, Å¼e ludzie mylÄ…. My uÅ¼ywamy tego serwisu i nazywamy go tak, a zespÃ³Å‚, ktÃ³ry dostarcza ten serwis nazywa go zupeÅ‚nie inaczej.

**Szymon Warda**: Tak, tak, dokÅ‚adnie. WiÄ™c moja propozycja to jest taka maÅ‚a, drobna rzecz. PamiÄ™tajcie, Å¼e label, Å¼e moÅ¼ecie czÄ™Å›Ä‡ metadanych z Kubernetesa przekazywaÄ‡ i wstrzykiwaÄ‡ jako environment variable do pod'Ã³w, Å¼eby teÅ¼ aplikacja wiedziaÅ‚a, jak siÄ™ nazywa. I to siÄ™ przydaje, Å¼eby aplikacja generalnie logujÄ…c logowaÅ‚a pod nazwÄ…, ktÃ³ra jest. PierdoÅ‚a, cieszy i to teÅ¼ pokazuje widocznoÅ›Ä‡, co jest ÅºrÃ³dÅ‚em prawdy. Dobra, idziemy dalej. Trace ID, Span ID, te dwie rzeczy nie trzeba tÅ‚umaczyÄ‡, bo chcemy czasami znaleÅºÄ‡ wszystkie logi odnoÅ›nie trace'a, czyli caÅ‚ego procesu i logi odnoÅ›nie spana, czyli czynnoÅ›ci.

**Åukasz KaÅ‚uÅ¼ny**: Czyli jak popatrzymy sobie, tak, trace wÅ‚aÅ›nie i teraz, bo wrzuciÅ‚eÅ› jeszcze Parent Trace ID. I to jest taki problem, ktÃ³ry jest, czy my powinniÅ›my mieÄ‡ 1 kontekst ID zrobione na caÅ‚y taki wÅ‚aÅ›nie, request ID, Å¼eby przeÅ›ledziÄ‡ caÅ‚y, czy jak to siÄ™ powinno uÅ‚oÅ¼yÄ‡?

**Åukasz KaÅ‚uÅ¼ny**: WÅ‚aÅ›nie i teraz dobrze, Å¼e powiedziaÅ‚eÅ›, Å¼e to... Nie powiedziaÅ‚em o tym na starcie z prostego bardzo powodu, to jest trochÄ™ opcjonalne, zaleÅ¼y jakÄ… mamy granularnoÅ›Ä‡ tych trace'Ã³w. Fajnie byÅ‚oby widzieÄ‡ zaÅ‚Ã³Å¼my Parent Trace... Czemu? Czemu to tu jest dodane? Bo nie mamy w logach wyszukania tej hierarchii tak naprawdÄ™. A na przykÅ‚ad chcemy wiedzieÄ‡ jak wyglÄ…da trace powiedzmy z caÅ‚ego procesowania naszego requestu. No i teraz to nie jest Trace ID, bo ten Trace ID moÅ¼na zrobiÄ‡ przez poÅ‚Ä…czenie service i trace, ale czasami potrzebujemy wiÄ™kszej agregacji. WiÄ™c jeÅ¼eli macie doÅ›Ä‡ drobno rozbite trace'y, ponad ten poziom, ktÃ³ry jest domyÅ›lny, to rozwaÅ¼enie Parent Trace ID pod dyskusjÄ™.

**Åukasz KaÅ‚uÅ¼ny**: I propagacji.

**Szymon Warda**: I propagacji, dokÅ‚adnie. Idziemy dalej. WiadomoÅ›Ä‡, czyli co siÄ™ w ogÃ³le wydarzyÅ‚o? Taki, Å¼eby daÅ‚o siÄ™ odczytaÄ‡. Albo to teÅ¼ moÅ¼e byÄ‡ ten message z errora. I na koÅ„cu lecimy wÅ‚aÅ›nie taki error, ktÃ³ry teÅ¼ jest stackiem tak naprawdÄ™. Czmu jest na koÅ„cu? Bo on z reguÅ‚y najczÄ™Å›ciej siÄ™ rozjeÅ¼dÅ¼a. I tu super waÅ¼ne. JeÅ¼eli moÅ¼emy zamieniamy new line'y, Å¼eby one jednak byÅ‚y w jednej linii. KtoÅ› pomyÅ›li: ale (...) czy coÅ›? Tak, bÄ™dziemy czytaÄ‡. Ale w sytuacji jeÅ¼eli nie wiecie czy czego siÄ™ udaÅ‚o zrobiÄ‡ i bÄ™dziemy musieli wypisaÄ‡ ten error na stdout', co nam siÄ™ logi nie rozjeÅ¼dÅ¼Ä…, bo stdout z reguÅ‚y parsuje per nowa linia.

**Åukasz KaÅ‚uÅ¼ny**: Znaczy nie, standardowa klasyka: jak obsÅ‚uÅ¼yÄ‡ multiline'a, Å¼eby nie zostaÅ‚ rozjechany?

**Szymon Warda**: Nie da siÄ™. To sÄ… godziny, naprawdÄ™ dziesiÄ…tki osobogodzin na pisanie jakichÅ› regexÃ³w, ktÃ³re waÅ‚kujÄ… kolejny przykÅ‚ad kolejnego new line'a.

**Åukasz KaÅ‚uÅ¼ny**: Ja wiem, chciaÅ‚em powiedzieÄ‡, Å¼e ludzie bÄ™dÄ… siÄ™ kÅ‚Ã³ciÄ‡ w komentarzach pewnie, bo to jest znane, Å¼e w tym. Zawsze dla... Nie osiÄ…gniemy tego generycznie.

**Szymon Warda**: WiÄ™c jeÅ¼eli moÅ¼emy, pozbÄ…dÅºmy siÄ™ tego po prostu. To jest najlepszy scenariusz. A potem moÅ¼emy to juÅ¼ w sytuacji, w ktÃ³rej otrzymaliÅ›my logi, to moÅ¼emy tam juÅ¼ sobie Å‚adnie te new line'y porozbijaÄ‡ i to moÅ¼emy spokojnie obsÅ‚uÅ¼yÄ‡. Dobra, jak juÅ¼ mamy pola, to przeklÄ…Å‚bym, ale nie bÄ™dziemy tego robili, ustalamy sobie, zakladamy sobie repo, gdzie wpisujemy ktÃ³re pole co znaczy, Å¼eby to nie byÅ‚o ustalone na mordÄ™ tu i teraz, Å¼e tak powiem. I tam ma byÄ‡ jasne, jak to siÄ™ zmieni i tak dalej. To jest szczegÃ³lnie o tyle waÅ¼ne, Å¼e te pola bÄ™dÄ… siÄ™ zmieniaÅ‚y, bÄ™dÄ… dochodziÅ‚y nam pola konkretne, biznesowe. NiektÃ³re zespoÅ‚y bÄ™dÄ… miaÅ‚y konkretne swoje osobne pola. Czemu? To powiemy za chwilÄ™. WiÄ™c to musi byÄ‡ udokumentowane, ktÃ³re pole co znaczy. Dobrze, idziemy dalej. To juÅ¼ taka trochÄ™ bajka, trochÄ™ moja, trochÄ™ Twoja, czyli ustalamy jawnie, bo (...) jest komunikacja, z czego zbieramy te logi.

**Åukasz KaÅ‚uÅ¼ny**: I teraz to jest kurde duÅ¼y problem, jak sobie popatrzymy, bo wszyscy powiedzÄ…, Å¼eby zbieraÄ‡ ze wszystkiego.

**Szymon Warda**: Ta, jasne.

**Åukasz KaÅ‚uÅ¼ny**: Musimy mieÄ‡ wszystko. Inaczej, po pierwszej awarii manager wyglÄ…da jak... Szymon, mam bardzo dobre porÃ³wnanie, jest taka sÅ‚ynna scena w Hollywood "give me everyone" po kresce w Å‚azience. I tak wyglÄ…da manager, ktÃ³ry mÃ³wi, Å¼e chce mieÄ‡ wszystkie logi, Å¼eby potem troubleshootowaÄ‡.

**Szymon Warda**: A to jest to pytanie, ok. Czy chcesz mieÄ‡ w takim razie logi systemowe z Windowsa? Jak zaÅ‚Ã³Å¼my mamy Windowsa. Czy chcesz mieÄ‡ event loga windowsowego? I nagle jest: o tym nie pomyÅ›laÅ‚em. Logi wszystkiego to naprawdÄ™ jest bardzo duÅ¼o logÃ³w, do ktÃ³rych z reguÅ‚y nie mamy Å¼adnej potrzeby uÅ¼ycia. WiÄ™c musi byÄ‡ jasno okreÅ›lone co my wÅ‚aÅ›ciwie zbieramy. I Å¼eby potem nie byÅ‚o smutkÃ³w i okreÅ›lenie teÅ¼... Bo To jest kompromis kosztowy mimo wszystko i kompromis wydajnoÅ›ciowy, nie oszukujmy siÄ™, tak to wyglÄ…da. Architektura, to caÅ‚y czas na Twoich szkoleniach, jest kompromisem.

**Åukasz KaÅ‚uÅ¼ny**: Dobra.

**Szymon Warda**: Dobra.

**Åukasz KaÅ‚uÅ¼ny**: Czyli mamy sobie co? Zbieramy, obowiÄ…zek to sÄ… logi z aplikacji, to jest pierwsza rzecz. Druga, to sÄ… czÄ™Å›ci infrastruktury aplikacyjnej. I kurde, i to bÄ™dzie juÅ¼ to tak, z mojej dziaÅ‚ki patrzÄ…c siÄ™ na to, to teÅ¼ jest problem. Bo tak jak rzuciÅ‚eÅ› (...) zapisaÅ‚eÅ› przykÅ‚ady, dobra. Z Ingress kontrolerÃ³w jest to must have, Å¼eby potem teÅ¼ tam dojÅ›Ä‡, coÅ› troubleshotowaÄ‡. Z drugiej strony logi z bazy. No i tutaj bÄ™dzie taka... W wiÄ™kszoÅ›ci przypadkÃ³w logi na przykÅ‚ad z duÅ¼ej czÄ™Å›ci infry, na przykÅ‚ad developerowi one nic nie powiedzÄ… i w Å¼aden sposÃ³b... Jedyna jakÄ… korelacjÄ™ zÅ‚apiesz, jakbyÅ› chciaÅ‚ zrobiÄ‡ mega kwerendÄ™, to zauwaÅ¼, Å¼e Twoja piÄ™kna strukturyzacja siÄ™ rozwali w pyÅ‚.

**Szymon Warda**: OczywiÅ›cie, Å¼e tak.

**Åukasz KaÅ‚uÅ¼ny**: Tak. I jedynÄ… rzeczÄ…, ktÃ³rÄ… zrobisz, to korelacjÄ™ linijek po czasie.

**Szymon Warda**: Wiesz co, mi bardziej chodzi o coÅ› innego. Å»e na przykÅ‚ad dowiedziaÅ‚em siÄ™ na przykÅ‚ad po czasie, zaÅ‚Ã³Å¼my (...) wpisu, Å¼e na przykÅ‚ad baza jest, baza na przykÅ‚ad ma, raportuje, Å¼e ma opÃ³Åºnienia w zapisach. A widzieliÅ›my na przykÅ‚ad klientÃ³w, ktÃ³rym wyleciaÅ‚ caÅ‚y klaster, bo mieli problemy z macierzami, o ktÃ³rych nie wiedzieli.

**Åukasz KaÅ‚uÅ¼ny**: Tak.

**Szymon Warda**: I to jest takie wyÅ‚apanie, nie chodzi mi oczywiÅ›cie o Å‚apanie, Å¼e na poziomie bazy, Å¼e coÅ› tam, ktoÅ› siÄ™ zalogowaÅ‚ i tak dalej, tylko wyÅ‚apanie jakichÅ› sytuacji, ktÃ³re jak zobaczymy, to nagle doskonale wiemy, co jest powodem. ZaÃ³Å¼my Å¼e indeksy mu siÄ™ rozjechaÅ‚y. Na przykÅ‚ad mimo Å¼e ma problemy z komunikacjÄ…, z replikami, teÅ¼ bardzo waÅ¼ny bÅ‚Ä…d, ma problemy na przykÅ‚ad, Å¼e jest under memory pressure, Å¼e tak powiem, tak one sÄ… z reguÅ‚y raportowane. Taki zestaw bÅ‚Ä™dÃ³w tych wÅ‚aÅ›nie infrastruktury aplikacyjnej, ktÃ³re nagle mÃ³wiÄ… duÅ¼o. Dobra. Potem dalej, jeÅ¼eli mÃ³wimy o Kubernetesie, to wiadomo, logi systemowe z node'Ã³w, co tam siÄ™ w ogÃ³le dzieje i jak one siÄ™ zachowujÄ…, teÅ¼ siÄ™ przydaje, Å¼eby teÅ¼ wiedzieÄ‡, czy nie sÄ… (...).

**Åukasz KaÅ‚uÅ¼ny**: Dobra, dojdziemy do tenantÃ³w i rozdzielania tego, bo to jest ciekawa sprawa w tym miejscu potem.

**Szymon Warda**: Tak. Dobra, mamy tyle znowu z rzeczy maÅ‚ych, drobnych, o ktÃ³rych wÅ‚aÅ›ciwie by siÄ™ nie pomyÅ›laÅ‚o. To jest formatowanie. Ustalamy. Jest to JSON, jest to UTF i jest to w jednej linii i koniec. Tak, tu nie ma co prowadziÄ‡ wiÄ™kszej dyskusji tak naprawdÄ™. SzczegÃ³lnie ta jedna linia. NaprawdÄ™, jeÅ¼eli moÅ¼emy to formatujemy to do jednej linii. To jest prosty replace na jakimÅ› tekÅ›cie, Å¼eby to byÅ‚o w szczegÃ³lnoÅ›ci z trasy. I to naprawdÄ™ nieraz uratuje Å¼ycie, jak gÅ‚Ã³wnie w sytuacji, jak siÄ™ aplikacja wywali i bÄ™dziemy po prostu obsrany mÃ³wiÄ…c bardzo prosta, dobra, dobra rzecz do ustalenia teÅ¼. I to jest bardziej taka praktyka dla developerÃ³w. Zapis jest asynchroniczny i dlatego siÄ™ miÄ™dzy innymi nie piszemy na terminal, bo terminal jest zapisem asynchronicznym i bardzo zwolniÄ‡, ale Å¼eby ustalenie, Å¼eby deweloperzy nie pada. PomysÅ‚, Å¼e wysyÅ‚a teologii powiedzmy po Open Letter Protocol czy czymkolwiek innym i czeka na ten zapis, tam wszÄ™dzie ma byÄ‡ asynchroni. Dobra, odnoÅ›nie samego wysyÅ‚ania juÅ¼ mÃ³wiliÅ›my, to po prostu, Å¼e to jest bardzo, bardzo waÅ¼ne. MaÅ‚y wolumen, moÅ¼emy caÅ‚Ä… architekturÄ™ ominÄ…Ä‡, spoko, wysyÅ‚amy do jakiegoÅ› tam systemu. JeÅ¼eli mamy cokolwiek wiÄ™cej niÅ¼ aplikacja (...) przez kilka osÃ³b, nie jest to jakieÅ› krytyczne, to wÅ‚aÅ›nie dajemy tego Open Telemetry Collectora, Alloy'a, jak bardzo nie moÅ¼emy, to najwyÅ¼ej KafkÄ™ dorzuÄ‡my, ale cokolwiek niech tam po drodze bÄ™dzie. I teraz, Å¼eby teÅ¼ byÅ‚o jasne, dorzuciliÅ›my, to juÅ¼ nie jest super szczÄ™Å›cie, tylko wtedy pamiÄ™tajmy, Å¼e jeÅ¼eli aplikacja wysyÅ‚a, to ma pewne obowiÄ…zki, jeÅ¼eli chodzi o wysyÅ‚anie. Ona teÅ¼ musi mieÄ‡ retry, powtarzanie, teÅ¼ musi mieÄ‡ jakieÅ› buforowanie i raportowanie teÅ¼, wypisywanie, Å¼e nie mogÅ‚a siÄ™ skomunikowaÄ‡ i jak siÄ™ nie mogÅ‚a skomunikowaÄ‡, to te logi wypisuje na stdout'a w razie czego, Å¼eby nie byÅ‚o tylko, Å¼e aplikacja zareaguje: nie mogÄ™ poÅ‚Ä…czyÄ‡ siÄ™ z Open Telemetry Collectorem, ale to logi, to tam wÅ‚aÅ›ciwie trudno siÄ™ mÃ³wi i juÅ¼ ich nie zobaczysz. Super, fajnie, ale przydaÅ‚oby siÄ™ wiedzieÄ‡ teÅ¼, co siÄ™ tam wÅ‚aÅ›ciwie dzieje. Ponownie, stdout jest absolutnym zÅ‚em i ostatecznoÅ›ciÄ…. Dobrze. Dochodzimy teraz do rzeczy doÅ›Ä‡ krytycznej, czyli mianowicie uÅ¼ywanie tenantÃ³w, bo sporo systemÃ³w do logowania to sÄ… systemy tenantowe. Jedna waÅ¼na rzecz, nie mamy jednego systemu z jednym tenantem dla caÅ‚ej organizacji. WidzieliÅ›my takie rzeczy. To nie jest nic dobrego i nagle kaÅ¼dy widzi wszystko i mamy totalny baÅ‚agan. Czemu tak jest?

**Åukasz KaÅ‚uÅ¼ny**: Jak to byÅ‚o? PrÃ³by jednego indeksu w Elasticu na wszystko, bo nie chcemy mieÄ‡ ich za duÅ¼o.

**Szymon Warda**: Tak, Å¼eby siÄ™ wyszukiwaÅ‚o szybko. Z kilku powodÃ³w, po pierwsze, bÄ™dziemy mieÄ‡ sytuacjÄ™, gdzie niektÃ³re systemy bÄ™dÄ… miaÅ‚y wÅ‚asne pola. I jak ktoÅ› ma na przykÅ‚ad pole customer, to customer bÄ™dzie zupeÅ‚nie inaczej rozumiany w innych systemach. I to rozdzielamy tenantami. To jest bardzo, bardzo potrzebne. Teraz jak rozdzielamy? Ja z reguÅ‚y per system, nie serwis, tylko system. Czyli taki caÅ‚y system, ktÃ³ry siÄ™ w miarÄ™ ze sobÄ… komunikuje. To rozdzielamy i to z reguÅ‚y jest jakoÅ› tam tenantem, chyba Å¼e jakiÅ› podzbiÃ³r naszej organizacji i tak dalej, dochodzÄ… trochÄ™ polityka i jak ta organizacja jest zbudowana, to teÅ¼ jest bardzo waÅ¼ne.

**Åukasz KaÅ‚uÅ¼ny**: To jest, Szymon, ja bym to podkreÅ›liÅ‚, Å¼e jest tutaj prawo Conwaya, ktÃ³re jest teÅ¼ dla Kubernetesa, Å¼e struktura namespace'Ã³w i klastrÃ³w na Kubernetesie odzwierciedla strukturÄ™ komunikacyjnÄ… w firmie i struktura tenantÃ³w teÅ¼ to bÄ™dzie odzwierciedlaÅ‚a.

**Szymon Warda**: OczywiÅ›cie, Å¼e tak. Powiem tak, zespoÅ‚y majÄ… dostÄ™p do swojego tenanta, a OPS-i wiadomo, Å¼e bÄ™dÄ… mieli dostÄ™py szersze. Dobra, kolejna rzecz do ustalenia, to Å¼eby byÅ‚a zakomunikowana globalnie. I nie mÃ³wiÄ™ globalnie teraz dla devÃ³w, tylko globalnie nawet dla biznesu. Retencja logÃ³w, jak dÅ‚ugo je trzymamy? Czemu to jest waÅ¼ne? Tak, mÃ³wiliÅ›my, jak mamy tÄ™ takÄ… caÅ‚Ä… drobnicÄ™ logÃ³w i teÅ¼ trace'Ã³w, bo to trochÄ™ bym w to wyliczyÅ‚ i rÃ³Å¼ne strumienie rÃ³Å¼nÄ… majÄ… retencjÄ™, Å¼eby potem nie robiÄ‡ po prostu delete. Podzielmy to konkretnie co, gdzie, jak siÄ™ dzieje i jasno zakomunikujmy. Moja propozycja jest taka, Å¼e lepiej jest zbieraÄ‡ w niektÃ³rych sytuacjach logÃ³w wiÄ™cej, a krÃ³cej je trzymaÄ‡. Ewentualnie potrzebujemy na przykÅ‚ad (...). Nie trzymajmy logÃ³w info na przykÅ‚ad w Archive, bo taki mamy pomysÅ‚, Å¼e o to bÄ™dzie taÅ„sze. Nie, odzyskanie tych logÃ³w i odzyskanie zaÅ‚Ã³Å¼my paru terabajtÃ³w z Archive teÅ¼ bÄ™dzie nas kosztowaÅ‚o i to duÅ¼o i bÄ™dzie maÅ‚o przyjemne. WiÄ™c teÅ¼ podzielmy, ktÃ³re logi trzymamy na dÅ‚uÅ¼szy czas i trzymamy tam tylko te niezbÄ™dne, ktÃ³re musimy trzymaÄ‡. Znowu, inne strumienie, uÅ‚atwi nam Å¼ycie.

**Szymon Warda**: Jak juÅ¼ jesteÅ›my przy tym obszarze, to teÅ¼ ustalmy budÅ¼ety kto moÅ¼e ile logowaÄ‡. I to moÅ¼e brzmieÄ‡ Å›miesznie, ale to jest waÅ¼ne, bo doskonale wszyscy wiemy to, Å¼e trafi nam siÄ™ jakiÅ› zespÃ³Å‚, ktÃ³ry jest nadgorliwy i wypisuje, loguje wszystko na info, wypisuje wszystko i caÅ‚Ä… drobnicÄ™ i takie zespoÅ‚y bÄ™dÄ… tym elementem, ktÃ³ry nam trochÄ™ systemy wszystkie porozwalajÄ…. WiÄ™c okreÅ›lamy kto ma ile moÅ¼e logowaÄ‡ w jakim czasie i to trzymamy na dev test. Wiadomo, na holdzie juÅ¼ bym tego nie trzymaÅ‚.

**Åukasz KaÅ‚uÅ¼ny**: WÅ‚aÅ›nie chciaÅ‚em powiedzieÄ‡, Å¼e z tym byÅ‚oby warto doprecyzowaÄ‡ w ktÃ³rym miejscu.

**Szymon Warda**: Tak, produkcje juÅ¼ nie, bo nie chcielibyÅ›my logÃ³w gubiÄ‡. Ale to ma byÄ‡ taki bicz na to, Å¼e chÅ‚opaki i dziewczyny ogarnijcie siÄ™. MoÅ¼e nie potrzebujecie wysyÅ‚aÄ‡ 50 megabajtÃ³w logÃ³w na sekundÄ™, bo to trochÄ™ nie w tym kierunku. ZauwaÅ¼my co tam siÄ™ w ogÃ³le dzieje. Dobra, idziemy teraz. I teraz wÅ‚aÅ›nie jeszcze jedna uwaga, czemu waÅ¼ne jest okreÅ›lenie iloÅ›ci? Bo jak bÄ™dziemy mieli tych logÃ³w za duÅ¼o, to iloÅ›Ä‡ nie idzie w parze z jakoÅ›ciÄ…. A my potrzebujemy logÃ³w dobrej jakoÅ›ci, a nie po prostu wszystkiego co ktokolwiek wpadÅ‚ na pomysÅ‚, Å¼eby kiedykolwiek wysÅ‚aÄ‡.

**Åukasz KaÅ‚uÅ¼ny**: Czasem mam wraÅ¼enie, Å¼e logi przypominajÄ… nasz troubleshooting dupÄ… w niektÃ³rych momentach. Bo tak to trzeba okreÅ›liÄ‡, troubleshooting dupÄ…. To co jest wysyÅ‚ane czasem na prodzie teÅ¼ w ten sposÃ³b wyglÄ…da.

**Szymon Warda**: OczywiÅ›cie, Å¼e tak. Co wiÄ™cej, logi majÄ… takÄ… wrednÄ… tendencjÄ™, Å¼e my je tylko dodajemy, nigdy ich nie usuwamy. WiÄ™c bez budÅ¼etÃ³w takich, ktÃ³re mÃ³wiÄ… co ile moÅ¼emy wysyÅ‚aÄ‡, to bÄ™dzie to rosÅ‚o, rosÅ‚o, rosÅ‚o, rosÅ‚o o rzeczy totalnie bezuÅ¼yteczne, bo ktoÅ› kiedyÅ› jakoÅ› tu je dopisaÅ‚. WiÄ™c to jest bardzo waÅ¼ne. Dobra, takie (...) nazywamy quality of life, polepszenie jakoÅ›ci. Dobre logowanie zaczyna siÄ™ teÅ¼ od pewnych standardÃ³w. Czyli prosta rzecz, ustalenie standardÃ³w labelowania w Kubenretesie, bo to nam da Å‚adnÄ… politykÄ™, jeÅ¼eli chodzi o ÅºrÃ³dÅ‚o prawdy, co siÄ™ jak nazywa. Linkowanie wÅ‚aÅ›nie tych traceÃ³w, logÃ³w, czyli trace'Ã³w z logami, czyli to, Å¼e ustalamy jak mamy trace'a, to wrzucamy na przykÅ‚ad w systemie, moÅ¼na na przykÅ‚ad to zrobiÄ‡ w Grafanie m.in., Å¼e w takim razie po jakim polu ma system szukaÄ‡ w logach dla konkretnych trace'Ã³w. Bardzo wygodne, maÅ‚a rzecz, ale bardzo cieszy. I nie bÄ…dÅºmy tutaj takim jednym panem z wÄ…sem z Austrii, mianowicie pozwÃ³lmy developerom pisaÄ‡ lokalnie do stdouta, tylko na produkcji niech sobie piszÄ…...

**Åukasz KaÅ‚uÅ¼ny**: Raczej odpowiednio nasza biblioteka do logowania powinna wspieraÄ‡ takie pierdoÅ‚y jak rÃ³Å¼ne configi. To jest chyba istotny element.

**Szymon Warda**: Produkcyjny czy... Tak, dokÅ‚adnie tak. I rozumiem, lokalnie teÅ¼ bÄ™dzie, teÅ¼ czÄ™sto logi sÄ… nieustrukturyzowane i tak dalej, bo nie ma co siÄ™ porywaÄ‡ na to, Å¼e tak, bÄ™dziemy w jednej linii wypisywali JSON. To nie zadziaÅ‚a. Za chwilÄ™ ten caÅ‚y pomysÅ‚ polegnie.

**Åukasz KaÅ‚uÅ¼ny**: Dobra, to Szymon, jakbyÅ› miaÅ‚ powiedzieÄ‡ trzy rzeczy, ktÃ³re trzeba zapamiÄ™taÄ‡ z tego, co powiedziaÅ‚eÅ› wszystkiego dzisiaj?

**Szymon Warda**: SpisaÄ‡ dokument, jedna rzecz i ustaliÄ‡.

**Åukasz KaÅ‚uÅ¼ny**: Co w nim ma byÄ‡?

**Szymon Warda**: Pola z nazwami do czego sÅ‚uÅ¼Ä…. To jest w tym dokumencie. Druga rzecz, to jest ustalmy, gdzie te logi sÄ… wysyÅ‚ane, czyli Å¼e pobierze to, wysyÅ‚a aplikacja i czy wysyÅ‚a do systemu logowania, czy wysyÅ‚a do czegoÅ› po drodze. Ja jestem za tym do czego po drodze. Jak juÅ¼ to zrobicie, to naprawdÄ™ bÄ™dzie juÅ¼ caÅ‚kiem nieÅºle. Dokument teÅ¼ jest standardem i to jest informacja dla caÅ‚ej organizacji co jak wyglÄ…da i potem ustalenie architektoniczne, jak wÅ‚aÅ›ciwie wysyÅ‚amy. ZapamiÄ™tacie, bÄ™dzie dobrze, a potem moÅ¼emy dalej rozmawiaÄ‡, Å¼e tak powiem.

**Åukasz KaÅ‚uÅ¼ny**: Dobra, nastÄ™pna rzecz, bo powiedzieliÅ›my o trzech.

**Szymon Warda**: NaprawdÄ™ bÄ™dziesz tak te trzy wyciÄ…gaÅ‚? Dobrze, to co jeszcze dorzucÄ™? Wszystko w jednej linii. SpÄ™dziÅ‚em duÅ¼o czasu na pisanie tych regexÃ³w o tym, Å¼eby wyÅ‚apywaÄ‡ multiline'y i nie zamierzam tego robiÄ‡ wiÄ™cej.

**Åukasz KaÅ‚uÅ¼ny**: Dobra, dobra. To sÅ‚uchajcie, tyle na dzisiaj. Trzymajcie siÄ™. Na razie.

**Szymon Warda**: Na razie. Hej.

**Åukasz KaÅ‚uÅ¼ny**: Hej.
