---
title: '#18 API Gateway '
date: 2020-01-03T08:00:00+02:00
episode: "18"
tags: ["API Gateway", "Microservices", "Security", "Architecture"]
description: "API Gateway: od prostego proxy przez microservices z throttling i circuit breaker po Enterprise z monetyzacj. Kiedy wprowadza i jak nie sta si ESB?"
seo_keywords: "api gateway, api proxy, microservices, enterprise api gateway, routing, security, throttling, circuit breaker, architektura it, wzorce projektowe"

# Hugo fields
youtube_id: "UkpM0YJ1SR0"
youtube_url: "https://www.youtube.com/embed/UkpM0YJ1SR0?enablejsapi=1"

# Spreaker data (technical only - for Schema.org, not user-facing)
duration: "PT22M35S"
audio_url: "https://api.spreaker.com/v2/episodes/22582595/download.mp3"

# Social media images (poprawione nazwy)
og_landscape: "/img/18-landscape.webp"
og_square: "/img/18-square.webp"

# Intro for episode
intro: |
  **"API Gateway to makija偶 nakadany na system, 偶eby adnie wyglda, mimo 偶e przeszed ju偶 przez 10 czy 15 operacji plastycznych"** - Szymon definiuje problem, z kt贸rym zmaga si ka偶dy architekt po latach technicznych pivot贸w. Ale czy **API Gateway** to ratunek, czy kolejna warstwa, kt贸ra za chwil stanie si _"wielkim pierdolnikiem"_?
  
  ukasz i Szymon rozwiewaj chaos: od prostego **API proxy** (**nginx**, **HAProxy**, **Ingress controllers**), przez **microservices gateway** z **throttlingiem** i **circuit breakerem**, po **Enterprise API Gateway** z **monetyzacj** i **self-service portalem**. Kluczowa r贸偶nica? _"API Gateway mo偶e mie kroki techniczne i niebiznesowe"_ - w momencie gdy lduje tam proces biznesowy, wracasz do **ESB**.
  
  Najlepsze rozwizania? **Google Apigee** i **Azure API Management** jako **enterprise**, **Spring Cloud Gateway** dla **Javy**, **Ocelot** dla **.NET**. Dlaczego w og贸le powstao **Enterprise API Gateway**? Bo firmy odkryy, 偶e dane i usugi mo偶na sprzedawa - **open banking**, **PSD2** i regulacje wymusiy profesjonalizacj.
  
  Kiedy wprowadza? _"Wtedy, kiedy chcemy pokaza nasze usugi innym developerom"_. Wczeniej? Przepacasz za funkcje, kt贸rych nie potrzebujesz. P贸藕niej? Tw贸j chaos architektoniczny ju偶 wyciek na wiat. 
  

# Links for the episode
links:
  - title: "Google (Apigee)"
    url: "https://cloud.google.com/apigee/"
  - title: "Beyond Microservices: Streams, State and Scalability"
    url: "https://www.infoq.com/presentations/microservices-streams-state-scalability"
  - title: "Ambassador"
    url: "https://www.getambassador.io/"
  - title: "Kong Gateway"
    url: "https://konghq.com/kong/"
  - title: "Azure API API Management"
    url: "https://azure.microsoft.com/en-us/services/api-management/"
  - title: "API Management Module for NGINX Controller"
    url: "https://www.nginx.com/products/nginx-controller/api-management/"
  - title: "Spring Cloud Gateway"
    url: "https://spring.io/projects/spring-cloud-gateway"
  - title: "Ocelot"
    url: "https://github.com/ThreeMammals/Ocelot"
  - title: "Performance testing HTTP/1.1 vs HTTP/2 vs HTTP/2 + Server Push for REST APIs"
    url: "https://evertpot.com/h2-parallelism/"
  - title: "Microservices API Gateways vs. Traditional Enterprise API Gateways"
    url: "https://www.getambassador.io/about/microservices-api-gateways/"
  - title: "UserVoice"
    url: "https://github.com/patoarchitekci/uservoice/issues"
---

**Szymon Warda**: Cze! Suchacie Patoarchitekt贸w. Prowadz Szymon Warda...

**ukasz Kau偶ny**: I ukasz Kau偶ny. Wszystkie linki do tego odcinka znajdziecie na Patoarchitekci.io/18. Dobra Szymonie, to o czym dzi?

**Szymon Warda**: Temat dzisiejszego odcinka da ukasz Kurzyniec na uservoice na GitHubie. Oczywicie link do samego uservoice bdzie w opisie odcinka, a bdzie o API Gateway.

**ukasz Kau偶ny**: Tak, ukasz prosi troszeczk o jeden ze wzorc贸w wykorzystania, ale pierw warto wprowadzi API Gatewaye, bo w sumie jeszcze ich tutaj nie byo.

**Szymon Warda**: Tak, dokadnie, a to jest do spory kawaek. Ale zacznijmy od link贸w. Co u Ciebie?

**ukasz Kau偶ny**: Wpis, kt贸ry teraz wpad na temat wydajnoci HTTP2, jak wyglda tam r贸wnolego, jak wyglda serwer push dla restowego API. I warto zobaczy, bo jest pokazane tak naprawd od 1.1 do gdzie dw贸jki, tr贸jki razem z server pushem i pokazane na fajnych przykadach, bo skrypty s wykonywane na stronie, razem z wpisem s wykonywane skrypty javascriptowe pokazujce prdko API. I stary trik, kt贸ry u偶ywalimy z 1.1, 偶eby sklei te zapytania, czyli wykorzysta wanie jakie agregation, GraphQL-e, jest nadal najszybszym sposobem.

**Szymon Warda**: Tak, faktycznie. Dorzuc to, 偶e wizualizacja tego jest naprawd nieza i jakby kto chcia przekona swoich developer贸w to nieze narzdzie, pokazuje spore r贸偶nice.

**ukasz Kau偶ny**: Tak i warto odpali sobie tryb developerski, zobaczy jak te requesty lec razem z tym, co si zmienia na ekranie i nam pokazuje.

**Szymon Warda**: Tak.

**ukasz Kau偶ny**: Dobra, a co u Ciebie?

**Szymon Warda**: Ja kawaek o architekturze tfu tfu mikroserwis贸w. Ale wpis do ciekawy generalnie, bo zaczn od tego, 偶e etap dalej po mikroserwisach, czyli przejcie na strumienie, przejcie na tak architektur wanie eventow, cakiem ciekawa prezentacja na InfoQ, jak to czsto u mnie bywa, kt贸ra wanie daje takie og贸lne podejcie, co dalej poza mikroserwisami, gdzie mo偶emy p贸j i jak te偶 du偶e wanie systemy z naciskiem na strumienie podchodz, na przykadzie Kafki akurat.

**ukasz Kau偶ny**: Powiedziae wanie o stanach i o strumieniach. To jest te偶 ciekawe, 偶e ten event-driven te偶 s stanowe.

**Szymon Warda**: Oczywicie, 偶e s. Dane musimy gdzie w kocu trzyma generalnie.

**ukasz Kau偶ny**: Wic to jest ciekawe. Te偶 bd musia sobie to zobaczy, bo tak jest troch buzzword贸w, zobaczymy jak to zostao sklejone.

**Szymon Warda**: Tak. Dobra, to zacznijmy w dw贸ch zdaniach ukaszu, czym jest API Gateway?

**ukasz Kau偶ny**: Najprociej? Wsp贸lny interfejs sieciowy dla usugi, dla grupy usug. Mo偶na te偶 powiedzie, 偶e to jest taka sieciowa implementacja wzorca fasady.

**Szymon Warda**: No to jest taki makija偶, kt贸ry si nakada na system, 偶eby adnie wyglda, mimo 偶e on ju偶 jest po 10 czy 15 operacjach plastycznych tudzie偶 architektach, kt贸rzy mieli r贸偶ne pomysy na niego.

**ukasz Kau偶ny**: Wiesz co, m贸gbym powiedzie, 偶e tak i nie. Czsto si tak koczy, 偶e chowamy tam sw贸j cay, 偶e tak powiem, baagan, kt贸ry posiadamy, w szczeg贸lnoci przy mikroserwisach. Ale je偶eli na to popatrze, to pod tym pojciem kryje si troch rzeczy. Jak sobie popatrzymy na samo pojcie API Gateway'a, to tam ju偶 pod spodem mo偶emy teraz wyr贸偶ni kilka typ贸w. I bdzie taki najprostszy, kt贸ry jest tak na prawd API proxy albo niekt贸rzy nazywaj to Application Delivery Controlerem, tak jak nazywa to F5. Mo偶emy wyr贸偶ni potem ten z wiksz iloci logiki API Gateway i na koniec Enterprise API Gateway. Czyli ju偶 teraz mo偶emy rozr贸偶ni sobie podtypy tego.

**Szymon Warda**: Ja te偶, 偶eby nie byo, nie m贸wi, 偶e ten cay makija偶 jest zy, tylko dochodzimy do tego, 偶e w API Gateway i szczeg贸lnie w API Gateway i Enterprise API Gateway lduje kod, kt贸rego nie chcemy mie albo nie mo偶emy mie w innych miejscach systemu, na przykad jak m贸wie o mikroserwisach. Ale te偶 to s systemy, kt贸re okrelane s jako stare systemy i wystawiamy je w nowej formie na wiat. Dlatego wsanie to odmalowanie jest jak najbardziej. Dobrze, uporzdkujmy to. Od pierwszego, API proxy, znowu w dw贸ch zdaniach.

**ukasz Kau偶ny**: Znowu? Dobra, API proxy to bdzie takie w cudzysowiu proste chowanie usug za jednym wsp贸lnym endpointem, interfejsem. Po prostu taka brama wejciowa, reverse proxy do naszego systemu.

**Szymon Warda**: Tak, czyli su偶y nam g贸wnie do tego, 偶eby powiedzie, kt贸re URL-e s dostpne, a kt贸re nie s dostpne. No bo caych maszyn wirtualnych z naszym serwisem nie chcemy wystawia, tylko chcemy poszczeg贸lne URL-e i to do tego g贸wnie su偶y.

**ukasz Kau偶ny**: Tak, wystawianie swoichch wanie, wyroutowanie tego. Tak mo偶na to najprociej opisa. I je偶eli sobie popatrzymy od razu na przykady tego API proxy, bo mamy t prost logik i to jest jakie nginxy, HAProxy, F5, je偶eli m贸wimy czsto w on premie w du偶ych organizacjach. Je偶eli korzystamy z mikroserwis贸w na Kubernetesie to bdzie od razu Ingres kontrolery, kt贸re s tam r贸偶nej maci i wanie one pozwalaj nam to w prosty spos贸b schowa i udostpni to w organizacji czy na wiat, je偶eli m贸wimy o jakim kliencie webowym, jakim kliencie mobilnym. Jak popatrzymy na funkcjonalnoci, gdybymy mieli wyr贸偶ni, to taka podstawowa to bdzie host i path routing, bo wikszo teraz nowych API to s jakie wariacje na temat, budowane na bazie HTTP, wic taki API proxy to rozumie. Mo偶e te偶 czasem sprawdza tokeny, nag贸wki, ale bez wikszej logiki. No i oczywicie cae zabawy z certyfikatami, z przepisaniem certyfikatu, zmian, zrobieniem end to end to SSL, offloadingu, je偶eli w rodku nie musimy mie SSL-a. Wic ca maci tej rzeczy.

**Szymon Warda**: Tak, dotkne wa偶nego bardzo obszaru, bo powiedziae, 偶e prostej logiki. Jak ja to czsto doprecyzowuj, to jest to, 偶e na tym poziomie rozumiemy http, taki prosty bardzo http, ale nie rozumiemy treci, co jest tym http. Czyli rozumiemy headery, rozumiemy URL-e, cookiesy, czasami mo偶e si zdarzy w sensie czy jest czy nie ma cookiesa, ale to jest bardzo prosta logika tak naprawd, nie wnikamy w to, co jest gbiej.

**ukasz Kau偶ny**: Tak, mimo, 偶e rozwizania kt贸re wymieniem na to pozwalaj, to nie wnikamy w zawarto w samym podejciu, je偶eli m贸wimy o API proxy.

**Szymon Warda**: Dobrze, to teraz p贸jd藕my krok dalej, API Gateway. Znowu dwa zdania.

**ukasz Kau偶ny**: Wiesz co, tak, API Gateway lub te偶 mikroserwisowe API Gateway, bo trzeba to poczy. Je偶eli to rozszerzymy, to tak naprawd s to rozwizania, kt贸re rozumiej tre naszych request贸w i pozwalaj na nich operowa w przeciwiestwie wanie do API proxy. Czyli mo偶emy si tam zagbi.

**Szymon Warda**: I teraz dotykamy bardzo liskiego gruntu. Mianowicie dotkne tego zdania magicznego: rozumiej requesty i mog na nich operowa. Czyli to bardzo atwo mo偶e spowodowa, 偶e w takim razie mo偶emy zrobi wszystko i wracamy do ESB i pierdolnika i tam logik wrzucamy. Nie. Wyszczeg贸lnijmy mo偶e, czemu potrzebne nam jest to rozumienie, do jakich funkcjonalnoci?

**ukasz Kau偶ny**: Wiesz co, je偶eli popatrzymy si, dobrze, 偶e powiedziae o ESB, API Gateway to nie jest ESB i trzeba si tego wystrzega. O tak, to jest taka bardzo wa偶na rzecz. I to pozwala nam, cae to rozumienie pozwala nam implementowa r贸偶ne wzorce aplikacyjne na wejciu do naszego systemu. To jest wanie istotne, 偶e na wejciu, pozwalajc innym skorzysta z niego. I mo偶emy te偶 powiedzie tutaj o centralnym miejscu dla security, kiedy udostpniamy, 偶eby wyrzuci du偶 cz z samych usug, z naszych aplikacji. Jak mamy to wymieni? No to bdzie to, zaczn tutaj throttlingi dostpu do naszej aplikacji, cache'owanie request贸w, bo by mo偶e mamy rzeczy, kt贸re chcemy scache'owa ju偶 na wejciu i wiemy jak to zrobi na podstawie tego co jest w zapytaniu. Circuit breakery, http retry'e, kt贸re mo偶na w rodku od razu ogarn, translacj, je偶eli tego potrzebujemy. Jednym z takich przykad贸w bardzo czsto u偶ywanych jest zrobienie http API z jakiego soapowego czy na odwr贸t, 偶eby udostpni w prosty spos贸b, bez zabawy ju偶 na samej usudze. Przy tym zmiany wanie protoko贸w przy tej translacji czy gateway agregation, kiedy chcemy poczy wiele rzeczy.

**Szymon Warda**: Tak. Ja od siebie bym dorzuci, 偶e tu jeszcze jest par rzeczy, gdzie wykorzystujemy. To jest wprowadzenie, jak chcemy wprowadzi polityk wersjonowania API. Czyli mamy ju偶 serwisy w r贸偶nych wersjach, chcemy zostawi jedn wsp贸ln wersj. Dokadnie jak do tego podej bdziemy m贸wili w kolejnym odcinku, taki hint may. Co jeszcze dalej jest? Wprowadzenie kontrakt贸w jawnych dla naszego caego API, Swagger na cao.

**ukasz Kau偶ny**: Tak, jest to istotne, 偶e mo偶emy w atwy spos贸b wygenerowa sp贸jny cay kontrakt.

**Szymon Warda**: Tak. Jeszcze zastosowanie, kt贸re ja te偶 bardzo lubi, to jest jak mamy systemy wielotenantowe. Czylimamy jedn aplikacj, z kt贸rej korzysta wiele firm, usug, podmiot贸w, to na poziomie wanie API Gateway mo偶emy robi routing, taki bardziej inteligentny. Czyli mamy ID klienta, i routujemy go do konkretnego serwera, do kt贸rego on, akurat tam jego dane si znajduj. I te偶 fajna opcja, kt贸r Ty wspomniae wczeniej, czyli interface mocking. Czyli wystawiamy prosty interfejs na potrzeby na przykad frontendu i on po prostu zwraca plik, zawarto pliku, a my sobie tam w tle developujemy to i to si bada.

**ukasz Kau偶ny**: Tak, ale za ten inteligentny routing to po prostu powiniene dosta nagrod, bo trudno go nie mie jak mamy translacj i zmiany protoko贸w. Ja jeszcze...

**Szymon Warda**: Ja nie dam rady?

**ukasz Kau偶ny**: Tak, dorzuc od siebie jeszcze security, o kt贸rym wczeniej wspomniaem, bo to te偶 jest istotna rzecz w przypadku API Gateway贸w, 偶e mo偶emy tam opdzi wszystkie zabawy z uwierzytelnianiem certyfikatami. Mo偶emy zrobi porzdek z tokenami JWT, zwalidowa, zobaczy, czy mo偶emy w og贸le przekierowa tak osob, takie 偶danie do danej usugi, czyli cae Out OpenID Connecty. W niekt贸rych przypadkach da si zrobi uwierzytelnianie, czyli wzi, uwierzytelni tego czowieka i na przykad dokleja mu token, je偶eli mamy pod spodem tokeny, a na zewntrz nie chcemy, wic mo偶na tam wprowadzi du偶o takiej logiki technicznej.

**Szymon Warda**: Tak, na przykad tumaczenie w og贸le logiki wanie autoryzacji midzy systemem zewntrznym i wewntrznym, te偶 to jest popularne.

**ukasz Kau偶ny**: Tak, trzeba chyba tylko jedno uwa偶a, 偶e mo偶na du偶o atwo zrobi tej logiki wanie, 偶ebymy nie skoczyli o to ESB, od kt贸rego uciekalimy w przypadku monolit贸w i SOA.

**Szymon Warda**: Tak i tu jest dla mnie prosta definicja. API Gateway jako taki mo偶e mie kroki techniczne i niebiznesowe. Jaka jest r贸偶nica? Ta granica midzy techniczn a biznesow czsto jest rozmyta. A dla mnie jest prosta, tak naprawd mo偶na to zdefiniowa. Je偶eli tak naprawd system w tym momencie ma krok procesu biznesowego w sobie, to to nie powinno by w API Gateway'u, 偶e to jest krok jaki tam wstpna walidacja, taka ju偶 biznesowa, tam si nie powinno to znale藕, bo to jest liski grunt i za chwil bdzie tam wielki pierdolnik.

**ukasz Kau偶ny**: Czy wiesz co, wanie powiedziae o tym pierdolniku. Ale mi te偶... Miaem, czasami popeniem to bardzo wiadomie, 偶e cz troszk logiki biznesowej zostaa przeniesiona do API Gatewaya. I to byo policzone ryzyko, 偶e robimy to w API Gateway'u. I zadanie, kt贸re miaem w paru przypadkach to byo: posiadamy na przykad stare WSDL-owe API, a pod spodem wymieniamy cay system i usuwamy wszystko i nie chcemy mie tego WSDL-a. I na przykad jedno takie zapytanie, kt贸re jest typowo komend WSDL-ow, trzeba rozbi czasem na kilka restowych request贸w i podj decyzj co, gdzie, jak uderzy. Wic czasem jest to dobre miejsce, ale czasem, to te偶 nie warto tego od razu myle. Wic pierwsze to negujemy, a potem si zastanawiamy, bo atwiej czsto bdzie utrzyma to w kodzie.

**Szymon Warda**: Doszede do jednej wa偶nej rzeczy, 偶e API Gateway jest super miejscem, 偶eby takie rzeczy wprowadzi, ale to nie jest miejsce, gdzie te rzeczy powinny dugo 偶y. Bo finalnie generalnie dziki wanie API Gateway osigne t atw wersj translacji midzy wewntrzn logik aplikacji i architektur, a zewntrznym wiatem. Ale finalnie co powiedziae, atwiej bdzie to utrzyma w logice aplikacji czy w jakim kodzie po prostu.

**ukasz Kau偶ny**: Tak, w wielu przypadkach kod bdzie na koniec dnia przy modelu operacyjnym bdzie dla nas prostszy.

**Szymon Warda**: Tak, znaczy to co m贸wilimy, API Gateway to jest takie miejsce, gdzie trzymamy cay kod, kt贸ry nie wiemy gdzie trzyma albo nie mamy gdzie trzyma. Po prostu.

**ukasz Kau偶ny**: Tak, troch mi serverlessem zaleciao.

**Szymon Warda**: No tak to bywa. Ale rzumy jakimi przykadami implementacyjnymi. Co mamy w og贸le produktowo w API Gateway'ach?

**ukasz Kau偶ny**: Wiesz co, produktowo jest tego naprawd du偶o. I po pierwsze trzeba... Ka偶dy cloud ma to praktycznie jako usug. I najlepiej tutaj z mojego dowiadczenia wypadaj, je偶eli popatrzymy na tych cloudowych dostawc贸w, dwie usugi. To bdzie Apigee, kt贸ry jest w Google'u i Azure API Management. I co wa偶ne, one te偶 tam w jaki spos贸b ju偶 schodz albo ju偶 s do trybu takiego self-hosted i on premu, gdzie mo偶emy to sam tak bram posadzi w swoim rozwizaniu, ona bdzie zarzdzana jak as-a-service, ale sama instancja bdzie hostowana u nas g贸wnie na bazie gotowych ju偶 kontener贸w. To jest jedno. I druga cz, to bdzie taka self-hosted on premises. I tu te偶 mo偶emy tego du偶o wyr贸偶ni. Z takich popularnych bdzie to CONC TAPI dla wiata .Netowego, Ocelot, kt贸ry jest, dla wiata Javowego znowu Spring Cloud Gateway, kt贸ry jest gotowym rozwizaniem, kt贸re atwo zaimplementowa. No i ka偶da firma od ESB tak naprawd posiada teraz jaki produkt do robienia API Gateway'a.

**Szymon Warda**: Przemalowanie starego produktu.

**ukasz Kau偶ny**: Tak, niekt贸re byy przypisane, ale tak, jest to. I teraz jeszcze taka ciekawostka, bo wczeniej wspomniaem na przykad o nginx'ie i oni te偶 pr贸buj powiedzie, 偶e s regularnym API Gatewayem, bo mo偶emy tam dopisa kod w przypadku na przykad do, jako Lua i czsto si to znajduje w przykadach. Mo偶emy dopisa...

**Szymon Warda**: Albo te偶 modu C.

**ukasz Kau偶ny**: Tak, modu C i oni te偶 daj chyba jakie swoje moduy do robienia takiego gateway'a. Ja osobicie nie przegldaem, tylko dokumentacje, nie wchodziem co jest w rodku, ale do mocno si promuj jako, 偶eby nie zgin w tym mikroserwisowym i serverlessowym wiecie.

**Szymon Warda**: Dobra, ale teraz dochodzimy troch do tego, 偶e tak si troch z tym nie zgodz co powiedziae. Czemu? No bo tak naprawd cz usug, kt贸re wymienie, to ju偶 tak bardziej zahaczaj o Enterprise API Gateway, a cz s API Gatewayem. I to teraz, 偶eby m贸wi o r贸偶nicach, to teraz doprecyzujmy jak Ty rozumiesz Enterprise API Gateway? Czym dla Ciebie jest?

**ukasz Kau偶ny**: Enterprise API Gateway, to bdzie koncept udostpniania API, ale na poziomie caej organizacji, nie tylko systemu. Tak mo偶na powiedzie buzzwordowo, jak na to popatrzymy. To bdzie co, co od kilku lat si pojawia, czyli monetyzacja istniejcych API lub tych nowych, kt贸re tworzymy. Czyli jest to od strony, czyli patrzymy na to od strony te偶 biznesowej i caej logicznej na poziomie organizacji. I tak te produkty, kt贸re podaem, w szczeg贸lnoci te cloudowe, czyli Google Apigee, jak i Azure API Management, tak, to s Enterprise Gatewaye. Ale w przeciwiestwie do ESB to nie oznaczaj ci偶kich produkt贸w, tylko mo偶na po prostu pewien zakres funkcjonalnoci wykorzysta do bycia API Gateway'em i wszystko bdzie w porzdku. Jak popatrzymy sobie na cenniki, to tam wida r贸偶nice nawet po funkcjach. Bo dla mnie Azure, to mamy t wersj serverless, kt贸ra jest biedna i ma du偶o rzeczy wykrojonych od strony jakich security translacji. Potem mamy standard, kt贸ry potrafi du偶o. A tak enterprise'owo potrafi tylko te najdro偶sze premium, wic jest zr贸偶nicowanie tego, co potrzebujemy. Na tym mo偶na zobaczy.

**Szymon Warda**: Tak, ale dla mnie te偶 fajnie w kontekcie organizacji pokazuje kto utrzymuje API Gateway, kod mianowicie i utrzymanie, ca logik i tak dalej. Je偶eli m贸wilimy o tych pierwszych wanie API proxy, API Gateway prosty, to z reguy utrzymyway zespoy odpowiedzialne za poszczeg贸lny system. Czyli tych gateway'i mogo by du偶o. By generalnie jeden presystem, ale system贸w z reguy byo du偶o. A jak m贸wimy o Enterprise API Gateway, to z reguy to jest jedna na organizacj usuga i to z reguy utrzymuje wydzielony osobny zesp贸.

**ukasz Kau偶ny**: Gdzie jest to wrzucone centralnie. Ja to widziaem na przykad, przyjmoway to albo w bardzo du偶ych organizacjach, to robiono may zesp贸 do tego, a w niekt贸rych przyklejano t rol na przykad do zespo贸w od integracji jakich, bo czsto wystpoway takowe, czasem od tych ESB, od zespo贸w ESB i pr贸bowano budowa nowe ksistwo albo kr贸lestwa.

**Szymon Warda**: Tak. Ale teraz przejd藕my feature'ami generalnie. Bo skoro m贸wiem, 偶e si nie zgadzam z niekt贸rymi, 偶e niekt贸re s API Gateway'ami, kt贸re s Enterprise API Gatewayami. Przykad, Ocelot jest typowym API Gatewayem. To nie jest usuga, kt贸ra bdzie awansowana na Enterprise API Gateway. A taki Azure Management jest to typowy Enterprise API Gateway, kt贸ry mo偶e by stosowany jak najbardziej jako API Gateway. To przejd藕my feature'ami, bo to definiuje, kiedy kt贸ra usuga jest wykorzystywana. Kt贸re feature'y definiuj API Enterprise, API Gateway?

**ukasz Kau偶ny**: Dobra, to pierwsze to bdzie bardzo mocno security. Bardzo rozbudowane security.

**Szymon Warda**: Tak.

**ukasz Kau偶ny**: Tutaj obsuga wszystkich token贸w, kluczy, kluczy dostpowych, to jest bardzo istotna rzecz. Czyli security, ja bd stawia to na pierwszym miejscu przy takim Enterprise API Gateway.

**Szymon Warda**: I te偶 mocno tumaczenie generalnie r贸偶nych typ贸w security zewntrznych na wewntrzne.

**ukasz Kau偶ny**: Tak, dlatego m贸wiem wanie, obsuga tych token贸w i te translacje, kt贸re za tym id. I kolejn rzecz, kt贸r idzie, to jest self service portal, kt贸ry taki produkt powinien posiada, taki typowo developerski portal i dla naszego klienta, kt贸ry bdzie konsumowa te dane. I to jest wanie te偶 istotna r贸偶nica, kt贸ra to wyr贸偶nia.

**Szymon Warda**: Konsumowa, przeglda, rozumia i eksplorowa i te偶 przeglda te偶 cenniki, bo to jest taki portal, kt贸ry sprzedaje nasze API, prezentuje i sprzedaje.

**ukasz Kau偶ny**: Tak, wic to jest ta cz. I tutaj trafie do nastpnej rzeczy, czyli poza service portalem, to dochodz nam wanie subskrypcje, kt贸re na przykad m贸wi, 偶e mamy jaki tam throttling, mamy jakie quoty, ilo request贸w na miesic, czyli bandlujemy sobie nasze API, je udostpniamy.

**Szymon Warda**: I czsto te偶 mamy monitoring tego, ile u偶ylimy i jak to obecnie wyglda. To jest te偶 wa偶ny element.

**ukasz Kau偶ny**: Tak i za tym idzie r贸wnie偶 billing API, czyli 偶e rozliczamy. Powiedzielimy, 偶e chcemy zarabia, wic musimy na podstawie czego zafakturowa i rozliczy, je偶eli chcemy to robi naprawd dynamicznie. I dochodz billing API. Z tego co kojarz, to nawet Azure'owy API Gateway posiada nawet jakie integracje w stanach do patnoci i fakturowania. Do tego stopnia jest to as-a-service akurat tam zamknite, wic tutaj popatrzymy. Wic to jest te偶 nastawienie na security i na t monetyzacj poczon z self servicem.

**Szymon Warda**: adnie dochodzimy do tego, czemu powstao w og贸le Enterprise API Gateway. No bo firmy stwierdziy, 偶e dane s warte, usugi te偶 s warte i mo偶na na tych rzeczach zarabia. To jest kolejny kana sprzeda偶owy dla wielu firm, kt贸re zarabiaj na tym tak naprawd i zarabiaj do spor kas. Widz, 偶e nie produkty jako takie pudekowe s wartoci, tylko te dane, kt贸re maj o u偶ytkownikach, o nas i usugi, rzeczy, kt贸re umiej zrobi.

**ukasz Kau偶ny**: No tak, mo偶na rzuci, tego powstao teraz, nawet regulacyjnie powstaje masa, bo zobaczmy cay open banking, PSD2. Wczeniej jeszcze wok贸 finans贸wki i ubezpiecze troch takich API ju偶 od jakiego czasu istnieje.

**Szymon Warda**: Tak. Dobra, to chyba wrapujemy ten odcinek.

**ukasz Kau偶ny**: Tak.

**Szymon Warda**: Na zasadzie zacznijmy... W og贸le jakie rady? Na starcie zacz od zwykego API proxy.

**ukasz Kau偶ny**: Tak i tutaj si zgodz. W szczeg贸lnoci teraz, du偶o robimy na chmurze, serverlessach, albo na Kubernetesach. I tam mimo nawet je偶eli we藕miemy jakie API Gateway, kt贸ry jest as-a-service, to na pocztku traktujmy go tylko jako API proxy.

**Szymon Warda**: Tak i mielimy dyskusj w og贸le kiedy wprowadza API Gateway. I po jakim czasie udao nam si ustali, 偶e API Gateway wprowadzamy wtedy, kiedy chcemy pokaza nasze usugi innym developerom. Czyli kiedy nasze serwisy bd wykorzystywane przez innych ludzi poza nami bezporednio, naszym systemem. Wtedy wprowadzamy adnie API Gateway'a.

**ukasz Kau偶ny**: Tak, to jest wanie istotne, 偶e kiedy zaczynamy udostpnia poza naszego mobile, naszego weba, kiedy kto inny ma zacz skorzysta nawet wewntrz w organizacji. No i tutaj API Gateway je偶eli chodzi o security, czyli jak ju偶 chcemy to usp贸jni, to walidacj token贸w, autoryzacje. No i czci troch bardziej aplikacyjne wzorc贸w, throttling czy circuit breaker, kt贸ry tak Szymon kocha, bo mo偶na ju偶 w naszym API Gateway'u zaimplementowa i wykorzysta tak naprawd wbudowane mo偶liwoci do circuit breakera i obsugi tych request贸w, zanim dojd do tego.

**Szymon Warda**: Co jest bardzo wa偶nym wanie przypadkiem? Kiedy kto inny korzysta z tego API, bo w tym momencie musimy wystawi SLA. Wic tak, to jest wa偶ne. Dobra, no to w kolejnym odcinku o dobrych, zych i brzydkich praktykach.

**ukasz Kau偶ny**: Tak, 偶eby nie przedu偶a, to przejdziemy tam. I tam odpowiemy na pytanie ukasza na temat Agregation Gateway'a i jak go stosowa midzy innymi.

**Szymon Warda**: Dobra, no to tyle, na razie.

**ukasz Kau偶ny**: Na razie.
