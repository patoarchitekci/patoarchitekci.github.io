---
title: '#48 Patoarchitekci Short #9
'
date: 2022-10-28T08:00:00+02:00
episode: "48"
tags: []
description: ""

# Jekyll compatibility fields (zachowane dla innych systemÃ³w)  
spreaker: 51702996
apple: ""
spotify: "https://open.spotify.com/episode/"
youtube: ""

# Hugo fields  
youtube_id: ""
youtube_url: ""

# Social media images (poprawione nazwy)
og_landscape: "/img/48-landscape.webp"
og_square: "/img/48-square.webp"

# Intro for episode
intro: |
  Patoarchitekci odkrywajÄ…, co Å‚Ä…czy Basecamp, Dropbox i Netflixa. PosÅ‚uchaj i dowiedz siÄ™, dlaczego niektÃ³rzy rezygnujÄ… z rozwiÄ…zaÅ„ cloudowych.
  

# Links for the episode
links:

# Newsletter content (zachowane dla kompatybilnoÅ›ci)
newsletter: |
  CzeÅ›Ä‡! ğŸ‘‹ âœ¨
  
  Patoarchitekci odkrywajÄ…, co Å‚Ä…czy Basecamp, Dropbox i Netflixa. PosÅ‚uchaj i dowiedz siÄ™, dlaczego niektÃ³rzy rezygnujÄ… z rozwiÄ…zaÅ„ cloudowych.
  
  
  
  
  ## Odcinek na stronie i materiaÅ‚y do niego â¬‡ï¸
  
  â¡ï¸ [OdsÅ‚uchaj na stronie](https://patoarchitekci.io/48)
  â¡ï¸ [Spotify](https://open.spotify.com/episode/)
  â¡ï¸ [Apple Podcasts](#)
  â¡ï¸ [YouTube](#)
  
  ## Short & Sweet
  

  ### ğŸ¤ DoÅ‚Ä…cz do Discord ğŸ‘‰ [https://discord.gg/78zPcEaP22](https://discord.gg/78zPcEaP22)
  
  ### ğŸ¢ Patron odcinka
  SÅ‚uchasz PatoarchitektÃ³w dziÄ™ki PROTOPII â€“ firmie, w ktÃ³rej Åukasz i Szymon dziaÅ‚ajÄ… na co dzieÅ„, wspierajÄ…c zespoÅ‚y IT na kaÅ¼dym etapie: od projektowania, przez wdroÅ¼enia i migracje, aÅ¼ po optymalizacjÄ™ i zabezpieczenia. Oferujemy teÅ¼ mentoring i szkolenia dostosowane do potrzeb kaÅ¼dej firmy, niezaleÅ¼nie od wielkoÅ›ci. SprawdÅº nas: [protopia.tech](https://protopia.tech/)
  
  PS. Masz pytania? Pisz Å›miaÅ‚o po drugiej stronie to nie bot na bazie GPT czy Claude ğŸ˜
---

**Åukasz KaÅ‚uÅ¼ny [ÅK]**: CzeÅ›Ä‡! SÅ‚uchacie PatoarchitektÃ³w short. ProwadzÄ… Åukasz KaÅ‚uÅ¼ny

**Szymon Warda [SW]**: i Szymon Warda. Wszystkie linki do tego odcinka oczywiÅ›cie znajdziecie na: patoarchitekci.io/48. I waÅ¼na informacja â€“ konkrety dotyczÄ…ce meetup'u z okazji 50. odcinka: Warszawa, 9 listopada, 18:00, hala Koszyki w przestrzeni Meta faceebookowej. Jest rejestracja, zapisujcie siÄ™.

**ÅK:** Tak, zapisy w linkach pod spodem. W linku do odcinka znajdziecie wszystkie potrzebne linki. Na meetupie organizowanym z okazji 50. odcinka bÄ™dzie sesja AMA, wiÄ™c jeÅ›li macie jakieÅ› pytania, to zadawajcie je albo w komentarzach na social mediach do tego odcinkach, albo w linku do formularza, ktÃ³ry macie pod spodem (jeÅ¼eli wolicie byÄ‡ bardziej anonimowi).

**SW:** I teÅ¼ coÅ› chyba powiemy przy okazji, nie tylko samo AMA.

**ÅK:** Tak, dokÅ‚adnie.

**SW:** Dobrze, Åukasz, link.

**ÅK:** Dobra. PowrÃ³t z cloudÃ³w do serwerÃ³w fizycznych. I w tym wypadku jest to kawaÅ‚ek z Basecamp i ich usÅ‚ugi Hey. MoÅ¼e wprowadzajÄ…c: Basecamp jest doÅ›Ä‡ ciekawym w Å›wiecie technologiczno-biznesowym start-up'em, poniewaÅ¼ zatrzymaÅ‚ siÄ™ na pewnej wielkoÅ›ci organizacji i jest mocnym przykÅ‚adem stosu technologicznego dziaÅ‚ajÄ…cego i ciÄ…gnÄ…cego Ruby on Rails przez lata. Ich CTO David (znany teÅ¼ na Twitterze jako DHH) ciÄ…gnÄ…Å‚ to community i to wszystko do przodu. Kiedy nie miaÅ‚ wystÄ…piÄ‡ na Keynote ostatnimi czasem, bo gÅ‚Ã³wny prowadzÄ…cy najwiÄ™kszej konferencji r@bbIT to byÅ‚o, jakby to Å‚adnie okreÅ›liÄ‡â€¦ konsternacja o co chodzi, ale to przez jego poglÄ…dy. I caÅ‚oÅ›Ä‡ ich softu, bo majÄ… dwie duÅ¼e usÅ‚ugi: Basecamp (do zarzÄ…dzania projektami) i Hey (jako nowy rodzaj komercyjnego maila, ktÃ³ry ma CiÄ™ odciÄ…Å¼yÄ‡). I tutaj jest pokazane, dlaczego opuszczajÄ… chmurÄ™ w przypadku Hey - rachunek wynosi 500 000 dolcÃ³w rocznie. Co patrzÄ…c siÄ™â€¦

**SW:** To nie jest duÅ¼o.

**ÅK:** To nie jest duÅ¼o. Ale jeÅ¼eli popatrzymy, to w ich przypadku Å›ciÄ…ga to 30% marÅ¼y.

**SW:** OK.

**ÅK:** Chyba coÅ› tak, gdzieÅ› tam byÅ‚y cyfry. Ale Å›ciÄ…ga im doÅ›Ä‡ sporo marÅ¼y. I w przypadku Hey, bo jest to usÅ‚uga mailowa, to trzeba sobie zdaÄ‡ sprawÄ™, ich gÅ‚Ã³wnym kosztem sÄ… RDS-y i zarzÄ…dzany Elastic. I w przypadku, kiedy to jest workflow, ktÃ³ry ciÄ…gleâ€¦ Bo patrzÄ…c siÄ™: nie chcesz szukaÄ‡ swojego maila. JeÅ¼eli wejdziesz, nie chcesz swojego maila searchowaÄ‡ przez 30 sekund, jak Ci siÄ™ lambda odpali i wszystko wykona. JeÅ¼eli popatrzymy majÄ… infrÄ™, ktÃ³ra po prostu musi razem z RDS-ami, czyli samorelacyjnÄ… bazÄ… danych, musi staÄ‡. WiÄ™c przy tej architekturze proÅ›ciej jest przerzuciÄ‡ siÄ™ na blachy, trzymajÄ…c takie coÅ›.

**SW:** Ale to jest takieâ€¦Do softu mocno skierowanego do klientÃ³w majÄ… mocno korporacyjnÄ… architekturÄ™. Nic dziwnego, Å¼e to siÄ™ nie bÄ™dzie skalowaÅ‚o ani opÅ‚acaÅ‚o.

**ÅK:** Czy korporacyjnÄ…â€¦ Zobacz, z drugiej stronyâ€¦

**SW:** RDS-y plus Elastic. Tak.

**ÅK:** No, ale sÅ‚uchajâ€¦ Tak naprawdÄ™ to jest standardowy stos do budowy duÅ¼ej usÅ‚ugi mailowej. Taki bardzo standardowy.

**SW:** Standardowy, dobrze to powiedziaÅ‚eÅ›. Czyli coÅ›, co jest typowo korporacyjne. JeÅ¼eli chcesz mieÄ‡ coÅ› pod klientÃ³w i pod clouda, to sorry - trochÄ™ inne podejÅ›cie jak na mÃ³j gust.

**ÅK:** Wiesz co, z drugiej strony zobacz, jak wyglÄ…da Stack Overflow.

**SW:** Tak, ale oni sÄ… na blachach. O to wÅ‚aÅ›nie mi chodziÅ‚o.

**ÅK:** A Ci robiÄ… powrÃ³t na blachy. WiÄ™c dla mnie to jestâ€¦ MÃ³wienie, Å¼e pisanie softu jestâ€¦ Bo byÅ‚y komentarze i takie, Å¼e ten soft jest napisany do dupy. TrochÄ™ tak jak powiedziaÅ‚eÅ›: pisany po staremu.

**SW:** Tak, tak uwaÅ¼am. Zawieszenie jeszcze: RDS-y, czyli bazy relacyjne.

**ÅK:** Tak, tak, tak

**SW:** Just in case.

**ÅK:** Bardzo relacyjne i zarzÄ…dzane Elastic. Jak na to popatrzÄ™, to alternatywÄ™ dla full-text search, ktÃ³rej nie czardÅ¼ujesz za stanie instancji, nie ma. Nie ma Å¼adnego Pay as goâ€¦

**SW:** Nie ma, nie bÄ™dzie.

**ÅK:** I wieszâ€¦ Przy tej architekturze full-text search to maila inaczej nie zrobisz.

**SW:** Tu siÄ™ zgodzÄ™. Ale dla RDS-Ã³w to moÅ¼na przemodelowaÄ‡.

**ÅK:** Tak. Dla RDS-Ã³w. Ale sÄ…dzÄ™, Å¼e ten rachunek, wiedzÄ…c jak pewne usÅ‚ugi kosztujÄ…, zakÅ‚adam, Å¼e te RDS-y to jest pikuÅ› w porÃ³wnaniu doâ€¦

**SW:** A bym nie stawiaÅ‚â€¦ ZaleÅ¼y czy majÄ… to poshardowane i zaleÅ¼y, czy majÄ… to Å‚adnie porobione. Bym wcale takâ€¦ moich pieniÄ™dzy nie obstawiaÅ‚.

**ÅK:** Ale wieszâ€¦ Dobra. (Å›miech) Ja obstawiam, Å¼e gdzieÅ› 25 do 75, ale nigdy nie dowiemy siÄ™, kto ma racjÄ™ przy caÅ‚oÅ›ci. Ale pokazuje ten ciekawy trendâ€¦ PrzyznajÄ… siÄ™, Å¼e uÅ¼ywajÄ… K8s-a, wiÄ™c to nie jest juÅ¼ takie podejÅ›cie, Å¼e lecÄ… czysto na VMK-kach, tylko faktycznie majÄ… jakÄ…Å› warstwÄ™ abstrakcji. WiÄ™câ€¦ jest to ciekawe. Pytanie, czy koszty migracjiâ€¦ Czy nie byÅ‚oby taniej przemigrowaÄ‡ siÄ™ na EC2-ki po prostu i na duÅ¼e klastry na EC2. To jest taka rzecz, ktÃ³rej siÄ™ nie dowiemy. Ale patrzÄ…c, ciekawy jest wÄ…tek ucieczki. Trzeba powiedzieÄ‡, Å¼e Dropbox robiÅ‚ przecieÅ¼ podobnie ze swojÄ… usÅ‚ugÄ… - wynosili siÄ™, Å¼eby trzymaÄ‡ storage we wÅ‚asnym Data Center, czy przecieÅ¼ case z Netflixa, gdzie tak naprawdÄ™ w Netflixie gros kosztÃ³w to jest Edge dostarczanie, ktÃ³re budujÄ… samodzielnie. 

**SW:** No majÄ… pewien rozmiar skali, za ktÃ³rÄ… bÄ™dÄ… doÅ›Ä‡ mocno czardÅ¼owani. Przy tym rozmiarze i co oni chcÄ… zrobiÄ‡, i oni dokÅ‚adnie wiedzÄ…, co chcÄ… zrobiÄ‡, wiÄ™câ€¦ No nie dziwiÄ™ siÄ™.

**ÅK:** Tak, wiÄ™c to sÄ… takie ciekawe przypadki. JeÅ¼eli jest staÅ‚a usÅ‚uga, faktycznie to, co on pisze i majÄ… staÅ‚e capacity, Å¼e muszÄ… tylko dodawaÄ‡ wÄ™zÅ‚Ã³w, to faktycznie ten Bare Metal w jakiejÅ› kolokacji czy usÅ‚udze, ktÃ³ra daje dosÅ‚ownie za uÅ‚amek ceny, moÅ¼e byÄ‡ dla nich dziÅ› rozsÄ…dna.

**SW:** Nie wydaje mi siÄ™, Å¼eby to byÅ‚ teÅ¼ taki duÅ¼y uÅ‚amek. To teÅ¼ zaleÅ¼y, jak siÄ™ to zaksiÄ™guje: koszty ludzi, koszty ryzyk, i tak dalej.

**ÅK:** Znaczyâ€¦ To jest ciÄ…gle firma, ktÃ³ra ma od 30 do 60 osÃ³b. To teÅ¼ trzeba wieszâ€¦ zobaczyÄ‡, Å¼e to nie jestâ€¦ PatrzÄ…c przez pryzmat, Å¼e tÄ™ usÅ‚ugÄ™ budowaÅ‚o chyba z 10 czy 15 osÃ³b i utrzymuje jÄ… z 4 czy 5, to jest takieâ€¦

**SW:** Ja bym siÄ™ baÅ‚ przy tym rozmiarze zespoÅ‚Ã³w przejÅ›Ä‡ na wÅ‚asne Data Center, bo musisz sporo ludzi dorzuciÄ‡, kwestia on-callaâ€¦

**ÅK:** Raczejâ€¦ WÅ‚aÅ›nie czy wÅ‚asne Data Center czy kolokacje, bo to teÅ¼ jestâ€¦ PamiÄ™taj, Å¼e wÅ‚asne Data Center w dzisiejszych czasachâ€¦

**SW:** Masz racjÄ™.

**ÅK:** â€¦to teÅ¼ bÄ™dzie kolokacja, bo raczejâ€¦ No nie ma tutaj, Å¼e budujÄ…, tylko wezmÄ… Bare Metal gdzieÅ›. Zobacz Å¼eâ€¦ PamiÄ™tam, jak siÄ™ bawiÅ‚em jeszcze Packetem, czymÅ› co teraz siÄ™ nazywa Equinix Metal, to tam moÅ¼na byÅ‚o dostawaÄ‡ za uÅ‚amek ceny cloudowej (czyli za 2 dolce) za godzinÄ™ potÄ™Å¼nÄ… maszynÄ™ z caÅ‚Ä… czÄ™Å›ciÄ…, o ktÃ³rej mÃ³wisz. Å»e pod spodem zachowywaÅ‚o siÄ™ jak cloud.

**SW:** OK

**ÅK:** WiÄ™c to jest pytanie, u kogo wziÄ™li, jak, na jakich zasadach. I znajÄ…c ceny, gdzieÅ› po swojej przeszÅ‚oÅ›ci jak wyglÄ…da hosting, jeÅ¼eli nie boimy siÄ™ operations od strony systemu operacyjnego w gÃ³rÄ™, to te ceny sÄ… konkurencyjne. Tak jak pisaÅ‚ tutaj, Å¼e pÃ³Å‚ miliona dolcÃ³w rocznie â€“ ile za to moÅ¼e blach utrzymaÄ‡.

**SW:** Jestem ciekawy, jak to bÄ™dzie wyglÄ…daÅ‚o za mniej wiÄ™cej 2 lata tak naprawdÄ™. Jakie bÄ™dÄ… ich wnioski. Dobrze, teraz ja siÄ™ pochwalÄ™. Mam dwa zestawy linkÃ³w de facto. Jeden z serii: â€O kurczÄ™, nie wiedziaÅ‚em, Å¼e tego potrzebujÄ™".

**ÅK:** (Å›miech)

**SW:** Nie no, naprawdÄ™. W sumie we dwÃ³ch siedzimy w budowaniu jakichÅ› platform tak naprawdÄ™. I czÄ™sto to sÄ…â€¦ Dla mnie jest problematyczne, albo tam gdzie widzÄ™ problem, to jest to, Å¼e budujemy platformy i dostarczanie jakoÅ›ci usÅ‚ug, jakoÅ›ci tej platformy dla developerÃ³w (gÅ‚Ã³wnie to sÄ… wewnÄ™trzni developerzy). I czÄ™sto jest tak, Å¼e jak budujemy, to jest taki misz-masz rÃ³Å¼nych tooli. Tu gdzieÅ› jest jakiÅ› Elastic albo jakiÅ› Loki, tu gdzieÅ› jest Grafana, Prometheus, tu gdzieÅ› jest Jaeger i nagle mamy caÅ‚y zestaw tooli i mÃ³wimy developerom: Seria 5 linkÃ³w i po prostu macie tu, szukajcie. I to jest problematyczne. Jest Istio, ktÃ³re ma moÅ¼liwoÅ›Ä‡ bycia enterpointem, tam moÅ¼emy wszystkie linki dorzuciÄ‡, moÅ¼emy to jakoÅ› poÅ¼eniÄ‡, ale tez nie jest idealne. I tak siÄ™ przyglÄ…daÅ‚am wÅ‚aÅ›nie release notes nowej Grafany i tam jest kilka rzeczy, ktÃ³re po pierwsze mi umknÄ™Å‚y, a po drugie naprawdÄ™ twierdzÄ™, Å¼e to mi siÄ™ przyda. Pierwsza rzecz, ktÃ³ra mnie trochÄ™ ruszyÅ‚a, to byÅ‚o to, co mi umknÄ™Å‚o. Mianowicie: Grafana wyprodukowaÅ‚a swoje Tempo i to 2 lata temu juÅ¼. NarzÄ™dzie, ktÃ³re integruje siÄ™ oczywiÅ›cie z GrafanÄ…, Prometeuszem, Loki i tak dalej; moÅ¼e konsumowaÄ‡ logi Jagger i zrobiÄ‡ nowe z OpenTelemetry, czyli caÅ‚y tracing. I co jest teraz fajne. Teraz zrobili taki myk, Å¼e moÅ¼emy te logi przechowywaÄ‡ w Grafanie. CaÅ‚e tracy w Grafanie. Do tego stopnia, ze moÅ¼na na pojedynczych trace'ach zrobiÄ‡ kwerendÄ™ w Grafanie (czyli wyciÄ…Ä‡ metryki i przejÅ›cia w obie strony). To jeszcze jest w becie, ale jest fajne. MoÅ¼na w Grafanie dorzuciÄ‡ boardy takie APM-owe, czyli mÃ³wimy, Å¼e mamy takie SLA i w jakich przedziaÅ‚ach lecimy. I to mega fajnie wyglÄ…da. I ostatnia rzecz, ktÃ³ra byÅ‚a z serii â€Nie wiedziaÅ‚em, Å¼e potrzebujÄ™, ale bardzo tego potrzebujÄ™", to sÄ… publiczne dashboardy. No bo jeÅ¼eli mamy platformÄ™, ktÃ³ra ma SLA i jest to SLA publiczne, to przydaÅ‚oby siÄ™ publikowaÄ‡ nasze metryki. To jest trochÄ™ upierdliwe, to nie jest trudne, ale upierdliwe, poniewaÅ¼ to jest kolejny dashboard, ktÃ³ry trzeba trzymaÄ‡, jakÄ…Å› prostÄ… stronÄ™, ktÃ³ra bÄ™dzie to odÅ›wieÅ¼aÅ‚a, wpisywaÄ‡ i tak dalej. Nic trudnego, ale to kolejna rzecz, ktÃ³rÄ… trzeba monitorowaÄ‡. A to ma moÅ¼liwoÅ›ci jeszcze w Alphie - wystawienia pewnych dashboardÃ³w jako publicznych. Czyli pierwszy krok: wystawienie naszego SLA w formie APM-owych rzeczy jako publiczny dashboard.

**ÅK:** Dobra, przeszkodzÄ™ Ci, bo Tempoâ€¦ MiaÅ‚eÅ› powiedzieÄ‡ o tym, Å¼e Tempo jest do  pricingu. ZabrakÅ‚o tego.

**SW:** Tak.

**ÅK:** ZabrakÅ‚o. ZajechaÅ‚eÅ› siÄ™. Z caÅ‚oÅ›ci (bo sobie sprawdziÅ‚em), z rzeczy, ktÃ³re wyrÃ³Å¼niÅ‚eÅ›, to faktycznie super rzecz, Å¼e trace'y teraz moÅ¼na zaciÄ…gaÄ‡ z Jaegera, Zipkina i OpenTelemetry.

**SW:** Tak

**ÅK:** I to jest najwiÄ™ksza zaleta dla mnie. Å»e jest kompatybilny z szeregiem rzeczy.

**SW:** Dla mnie jest to, Å¼e w tym momencie potencjalnie mogÄ™ siÄ™ UI-a jaegerowego czy zipkinowego pozbyÄ‡. I mogÄ™ to wszystko mieÄ‡ w jednym toolu. Odchodzi mi jeden front-end do utrzymania. Czyli ten front-end do uwierzytelniania. Jeden front-end do linkowania i mam pÅ‚ynne przejÅ›cie w Grafanie miÄ™dzy trace'ami a metrykami, co jest super kluczowe.

**ÅK:** Tak. Druga rzecz, ktÃ³rÄ… sobie sprawdziÅ‚em, bo byÅ‚em ciekawy, okazuje siÄ™, Å¼e Tempo juÅ¼ siÄ™ dorobiÅ‚o: jest piÄ™kna aplication mapa trace'Ã³w.

**SW:** A to mnie akurat umknÄ™Å‚o. O, to bardzo dobrze.

**ÅK:** WÅ‚aÅ›nie teraz, jak mÃ³wiÅ‚eÅ›, sprawdziÅ‚em, czy dorobili siÄ™ wreszcie GrafÃ³w na podstawie trace'Ã³w. I tak, dorobili siÄ™, jest Å›liczniusi, Å¼e tak powiem, na bazie query, ktÃ³re masz. Trace'ujesz metryki, normalnie Ci rozrysowuje diagram ze wszystkimi metrykami. WiÄ™c razem z trace'ami, wyliczaniem metryk z trace'Ã³w i innych rzeczy, no powoduje, Å¼e: WOW! RzeczÄ…, o ktÃ³rej mÃ³wiÅ‚em jeszcze kilka miesiÄ™cy temu, twierdziÅ‚em twardo Å¼e zbudowanie podstawowego APM-a z open-source'u jest drogÄ… przez mÄ™kÄ™â€¦

**SW:** Tak, bo dobry tool do posiadania aplication mapy, czyli takiej mapy, gdzie widzimy wszystkie serwisy, komunikacji miedzy nimi i gdzie mamy failure rate, czas i tak dalej. Prosty tool, ale taki entrypoint do czynienia, Å¼e coÅ› siÄ™ wywaliÅ‚o.

**ÅK:** Tak, to Å‚Ä…czÄ…c Tempo z OpenTelemetry, ktÃ³re terazâ€¦ A zobaczymy na szybko sprawÄ™, bo wczoraj oglÄ…daÅ‚em z innego powodu, zobaczmy, ile jest tychâ€¦ Szybciutkoâ€¦ Dobra, mamyâ€¦ Z gÅ‚Ã³wnych mamy: .NET-a, Gollanga, Java, JavaScript, Pythona, PHP-a, Rubbiego, Rusta, Swifta, C++, wiÄ™c w sumie caÅ‚y gÅ‚Ã³wny stos mamy pokryty przez OpenTelemetry. No to moÅ¼na wÅ‚Ä…czajÄ…c tracing w OpenTelemetry w Å‚atwy sposÃ³b moÅ¼emy sobie zbudowaÄ‡ na dzieÅ„ dobry takiego bardzo podstawowego APM-a.
