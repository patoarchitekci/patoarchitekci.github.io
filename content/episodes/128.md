---
title: '#128 Short #59: Uber CD, Zero Downtime vs DB, eBPF Profiling, PoC Practice, Aurora, SQLite, Terraform
'
date: 2024-11-01T08:00:00+02:00
episode: "128"
tags: []
description: ""

# Jekyll compatibility fields (zachowane dla innych systemÃ³w)  
spreaker: 62569631
apple: "https://podcasts.apple.com/pl/podcast/short-59-uber-cd-zero-downtime-vs-db-ebpf-profiling/id1477067604?i=1000675307657&uo=4"
spotify: "https://open.spotify.com/episode/4ctQCIPsPa1qGOkvWsRPAh"
youtube: "https://www.youtube.com/watch?v=yBArKZP8-ug"

# Hugo fields  
youtube_id: "yBArKZP8-ug"
youtube_url: "https://www.youtube.com/embed/yBArKZP8-ug?enablejsapi=1"

# Social media images (poprawione nazwy)
og_landscape: "/img/128-landscape.webp"
og_square: "/img/128-square.webp"

# Intro for episode
intro: |
  **Short #59** to prawdziwa _patoarchitektoniczna_ uczta! Od **Uber CD** po **eBPF Profiling**, ten odcinek ma wszystko.
  
  Zanurzymy siÄ™ w Å›wiat **zero downtime** migracji baz danych i **continuous profiling** z **Open Telemetry**. Odkryjemy, dlaczego Uber stworzyÅ‚ wÅ‚asne narzÄ™dzie CD i jak **Amazon Aurora Serverless** radzi sobie z 10 000 wÄ™zÅ‚Ã³w.
  
  Chcesz wiedzieÄ‡, jak _nie_ robiÄ‡ **PoC**? Albo co siÄ™ stanie, gdy **Terraform** i **Azure** siÄ™ pokÅ‚Ã³cÄ…? PosÅ‚uchaj i zostaÅ„ prawdziwym _patoarchitektem_! **SQLite** z replikacjÄ… czeka na Ciebie.
  

# Links for the episode
links:
  - title: "Charting new territory: OpenTelemetry embraces profiling  "
    url: "https://www.cncf.io/blog/2024/04/11/charting-new-territory-opentelemetry-embraces-profiling/"
  - title: "Resource management in Aurora Serverless - Amazon Science"
    url: "https://www.amazon.science/publications/resource-management-in-aurora-serverless"
  - title: "The SQLite team is preparing an efficient remote replication tool &amp;#8226; DEVCLASS"
    url: "https://devclass.com/2024/10/02/the-sqlite-team-is-preparing-an-efficient-remote-replication-tool/"
  - title: "GitHub - microsoft/ebpf-for-windows: eBPF implementation that runs on top of Windows"
    url: "https://github.com/microsoft/ebpf-for-windows"
  - title: "Continuous deployment for large monorepos"
    url: "https://www.uber.com/en-AU/blog/continuous-deployment/"
  - title: "Migrating a production database without any downtime"
    url: "https://teamplify.com/blog/zero-downtime-DB-migrations/"
  - title: "bug: resource `azurerm_management_group_subscription_association` ID broken in v4.3.0 Â· Issue #27449 Â· hashicorp/terraform-provider-azurerm Â· GitHub"
    url: "https://github.com/hashicorp/terraform-provider-azurerm/issues/27449"

# Newsletter content (zachowane dla kompatybilnoÅ›ci)
newsletter: |
  CzeÅ›Ä‡! ğŸ‘‹ âœ¨
  
  **Short #59** to prawdziwa _patoarchitektoniczna_ uczta! Od **Uber CD** po **eBPF Profiling**, ten odcinek ma wszystko.
  
  Zanurzymy siÄ™ w Å›wiat **zero downtime** migracji baz danych i **continuous profiling** z **Open Telemetry**. Odkryjemy, dlaczego Uber stworzyÅ‚ wÅ‚asne narzÄ™dzie CD i jak **Amazon Aurora Serverless** radzi sobie z 10 000 wÄ™zÅ‚Ã³w.
  
  Chcesz wiedzieÄ‡, jak _nie_ robiÄ‡ **PoC**? Albo co siÄ™ stanie, gdy **Terraform** i **Azure** siÄ™ pokÅ‚Ã³cÄ…? PosÅ‚uchaj i zostaÅ„ prawdziwym _patoarchitektem_! **SQLite** z replikacjÄ… czeka na Ciebie.
  
  
  
  
  ## Odcinek na stronie i materiaÅ‚y do niego â¬‡ï¸
  
  â¡ï¸ [OdsÅ‚uchaj na stronie](https://patoarchitekci.io/128)
  â¡ï¸ [Spotify](https://open.spotify.com/episode/4ctQCIPsPa1qGOkvWsRPAh)
  â¡ï¸ [Apple Podcasts](https://podcasts.apple.com/pl/podcast/short-59-uber-cd-zero-downtime-vs-db-ebpf-profiling/id1477067604?i=1000675307657&uo=4)
  â¡ï¸ [YouTube](https://www.youtube.com/watch?v=yBArKZP8-ug)
  
  ## Short & Sweet
  

  ### ğŸ¤ DoÅ‚Ä…cz do Discord ğŸ‘‰ [https://discord.gg/78zPcEaP22](https://discord.gg/78zPcEaP22)
  
  ### ğŸ¢ Patron odcinka
  SÅ‚uchasz PatoarchitektÃ³w dziÄ™ki PROTOPII â€“ firmie, w ktÃ³rej Åukasz i Szymon dziaÅ‚ajÄ… na co dzieÅ„, wspierajÄ…c zespoÅ‚y IT na kaÅ¼dym etapie: od projektowania, przez wdroÅ¼enia i migracje, aÅ¼ po optymalizacjÄ™ i zabezpieczenia. Oferujemy teÅ¼ mentoring i szkolenia dostosowane do potrzeb kaÅ¼dej firmy, niezaleÅ¼nie od wielkoÅ›ci. SprawdÅº nas: [protopia.tech](https://protopia.tech/)
  
  PS. Masz pytania? Pisz Å›miaÅ‚o po drugiej stronie to nie bot na bazie GPT czy Claude ğŸ˜
---

**Szymon Warda**: CzeÅ›Ä‡, sÅ‚uchacie PatoarchitektÃ³w. ProwadzÄ… Szymon Warda...

**Åukasz KaÅ‚uÅ¼ny**: I Åukasz KaÅ‚uÅ¼ny. Wszystkie linki do tego odcinka znajdziecie na Patoarchitekci.io lub pewnie gdzieÅ› tu na dole, znajÄ…c Å¼ycie.

**Szymon Warda**: Tak. No to co Åukaszu, promujemy? Lecimy?

**Åukasz KaÅ‚uÅ¼ny**: Najpierw szkolenia, czyli w tym roku zostaÅ‚y jeszcze dwa, ktÃ³re prowadzimy otwarte. Ty prowadzisz Observability.

**Szymon Warda**: Zgadza siÄ™.

**Åukasz KaÅ‚uÅ¼ny**: A ja prowadzÄ™ Architektura 101. Observability, jak sama nazwa mÃ³wi, obserwowalnoÅ›Ä‡ z perspektywy stosu opensource'owego jak i APM-Ã³w, Å¼eby pokazaÄ‡ jak to wyglÄ…da. A ja pokaÅ¼Ä™ za to jak uporzÄ…dkowaÄ‡ sobie wiedzÄ™ na temat projektowania systemÃ³w.

**Szymon Warda**: Obydwa fajne. Na obydwa zapraszamy.

**Åukasz KaÅ‚uÅ¼ny**: Tak, Paotarchitekci.io/szkolenia lub teÅ¼ gdzieÅ› tu na dole.

**Szymon Warda**: Jasne. Dobra, to lecimy. To ja zacznÄ™, bo chciaÅ‚em CiÄ™ przeprosiÄ‡. Publicznie kajam siÄ™ i muszÄ™ przyznaÄ‡, Å¼e miaÅ‚eÅ› racjÄ™. Mianowicie o co? Odcinek o 12 Factor Apps jednak byÅ‚ potrzebny. I teraz czemu o tym mÃ³wiÄ™? Bo ostatnio dokopaÅ‚em siÄ™ do artykuÅ‚u o Uberze, Å¼eby nie byÅ‚o, Å¼e jakiÅ› taki wykop co nie wiadomo co i jak, o tym jak Uber robi deployementy. Uber ma okoÅ‚o 4,5 tysiÄ…ca serwisÃ³w pracujÄ…cych. Czy zdajesz sobie sprawÄ™ jaki procent serwisÃ³w byÅ‚ deployowany automatycznie? Strzelaj!

**Åukasz KaÅ‚uÅ¼ny**: Dobra, bez wchodzenia w ten artykuÅ‚, bo nie pokazaÅ‚eÅ› mi go, zaÅ‚Ã³Å¼my, Å¼e z 40.

**Szymon Warda**: Mniej, duÅ¼o mniej.

**Åukasz KaÅ‚uÅ¼ny**: What?

**Szymon Warda**: Strzelaj dalej. Dajesz!

**Åukasz KaÅ‚uÅ¼ny**: No dobra, to lecimy. JeÅ¼eli to jest tak absurdalne, to pewnie z 10%.

**Szymon Warda**: Mniej - 7.

**Åukasz KaÅ‚uÅ¼ny**: What the...? Co tam siÄ™ wydarzyÅ‚o?

**Szymon Warda**: Z tych 7% dalej czÄ™Å›Ä‡ wymagaÅ‚a manualnych krokÃ³w.

**Åukasz KaÅ‚uÅ¼ny**: Ta liczba mikroserwisÃ³w, jak teraz jeszcze widzÄ™ 7000 production deploymentÃ³w na tydzieÅ„. PrzecieÅ¼ to w ciÄ…gu kilku tygodni daÅ‚o to siÄ™ zautomatyzowaÄ‡, patrzÄ…c siÄ™ na czas, jaki ludzie tracili.

**Szymon Warda**: Z monorepo, wiÄ™c w kontekÅ›cie majÄ… 4,5 tysiÄ…ca serwisÃ³w. Znaczy, Å¼e 4 tysiÄ…ce 185 serwisÃ³w byÅ‚o wdraÅ¼anych na produkcjÄ™ rÄ™cznie. Ok, one moÅ¼e byÅ‚y mniej uÅ¼ywane, moÅ¼e to byÅ‚y po prostu rzeczy, ktÃ³re leÅ¼aÅ‚y, nie byÅ‚y rozwijane, itd. Ale sama liczba razy iloÅ›Ä‡ czasu potrzebna razy potencjaÅ‚ pomyÅ‚ki, to sÄ… nawet dla Ubera, nawet przy ich skali to sÄ… tak ogromne liczby spalonego czasu, Å¼e to jest aÅ¼ niemierzalne.

**Åukasz KaÅ‚uÅ¼ny**: Ty wiesz co? Dlatego ja mÃ³wiÄ™, Å¼e wiesz jak mi mÃ³wisz o iloÅ›ci deploymentÃ³w i serwisÃ³w i inne rzeczy, to siÄ™ daÅ‚o automatyzowaÄ‡. Ale to teÅ¼ moÅ¼e oznaczaÄ‡, sÅ‚uchaj Szymon, jednÄ… rzecz, nie zaglÄ…dajÄ…c nawet w artykuÅ‚, ale sÅ‚yszÄ…c te liczby, Å¼e wiÄ™kszoÅ›Ä‡ tych serwisÃ³w byÅ‚oby jak z Twitterem, moÅ¼na byÅ‚oby skasowaÄ‡ i nikt by nie zauwaÅ¼yÅ‚ prawdopodobnie.

**Szymon Warda**: Albo po prostu byÅ‚y trzymane, albo byÅ‚y rzadko wykorzystane, albo po prostu dziaÅ‚aÅ‚y w trybie utrzymania takiego totalnego, albo nawet nie utrzymania, tylko Å¼e coÅ› z tego korzystaÅ‚o. Tak, jest to moÅ¼liwe. Ale teraz idziemy dalej w tym artykule. Co zrobiÅ‚ Uber? Napisali wÅ‚asny tool do CD, Continuous Deployment. Moje pierwsze pytanie jest: po co? NaprawdÄ™, to jest taka grupa narzÄ™dzi, gdzie naprawdÄ™ ciÄ™Å¼ko bÄ™dzie odkryÄ‡ coÅ› nowego. Tam nie za bardzo... Ok, oni majÄ… taki przypadek, Å¼e co oni robiÄ…, to jest mianowicie to, Å¼e majÄ… monorepo i w tym monorepo po prostu wykrywajÄ… co siÄ™ zmieniÅ‚o i co na ktÃ³ry serwis wpÅ‚ywa. Fajny feature faktycznie, Å¼eby nie wrzucaÄ‡ zmiany we wszystkich serwisach. Sensowne, jak najbardziej. Tylko to moÅ¼na prostym pluginem albo nawet zmianÄ… wykryÄ‡ w istniejÄ…cym narzÄ™dziu do continuous deployment. Teraz jaki jest gÅ‚Ã³wny taki atut nowego narzÄ™dzia? Bardzo Å‚adny interfejs, ktÃ³ry daje podglÄ…d w czasie rzeczywistym, co siÄ™ wÅ‚aÅ›nie dzieje. To jest opis. Ok, moÅ¼e Å‚adnie to jest rzecz wzglÄ™dna generalnie, ale podglÄ…d co siÄ™ dzieje w czasie rzeczywistym jest funkcjonalnoÅ›ciÄ… kaÅ¼dego narzÄ™dzia do CD.

**Åukasz KaÅ‚uÅ¼ny**: Czy wiesz co ja mam wraÅ¼enie, po prostu nie chcieli wziÄ…Ä‡ Spinnakera od Netflixa.

**Szymon Warda**: Ja nie wiem co siÄ™ tam wydarzyÅ‚o, ale teraz chwalÄ… siÄ™, Å¼e dziÄ™ki temu prawie 70% serwisÃ³w jest wdraÅ¼anych automatycznie.

**Åukasz KaÅ‚uÅ¼ny**: Znaczy powiem Ci tak, wyciÄ…gajÄ…c to pokazuje absurd konfiguracji tego.

**Szymon Warda**: Znaczy tam jest duÅ¼o absurdÃ³w, bo tam jest po pierwsze to, Å¼e zbudujmy wÅ‚asne narzÄ™dzie zawsze, bo mamy unikalny problem. Nie macie unikalnego problemu.

**Åukasz KaÅ‚uÅ¼ny**: Raczej jedyna rzecz, ktÃ³ra jest, w ktÃ³rej majÄ… unikalny problem przy tej skali to jest coÅ›, co jest gdzieÅ› tam na trzecim diagramie, czyli to jest mapowanie sobie wersji serwisÃ³w, commitÃ³w i innych rzeczy, zbudowanie zaleÅ¼noÅ›ci, co jest zdeployowane.

**Szymon Warda**: Zgadza siÄ™. Przy czym teÅ¼ uwaÅ¼am, Å¼e nie jest to problem unikalny, Å¼e ktoÅ› juÅ¼ siÄ™ nad tym pochylaÅ‚.

**Åukasz KaÅ‚uÅ¼ny**: Tak, Backstage od Spotify siÄ™... Dlatego wiesz, trochÄ™ powiedziaÅ‚em, Å¼e to jest na zasadzie choroba, ktÃ³ra jest bardzo czÄ™sto w szczegÃ³lnoÅ›ci w big techu: not invented here. Czyli musimy napisaÄ‡ coÅ› od nowa, bo nie byÅ‚o tu wykryte i jesteÅ›my unikalni.

**Szymon Warda**: Tak, teÅ¼ byÅ‚o ogÅ‚oszenie, Å¼e TikTok zrobiÅ‚ narzÄ™dzie do zarzÄ…dzania duÅ¼ymi repo gitowymi, gdzie MS juÅ¼ to zrobiÅ‚, gdzie inni teÅ¼ juÅ¼ to zrobili, to mamy kolejne narzÄ™dzie juÅ¼.

**Åukasz KaÅ‚uÅ¼ny**: Gitowymi, ale sÅ‚owo klucz: gitowymi.

**Szymon Warda**: Tak. No wiÄ™c tak Åukasz, generalnie jednak okazaÅ‚o siÄ™, Å¼e 12 Factor Apps jest potrzebny, a my musimy w Protopii szukaÄ‡ klientÃ³w za granicÄ…, bo okazuje siÄ™, Å¼e jest duÅ¼a potrzeba na nasze usÅ‚ugi.

**Åukasz KaÅ‚uÅ¼ny**: Dobra, idziemy po 12 Factor Apps, to ode mnie link, bo trochÄ™ byÅ‚a dyskusja, Å¼e szydzimy i pewnie z tego zrobimy juÅ¼ dÅ‚uÅ¼szy odcinek na Discordzie, na ktÃ³ry zapraszamy, gdzie moÅ¼ecie z nami podyskutowaÄ‡. PadÅ‚o pytanie, bo przy 12 Factory Appsie okazaÅ‚o siÄ™, Å¼e chwilÄ™ poszydziliÅ›my, Å¼e bazy danych robimy, Å¼eby dziaÅ‚aÅ‚y u developera i zwykle z tego szydzimy, a na produkcji bywa juÅ¼ z tym rÃ³Å¼nie, w szczegÃ³lnoÅ›ci z migracjami schematu. I tu jest dobry link Å›wieÅ¼o zupdatowany, bo w momencie nagrywania sprzed tygodnia, na temat podejÅ›cia w jaki sposÃ³b dokonywaÄ‡ migracji kodu. Migracji z kodu, z automatyzacji schematu, Å¼eby zrobiÄ‡ zero downtime deployment.

**Szymon Warda**: Na bazie danych.

**Åukasz KaÅ‚uÅ¼ny**: Na bazie danych, dokÅ‚adnie i z aplikacjÄ… dziaÅ‚ajÄ…cÄ… w locie. WiÄ™c artykuÅ‚ Å›wietnie przedstawia takie podstawowe kroki, Å¼eby zrozumieÄ‡ to, w jaki sposÃ³b podchodzimy. Ja sÄ…dzÄ™, Å¼e z tego nagramy w ogÃ³le odcinek, bo to jest dobry temat, w szczegÃ³lnoÅ›ci rzecz kontrowersyjna, ktÃ³rÄ… powiem, jak myÅ›lisz, Å¼e masz NoSQL-a i to CiÄ™ uchroni przed migracjami, to jesteÅ› w taaakim bÅ‚Ä™dzie. Oj, Å¼yjesz w takim bÅ‚Ä™dzie.

**Szymon Warda**: Tak. Ale wiesz co? ArtykuÅ‚ jest Å›wietny, bo faktycznie jest, moÅ¼e zabrzmieÄ‡ dziwnie, ale z Å‚adnymi obrazkami i faktycznie bardzo fajnie to tÅ‚umaczy. JakoÅ›Ä‡ jest naprawdÄ™ Å›wietna.

**Åukasz KaÅ‚uÅ¼ny**: W szczegÃ³lnoÅ›ci sÄ… 4 przypadki, czyli nowa kolumna, usuwanie kolumny, zmienianie typu danych i rename'owanie tabeli, czyli 4 takie podstawowe. Powinno byÄ‡ jeszcze kasowanie kolumny.

**Szymon Warda**: Tabeli.

**Åukasz KaÅ‚uÅ¼ny**: Przepraszam, tabeli, jeszcze tabeli. Ale kto kasuje tabele?

**Szymon Warda**: Znam trochÄ™ ludzi, ktÃ³rzy kasujÄ…. Ale dobra, ale mnie bardziej zastanawia to, Å¼e kto potrzebuje aÅ¼ tak realnego zero downtime migration? Bo artykuÅ‚ jest fajny, chociaÅ¼ moÅ¼na robiÄ‡, to on na koniec pisze, Å¼e to nie jest trudne. Zgadza siÄ™, to nie jest trudne kodowo, bo tam wyzwaÅ„ w kodzie nie ma Å¼adnych. To jest super trudne jeÅ¼eli chodzi o organizacjÄ™ caÅ‚oÅ›ci.

**Åukasz KaÅ‚uÅ¼ny**: Ale ja zawsze mÃ³wiÄ™, Å¼e zero downtime to problem dyscypliny.

**Szymon Warda**: Tak.

**Åukasz KaÅ‚uÅ¼ny**: Problem procesu i dyscypliny. Zobacz teraz, Å¼e jak ja mÃ³wiÄ™ w trakcie konsultacji klientom: ok, to musicie zrobiÄ‡ release, ktÃ³ry robi tylko migracjÄ™ danych, przygotowanie schematu i dopiero potem, np. dzieÅ„ po deployujecie sobie aplikacyjkÄ™ czy od razu deployujecie, ale macie 2 release'y w danym momencie, jak sobie na to popatrzymy, Å¼eby potem zaÅ‚adowaÄ‡ funkcjonalnoÅ›Ä‡. Czy Å¼e macie korzystaÄ‡ z feature flag w ten sposÃ³b, Å¼e te feature flagi po powiedzeniu, Å¼e dziaÅ‚a, zaczynacie kasowaÄ‡. To jest w ogÃ³le problem.

**Szymon Warda**: Znaczy, bo to jest, teraz nakÅ‚ad zarzÄ…dczy wokÃ³Å‚ tego, Å¼eby ogarnÄ…Ä‡ co, kiedy siÄ™ dzieje, po jakim release'ie, nie wiem, release siÄ™ przesunÄ…Å‚, no Å¼ycie siÄ™ dziaÅ‚o projektowe, jest naprawdÄ™ bardzo duÅ¼e. IloÅ›Ä‡ i potencjaÅ‚ bÅ‚Ä™du i skala tego bÅ‚Ä™du teÅ¼ nagle bardzo, bardzo roÅ›nie. TakÅ¼e fajny artykuÅ‚. Wydaje mi siÄ™, Å¼e to jest... Wydaje mi siÄ™, no widzÄ™, Å¼e to realnie jest problem bardzo maÅ‚ej grupy projektÃ³w. MÃ³j apel nie wrzucajmy sobie tego problemu na siÅ‚Ä™, jak go nie mamy.

**Åukasz KaÅ‚uÅ¼ny**: Raczej to jest w ogÃ³le z zero downtimem, ja zawsze pytam, czy on jest faktycznie potrzebny? I tak jak nie potrzebujesz Service Mesha, Å¼eby robiÄ‡ canary release'y.

**Szymon Warda**: Zgadza siÄ™, jeszcze jest druga opcja. Pytanie jest, czy jesteÅ›cie gotowi za niego zapÅ‚aciÄ‡, bo bÄ™dzie duÅ¼o kosztowaÅ‚. Dobra, kolejny link ode mnie. CaÅ‚kiem ciekawe nowinki, bo wÅ‚aÅ›nie mÃ³wimy odnoÅ›nie szkolenia z Open Telemetry. To co siÄ™ wydarzyÅ‚o? Open Telemetry wÅ‚aÅ›nie przyjÄ…Å‚ do siebie Continuous Profiling, Å¼e caÅ‚y czas widzimy, zbieramy telemetriÄ™ z aplikacji bez potrzeby instrumentacji kompletnie. Robimy to oczywiÅ›cie przy wykorzystaniu filtrÃ³w eBPF-owych, czyli tylko Linux. I co siÄ™ wydarzyÅ‚o jeszcze? Elasticsearch daÅ‚ swojego agenta, ktÃ³ry to zbiera. WiÄ™c duÅ¼o siÄ™ dzieje. Teraz tak, w kontekÅ›cie trochÄ™ liczb, na czym polega i w ogÃ³le jak dziaÅ‚a caÅ‚y wÅ‚aÅ›nie Continuous Profiling? Mamy agenta, ktÃ³ry wÅ‚aÅ›nie korzysta z filtrÃ³w eBPF-owych i zbiera telemetriÄ™ aplikacji. Jakie sÄ… plusy? Ta aplikacja o tym nie wie, nie musi byÄ‡ modyfikowana, nie musimy wstrzykiwaÄ‡ kodu, ograniczeÅ„ mamy bardzo, bardzo niewiele, nie musimy mieÄ‡ jakiÅ› wysokich uprawnieÅ„, jak to bywa na przykÅ‚ad z agentami instalowanymi, moÅ¼emy to wÅ‚Ä…czaÄ‡ i wyÅ‚Ä…czaÄ‡, duÅ¼o dobrego. Narzut CPU jest okoÅ‚o 1%, niektÃ³rzy mÃ³wiÄ… 2,5, Pixie maksymalnie mÃ³wi, Å¼e 2,5, wiÄ™c caÅ‚kiem nieÅºle.

**Åukasz KaÅ‚uÅ¼ny**: Jest niezÅ‚y. Dobra, to ja CiÄ™ z jednÄ… rzeczÄ… tylko poprawiÄ™.

**Szymon Warda**: Jeszcze jedna rzecz. Wsparcie dla jÄ™zykÃ³w jest automatyczne, natywne. DuÅ¼o lepiej dziaÅ‚ajÄ… jÄ™zyki niskopoziomowe typu C, Java z flagÄ… Preserve Frame Pointer teÅ¼ dobrze wychodzi i moÅ¼emy modyfikowaÄ‡ biblioteki zewnÄ™trzne i komunikaty zewnÄ™trzne bez potrzeby, Å¼e one nie muszÄ… speÅ‚niaÄ‡ instrumentacji. WiÄ™c brzmi nieÅºle. MÃ³w teraz.

**Åukasz KaÅ‚uÅ¼ny**: SprawdzajÄ…c nawet 4 godziny temu byÅ‚ commit do eBPF for Windows.

**Szymon Warda**: Wiesz co Åukasz? Chyba tak samo jak Docker for Windows, tylko w kontekÅ›cie kontenerÃ³w windowsowych.

**Åukasz KaÅ‚uÅ¼ny**: Wiesz co, tutaj powiem Ci tak, to jest inna rzecz, bo z zaÅ‚oÅ¼enia powinien byÄ‡ ten sam bytecode co dla.. Nawet w FAQ-u jest o to pytanie: does this provide app compatibility with eBPF programs written for Linux? The intent is to provide source code compatibility for code that uses common hooks and helpers that apply across OS ecosystem. No wÅ‚aÅ›nie, wiÄ™c zobaczymy jak to bÄ™dzie.

**Szymon Warda**: Sorry, nie widzÄ™ adopcji tego tak naprawdÄ™. Druga sprawa jaka tam weszÅ‚a, to powstaÅ‚ SIG, czyli Special Interest Group, ktÃ³ry ma opracowaÄ‡ podejÅ›cie do Continuous Profiling i Open Telemetry w kontekÅ›cie tego jak ma wyglÄ…daÄ‡ uniwersalny model zbierania i zapisu danych, poÅ‚Ä…czenie wÅ‚aÅ›nie Open Telemetry Agenta, ktÃ³ry obecnie istnieje wÅ‚aÅ›nie z agentem do zbierania Continuous Profiling i w ogÃ³le poÅ‚Ä…czenie tego caÅ‚ego systemu. WiadomoÅ›ci ciekawe. Pod tym linkiem, ja siÄ™ nie zgadzam z tym, Å¼e samo Open Telemetry nie daje wartoÅ›ci, bo to tak nie jest. Continuous Profiling jest fajny, ale to jest jak picie z hydrantu. Tam jest doÅ›Ä‡ duÅ¼o rzeczy i to jest bardziej do mierzenia wydajnoÅ›ci. Open Telemetry jako taki jest do monitoringu. Monitoring a mierzenie wydajnoÅ›ci czy profilowania aplikacji to nie jest to samo i sÄ… inne przypadki uÅ¼ycia.

**Åukasz KaÅ‚uÅ¼ny**: Wiesz co, raczej chcÄ™, Å¼eby powiedzieÄ‡ moÅ¼e wprost, to jest kierunek w tym, Å¼eby daÅ‚o siÄ™ zrobiÄ‡ uniwersalne ÅºrÃ³dÅ‚o danych pod APM-y?

**Szymon Warda**: Zgadza siÄ™. Ciekawi mnie w tym momencie to, jakie wartoÅ›ci w tym momencie, jakie bÄ™dzie value added takiego Dynatrace'a, New Relica, itd. Bo bÄ™dzie znaczÄ…co niÅ¼sza.

**Åukasz KaÅ‚uÅ¼ny**: Wiesz co, obstawiam, Å¼e ich modele ML-owe, ktÃ³re bÄ™dÄ… potrafiÅ‚y zrobiÄ‡ korelacje i inne rzeczy, rzeczy, ktÃ³rych nie masz po prostu w opensource, ktÃ³re wymagaÅ‚y datasetÃ³w i know how.

**Szymon Warda**: Ok, jeszcze moÅ¼e byÄ‡ zaÅ‚Ã³Å¼my wsparcie dodatkowych jÄ™zykÃ³w, bo te jÄ™zyki po prostu... Trzeba zinterpretowaÄ‡ to, co siÄ™ dzieje na poziomie ML-a.

**Åukasz KaÅ‚uÅ¼ny**: Raczej wiesz, pytanie czy nie pÃ³jdzie to, Å¼e czÄ™Å›Ä‡ rzeczy zacznie siÄ™ pojawiaÄ‡, czy moÅ¼e przypadkiem jak wiesz, jak juÅ¼ wchodzimy w Continuous Profiling na razie na takich a nie innych poziomach, ale czy gdzieÅ› Zero Auto-Instrumentation nie zacznie siÄ™ pojawiaÄ‡ w danych streamach, takie znane z APM'Ã³w. Bo wiesz, zobacz, w jednym z newsÃ³w jest to, Å¼e np. Splang oddaÅ‚ swÃ³j silnik do Continuous Profilera, do .Netu np.

**Szymon Warda**: A to mi uciekÅ‚o. To jest niezÅ‚e. Dzieje siÄ™ duÅ¼o. Moje takie ostrzeÅ¼enie do wszystkich to jest to, Å¼e to nie jest znowu ten nasz srebrny pocisk i to nie zaÅ‚atwi wszystkiego. ChociaÅ¼by dlatego np., Å¼e Pixie zbiera ten Open Telemetry z Continuous Profiling, zbiera do 24 godzin, bo tych danych jest naprawdÄ™ duÅ¼o. To nie jest tak, Å¼e sobie wÅ‚Ä…czymy i bÄ™dzie fajnie. Wydaje mi siÄ™ to moÅ¼e skoÅ„czyÄ‡ siÄ™ na tym samym, Å¼e zapomnimy o tym, Å¼e aplikacjÄ™ trzeba instrumentowaÄ‡ i bÄ™dzie Continuous Profiling, Å¼eby uratowaÄ‡ wszystko.

**Åukasz KaÅ‚uÅ¼ny**: Wiesz co, Continuous Profiling jest po to, Å¼eby troubleshootowaÄ‡, trzeba to zaakceptowaÄ‡, ewentualnie widzieÄ‡ na Å¼ywo co siÄ™ paprze, a potem kasowaÄ‡ te dane po kilkunastu godzinach.

**Szymon Warda**: Åukasz, my to wiemy. Mnie bardziej martwi co rynek zrobi i jak marketing pÃ³jdzie wokÃ³Å‚ tego wszystkiego.

**Åukasz KaÅ‚uÅ¼ny**: Wszystkie logi sÄ… nam potrzebne.

**Szymon Warda**: OczywiÅ›cie, Å¼e sÄ… potrzebne i oczywiÅ›cie pÅ‚acisz per gigabajt logÃ³w. Dobrze, nie marudzimy dalej. Åšmigasz, co masz?

**Åukasz KaÅ‚uÅ¼ny**: Nie, nie marudzimy, marudzimy jeszcze bardziej, czyli z Å¼ycia konsultanta w Protopii. To jest rzecz, ktÃ³rÄ… czÄ™sto mi siÄ™ zdarza z klientami robiÄ‡, czyli proof of concept, czyli dowiedzenie sobie, Å¼e coÅ› zadziaÅ‚a, coÅ› nie. Jakbym miaÅ‚ przekazaÄ‡ dwie najwaÅ¼niejsze rzeczy, jeÅ¼eli chodzi o POC, to pierwsze to sÄ… zaÅ‚oÅ¼enia. Czyli wyznaczenie, jeÅ¼eli coÅ› testujemy, to nie, Å¼e robimy POC, tylko formuÅ‚ujemy tezy, na ktÃ³re ma odpowiedzieÄ‡. Czyli jak np. czy dana technologia pozwala zrobiÄ‡ XYZ, ktÃ³rego potrzebujemy? Jakie ma ograniczenia? MoÅ¼e jakieÅ› performance'owe testy? OkreÅ›lamy, co my potrzebujemy. I teraz bardzo waÅ¼na rzecz, ktÃ³ra jest kolejna, POC koÅ„czy siÄ™ sukcesem, jeÅ¼eli odpowiedzieliÅ›my na pytania.

**Szymon Warda**: Wiesz co, ja to swego czasu nazywaÅ‚em generalnie POT, nie jest sexy, ale mimo wszystko, bo to jest proof of technology tak naprawdÄ™.

**Åukasz KaÅ‚uÅ¼ny**: Tak, bo to jest przykÅ‚ad, do ktÃ³rego sobie referujÄ™ z ostatnich tygodni.

**Szymon Warda**: Wiem, do ktÃ³rego.

**Åukasz KaÅ‚uÅ¼ny**: Ty wiesz, ja tutaj nie mogÄ™ akurat zdradziÄ‡ aÅ¼ takich detali, ale tam byÅ‚o powiedzenie sobie wÅ‚aÅ›nie tak czy ten koncept zadziaÅ‚a z tÄ… technologiÄ…. Dlatego z jednej strony tak, te proof of technology ma gdzieÅ› smaczek, bo zwykle sprawdzamy, czy jesteÅ›my zrobiÄ‡ albo wÅ‚aÅ›nie czy dany koncept, jak idziemy w sÅ‚ownik, czy dany koncept zadziaÅ‚a.

**Szymon Warda**: Tak, dokÅ‚adnie, bo to jest takie doÅ›Ä‡ waÅ¼ne, bo POC to jest bardziej wÅ‚aÅ›nie ten taki biznesowy element. Moja rekomendacja jest taka, Å¼e w POC musi byÄ‡ POT, jeÅ¼eli wybieramy coÅ›, czego nie znamy.

**Åukasz KaÅ‚uÅ¼ny**: Tak. I kolejnym elementem, ktÃ³ry jest bo powiedziaÅ‚em wÅ‚aÅ›nie, Å¼e pacjent zmarÅ‚ i operacja siÄ™ udaÅ‚a, poniewaÅ¼ wykonaliÅ›my procedurÄ™ od A do Z, to pacjent byÅ‚ sÅ‚aby, nie przeÅ¼yÅ‚. I tak trzeba na to troszeczkÄ™ bezdusznie popatrzeÄ‡. I najwiÄ™kszÄ… wadÄ…, jakÄ… robimy w POC, to jest przywiÄ…zanie na siÅ‚Ä™ do technologii, Å¼e boimy siÄ™ jÄ… odrzuciÄ‡.

**Szymon Warda**: Tak, Å¼e jak tu teraz, tÄ… technologiÄ™, ktÃ³ra tak Å‚adnie brzmi, tak Å‚adnie byÅ‚a opisywana, wpakowaÄ‡ nogÄ…, rÄ™kÄ… albo jeszcze jakimÅ› dÅ‚ugim kijem do tego, co...

**Åukasz KaÅ‚uÅ¼ny**: Totalnie nie ma sensu. I to jest tak jak sobie popatrzycie, to pewnie jeszcze w paru shortach padnie tabula rasa w najbliÅ¼szym czasie, ale dobrze podejÅ›Ä‡ to i wyrzuciÄ‡ technologiÄ™ i zastanowiÄ‡ siÄ™. To tak jak z dobrym POC jest jak z dobrym ADR, rozwaÅ¼a konsekwencje i inne opcje, ktÃ³re sÄ…, wiÄ™c moÅ¼na powiedzieÄ‡, Å¼e POC to sÄ… realne testy ADR-a. Do odcinka, do ADR-Ã³w zapraszamy, kiedyÅ› taki popeÅ‚niliÅ›my. WiÄ™c to takie moje narzekanie, Å¼e nie przywiÄ…zujmy siÄ™ za bardzo do technologii przy POC-ach albo zmieÅ„my architekturÄ™, jeÅ¼eli coÅ› nie speÅ‚nia wymagaÅ„, a chcemy koniecznie skorzystaÄ‡ z tej technologii, co uwaÅ¼am czasami za gÅ‚upotÄ™, akurat upieranie siÄ™ tak na siÅ‚Ä™.

**Szymon Warda**: To mamy psychologii trochÄ™.

**Åukasz KaÅ‚uÅ¼ny**: Tak, tak, ja wiem.

**Szymon Warda**: PowinniÅ›my zmieniÄ‡ zdanie.

**Åukasz KaÅ‚uÅ¼ny**: Tak, ja zdajÄ™ sobie sprawÄ™, Å¼e to jest kontekst psychologiczny. Druga, Å¼e jak wdroÅ¼yliÅ›my cokolwiek, juÅ¼ uwaÅ¼amy, Å¼e to prawie produkcja. PrzecieÅ¼ jest dowcip, Å¼e jak POC zadziaÅ‚aÅ‚o, to juÅ¼ jest w sumie produkcjÄ….

**Szymon Warda**: PatrzÄ…c po tym, jak Uber wdraÅ¼a swoje serwisy, to moÅ¼na powiedzieÄ‡, Å¼e wÅ‚aÅ›ciwie jest.

**Åukasz KaÅ‚uÅ¼ny**: Idealnie. Dobra.

**Szymon Warda**: Dobrze, to teraz lecÄ™, bardziej z ciekawostek. Amazon Aurora Serverless, czyli baza danych relacyjna, ktÃ³ra jest zgodna z MySQL-em i Postgress-em. Link pewnie widziaÅ‚eÅ›, ale co mnie zaciekawiÅ‚o w tym linku? Link opisuje drugÄ… wersjÄ™, co siÄ™ zmieniÅ‚o, itd. Ale pierwsza rzecz, ktÃ³ra mnie zaciekawiÅ‚a, to byÅ‚ fakt, Å¼e caÅ‚a Amazon Aurora Serverless chodzi na okoÅ‚o 10 000 node'Ã³w. To jest maÅ‚o.

**Åukasz KaÅ‚uÅ¼ny**: Jak na caÅ‚oÅ›Ä‡.

**Szymon Warda**: Przy skali AWS-a, itd., to jest naprawdÄ™ maÅ‚o.

**Åukasz KaÅ‚uÅ¼ny**: CzyÅ¼by tak maÅ‚o osÃ³b z tego korzystaÅ‚o?

**Szymon Warda**: No na to wyglÄ…da tak naprawdÄ™.

**Åukasz KaÅ‚uÅ¼ny**: Bo wiesz, pytanie teraz jest, jak wyglÄ…da, teÅ¼ realne... Trzeba byÅ‚oby porozmawiaÄ‡, moÅ¼e kogoÅ› Å›ciÄ…gnÄ…Ä‡ przy okazji omawiania re:Inventa i zapytaÄ‡ siÄ™ jak wyglÄ…da popularnoÅ›Ä‡ tych usÅ‚ug tak realnie, realnie. I teÅ¼ dajcie znaÄ‡, czy w ogÃ³le, jeÅ¼eli korzystacie z AWS-a, to jak u Was z AurorÄ…? I czy korzystacie z niej w wersji serverlessowej?

**Szymon Warda**: Ale co siÄ™ tam zmieniÅ‚o? Bo to umÃ³wmy, Å¼e to taka ciekawostka, Å¼e to faktycznie tak przy okazji wyszÅ‚o. Co siÄ™ zmieniÅ‚o? ZmieniÅ‚o siÄ™ parÄ™ rzeczy. WyszÅ‚a wersja 2.0 i Aurora ma innÄ… fajnÄ… feature, Å¼e umie siÄ™ migrowaÄ‡ miÄ™dzy hostami, jeÅ¼eli siÄ™ skalujemy. OkazaÅ‚o siÄ™, Å¼e 99,98% zdarzeÅ„, ktÃ³re powodujÄ… skalowanie, mogÄ… byÄ‡ obsÅ‚uÅ¼one w formie skalowania wertykalnego, czyli zwiÄ™kszenia ile jest przypisanych zasobÃ³w do konkretnej instancji na hoÅ›cie. Czyli nie musimy przenosiÄ‡ instancji miÄ™dzy hostami. To fajnie wyglÄ…da. I skupili siÄ™ bardziej na tym wÅ‚aÅ›nie jak zarzÄ…dzaÄ‡ i jak optymalizowaÄ‡ zuÅ¼ycie pamiÄ™ci. GÅ‚Ã³wnie tu chodzi o pamiÄ™Ä‡, baza danych, wiÄ™c chodzi o pamiÄ™Ä‡ gÅ‚Ã³wnie, bo one po prostu lubiÄ… tyle RAM-u, ile tylko mogÄ… w kontekÅ›cie wÅ‚aÅ›nie hosta. ArtykuÅ‚ fajnie opisuje co tam w ogÃ³le siÄ™ dzieje, jakie sÄ… zmiany, wiÄ™c jeÅ¼eli ktoÅ› korzysta, okazuje siÄ™, Å¼e takich ludzi moÅ¼e byÄ‡ niewiele, z Aurory, to moÅ¼na by rzuciÄ‡ okiem i dowiedzieÄ‡ siÄ™, co tam siÄ™ wydarzyÅ‚o i jak to dziaÅ‚a. Bo ogÃ³lnie warto rzuciÄ‡ okiem i rozumieÄ‡ jak usÅ‚uga dziaÅ‚a.

**Åukasz KaÅ‚uÅ¼ny**: Tak, z takÄ… ciekawostkÄ…, ktÃ³ra jest, Å¼e pozbyli siÄ™ tam czÄ™Å›ciowo tego proxy.

**Szymon Warda**: Tam jest coÅ›, fajnie to opisali.

**Åukasz KaÅ‚uÅ¼ny**: Tak, jest duÅ¼o takich detali i smaczkÃ³w, ktÃ³re wynikajÄ… z tego. Sporo czytania, bo 13 stron, doÅ›Ä‡ sporo tekstu wrzucone i trzeba chwilÄ™ siÄ™ zastanowiÄ‡ nad tym co i jak to wyglÄ…da. DoÅ›Ä‡ sporo detali pokazujÄ… takich pod spodem.

**Szymon Warda**: Taki faktyczny papier, czyli faktycznie publikacja taka quasi-naukowa, bym powiedziaÅ‚, wiÄ™c dobry bardzo wpis. Dla osÃ³b, ktÃ³re korzystajÄ… z Aurory, zdecydowanie wydaje mi siÄ™, Å¼e obowiÄ…zkowy.

**Åukasz KaÅ‚uÅ¼ny**: Dobra, to jak jesteÅ›my przy bazach danych to chodÅºmy do SQLite'a.

**Szymon Warda**: IdÅºmy.

**Åukasz KaÅ‚uÅ¼ny**: IdÅºmy. SÅ‚uchajcie i co jest ciekawego? Team od SQLite'a zaczyna przygotowywaÄ‡ tool do replikacji SQLite'a. I teraz co bÄ™dzie? BÄ™dzie pozwalaÅ‚o zrobiÄ‡ w locie snapshoty, ktÃ³re nie bÄ™dÄ… blokowaÅ‚y bazy i bÄ™dÄ… pozwalaÅ‚y na odczyty i zapisy w trakcie.

**Szymon Warda**: To jest ciekawe. To jest naprawdÄ™ ciekawe, bo to by umoÅ¼liwiÅ‚o doÅ›Ä‡ ciekawe scenariusze, jeÅ¼eli chodzi o rozkÅ‚ad tej bazy i uÅ¼ycie SQLite'a jako bazy pamiÄ™ciowej.

**Åukasz KaÅ‚uÅ¼ny**: Raczej tutaj zaczyna siÄ™ robiÄ‡ ciekawie z tym jak sobie popatrzysz. W szczegÃ³lnoÅ›ci, Å¼e wydajnoÅ›Ä‡ SQLite'a, jak to dziaÅ‚a in process, jest coraz bardziej. No i fakt, oparli to... WidaÄ‡ co juÅ¼ bÄ™dzie, sÄ… dwie rzeczy, bo po prostu bÄ™dÄ… wykorzystywaÄ‡ WAL-a do tego, write-ahead logging, ktÃ³re jest moÅ¼liwe do skonfigurowania. WiÄ™c obie bazy bÄ™dÄ… musiaÅ‚y, ktÃ³re bÄ™dziemy replikowaÄ‡, muszÄ… uÅ¼ywaÄ‡ wÅ‚aÅ›nie WAL-a i ten sam rozmiar strony. Czyli pewnie bardzo mocno poszli low levelowo na page'ach i potem na scalaniu tego przy przenoszeniu snapshota, ale nadal jest to mega jak sobie popatrzysz.

**Szymon Warda**: Tak, ale jeszcze nie ma opublikowanej daty kiedy.

**Åukasz KaÅ‚uÅ¼ny**: Dopiero siÄ™ to zaczÄ™Å‚o, ale jest to ciekawy news. O tak.

**Szymon Warda**: Jestem bardzo ciekawy co ich skÅ‚oniÅ‚o do tego ruchu, bo to siÄ™ musiaÅ‚o skÄ…dÅ› wziÄ…Ä‡, w sensie jakieÅ› konkretne uÅ¼ycie i coÅ› siÄ™ musiaÅ‚o zadziaÄ‡ po prostu. Ok, dobra informacja, ciekawa, jestem ciekaw gdzie to dalej pÃ³jdzie.

**Åukasz KaÅ‚uÅ¼ny**: Dobra i ciekawostka z Terraforma, ze Å›wiata terraformowego. Tego nienawidzÄ™, czasem jak trafiam. MÃ³wi siÄ™, Å¼e mamy unit testy i inne rzeczy i Å¼e ten caÅ‚y kod powinniÅ›my trzymaÄ‡ dyscyplinÄ™ pisania i w ogÃ³le. No i pojawiÅ‚ siÄ™ taki fajny bug w providerze do Azure'a utrzymywany przez HashiCorpa. To jest provider trzymany nie przez Microsoft, tylko przez HashiCorpa, to jest waÅ¼ne, ten Azure natywny, terraformowy. To przy upgradzie, teraz byÅ‚a taka duÅ¼a wymiana terraforma w providerze wÅ‚aÅ›nie azurowym na linii 3 na 4. I to jest przypadek teÅ¼ z Å¼ycia, do 4.2 wszystko dziaÅ‚a. I nagle pokazuje siÄ™ w terraformie 4.3, nikt tego nie przetestowaÅ‚, pewna pierdoÅ‚a, ktÃ³ra mianowicie odpowiada za przepinanie w Azure subskrypcji pomiÄ™dzy management grupami. Czyli Å¼eby ustawiÄ‡ automatycznie z kodu gdzieÅ› w drzewku tÄ… naszÄ… subskrypcjÄ™ i przypiÄ…Ä‡ jÄ… w odpowiedniÄ… czÄ™Å›Ä‡ organizacji, management grupÄ™. I co siÄ™ okazaÅ‚o? Tak zrobili update SDK, Å¼e leciaÅ‚ error parsing the subscription ID the number of segment didn't match, czyli nie Å‚ykaÅ‚ w ogÃ³le poprawnie po update'cie SDK, ktÃ³re zrobili pod spodem. Nikt tego nie testowaÅ‚ i nie Å‚ykaÅ‚o w ogÃ³le, nie zrobili migracji pod spodem automatycznej i nie Å‚ykaÅ‚o w ogÃ³le wÅ‚aÅ›ciwych formatÃ³w, ani starego, ani nowego.

**Szymon Warda**: No powiem, Å¼e grubo, bym powiedziaÅ‚, Å¼e jest plus, Å¼e juÅ¼ naprawiony, Å¼e zamkniÄ™ty, moÅ¼e tak.

**Åukasz KaÅ‚uÅ¼ny**: Nie, wiesz co, bÄ™dÄ™ testowaÅ‚, bo akurat dzisiaj sprawdzaÅ‚em, czy muszÄ™ to wreszcie w jednym miejscu odblokowaÄ‡, auto podbijanie terraforma. Ale zaczÄ™Å‚o siÄ™ od 20 wrzeÅ›nia, a merge poszedÅ‚... Gdzie tutaj jest merge'yk... Last month. AÅ¼ sobie zobaczÄ™ kiedy poleciaÅ‚. Niby dwa tygodnie temu okoÅ‚o.

**Szymon Warda**: Ciekawie to wyglÄ…da. MoÅ¼e Åukasz w takim razie Open Tofu?

**Åukasz KaÅ‚uÅ¼ny**: Ale tam jest ten sam provider.

**Szymon Warda**: MoÅ¼na potrollowaÄ‡, to moÅ¼na potrollowaÄ‡, to zawsze jest jakaÅ› opcja.

**Åukasz KaÅ‚uÅ¼ny**: StrollowaÅ‚, ale zostawiÄ™ to sobie na nastÄ™pnego shorta, trollowanie na temat terraforma.

**Szymon Warda**: Dobrze niech bÄ™dzie. To co, koÅ„czymy chyba?

**Åukasz KaÅ‚uÅ¼ny**: KoÅ„czymy. Trzymajcie siÄ™.

**Szymon Warda**: Na razie.

